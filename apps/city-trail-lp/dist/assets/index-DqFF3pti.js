function xj(n,t){for(var a=0;a<t.length;a++){const i=t[a];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in n)){const u=Object.getOwnPropertyDescriptor(i,c);u&&Object.defineProperty(n,c,u.get?u:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();function xf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function bj(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var a=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var c=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(a,i,c.get?c:{enumerable:!0,get:function(){return n[i]}})}),a}var sh={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function yj(){if(Bx)return Ml;Bx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(i,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:n,type:i,key:d,ref:c!==void 0?c:null,props:u}}return Ml.Fragment=t,Ml.jsx=a,Ml.jsxs=a,Ml}var Lx;function vj(){return Lx||(Lx=1,sh.exports=yj()),sh.exports}var l=vj(),nh={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function wj(){if(Vx)return Ce;Vx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function j(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function O(T,K,ne){this.props=T,this.context=K,this.refs=k,this.updater=ne||N}O.prototype.isReactComponent={},O.prototype.setState=function(T,K){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,K,"setState")},O.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=O.prototype;function R(T,K,ne){this.props=T,this.context=K,this.refs=k,this.updater=ne||N}var Q=R.prototype=new U;Q.constructor=R,S(Q,O.prototype),Q.isPureReactComponent=!0;var F=Array.isArray;function te(){}var H={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function re(T,K,ne){var I=ne.ref;return{$$typeof:n,type:T,key:K,ref:I!==void 0?I:null,props:ne}}function je(T,K){return re(T.type,K,T.props)}function xe(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function Te(T){var K={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ne){return K[ne]})}var Me=/\/+/g;function Ge(T,K){return typeof T=="object"&&T!==null&&T.key!=null?Te(""+T.key):K.toString(36)}function oe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(te,te):(T.status="pending",T.then(function(K){T.status==="pending"&&(T.status="fulfilled",T.value=K)},function(K){T.status==="pending"&&(T.status="rejected",T.reason=K)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function P(T,K,ne,I,ce){var ge=typeof T;(ge==="undefined"||ge==="boolean")&&(T=null);var ke=!1;if(T===null)ke=!0;else switch(ge){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(T.$$typeof){case n:case t:ke=!0;break;case x:return ke=T._init,P(ke(T._payload),K,ne,I,ce)}}if(ke)return ce=ce(T),ke=I===""?"."+Ge(T,0):I,F(ce)?(ne="",ke!=null&&(ne=ke.replace(Me,"$&/")+"/"),P(ce,K,ne,"",function(W){return W})):ce!=null&&(xe(ce)&&(ce=je(ce,ne+(ce.key==null||T&&T.key===ce.key?"":(""+ce.key).replace(Me,"$&/")+"/")+ke)),K.push(ce)),1;ke=0;var se=I===""?".":I+":";if(F(T))for(var $=0;$<T.length;$++)I=T[$],ge=se+Ge(I,$),ke+=P(I,K,ne,ge,ce);else if($=j(T),typeof $=="function")for(T=$.call(T),$=0;!(I=T.next()).done;)I=I.value,ge=se+Ge(I,$++),ke+=P(I,K,ne,ge,ce);else if(ge==="object"){if(typeof T.then=="function")return P(oe(T),K,ne,I,ce);throw K=String(T),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ke}function X(T,K,ne){if(T==null)return T;var I=[],ce=0;return P(T,I,"","",function(ge){return K.call(ne,ge,ce++)}),I}function ie(T){if(T._status===-1){var K=T._result;K=K(),K.then(function(ne){(T._status===0||T._status===-1)&&(T._status=1,T._result=ne)},function(ne){(T._status===0||T._status===-1)&&(T._status=2,T._result=ne)}),T._status===-1&&(T._status=0,T._result=K)}if(T._status===1)return T._result.default;throw T._result}var ye=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Z={map:X,forEach:function(T,K,ne){X(T,function(){K.apply(this,arguments)},ne)},count:function(T){var K=0;return X(T,function(){K++}),K},toArray:function(T){return X(T,function(K){return K})||[]},only:function(T){if(!xe(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ce.Activity=y,Ce.Children=Z,Ce.Component=O,Ce.Fragment=a,Ce.Profiler=c,Ce.PureComponent=R,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(T){return H.H.useMemoCache(T)}},Ce.cache=function(T){return function(){return T.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(T,K,ne){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var I=S({},T.props),ce=T.key;if(K!=null)for(ge in K.key!==void 0&&(ce=""+K.key),K)!M.call(K,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&K.ref===void 0||(I[ge]=K[ge]);var ge=arguments.length-2;if(ge===1)I.children=ne;else if(1<ge){for(var ke=Array(ge),se=0;se<ge;se++)ke[se]=arguments[se+2];I.children=ke}return re(T.type,ce,I)},Ce.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},Ce.createElement=function(T,K,ne){var I,ce={},ge=null;if(K!=null)for(I in K.key!==void 0&&(ge=""+K.key),K)M.call(K,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(ce[I]=K[I]);var ke=arguments.length-2;if(ke===1)ce.children=ne;else if(1<ke){for(var se=Array(ke),$=0;$<ke;$++)se[$]=arguments[$+2];ce.children=se}if(T&&T.defaultProps)for(I in ke=T.defaultProps,ke)ce[I]===void 0&&(ce[I]=ke[I]);return re(T,ge,ce)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(T){return{$$typeof:p,render:T}},Ce.isValidElement=xe,Ce.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:ie}},Ce.memo=function(T,K){return{$$typeof:g,type:T,compare:K===void 0?null:K}},Ce.startTransition=function(T){var K=H.T,ne={};H.T=ne;try{var I=T(),ce=H.S;ce!==null&&ce(ne,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(te,ye)}catch(ge){ye(ge)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),H.T=K}},Ce.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ce.use=function(T){return H.H.use(T)},Ce.useActionState=function(T,K,ne){return H.H.useActionState(T,K,ne)},Ce.useCallback=function(T,K){return H.H.useCallback(T,K)},Ce.useContext=function(T){return H.H.useContext(T)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(T,K){return H.H.useDeferredValue(T,K)},Ce.useEffect=function(T,K){return H.H.useEffect(T,K)},Ce.useEffectEvent=function(T){return H.H.useEffectEvent(T)},Ce.useId=function(){return H.H.useId()},Ce.useImperativeHandle=function(T,K,ne){return H.H.useImperativeHandle(T,K,ne)},Ce.useInsertionEffect=function(T,K){return H.H.useInsertionEffect(T,K)},Ce.useLayoutEffect=function(T,K){return H.H.useLayoutEffect(T,K)},Ce.useMemo=function(T,K){return H.H.useMemo(T,K)},Ce.useOptimistic=function(T,K){return H.H.useOptimistic(T,K)},Ce.useReducer=function(T,K,ne){return H.H.useReducer(T,K,ne)},Ce.useRef=function(T){return H.H.useRef(T)},Ce.useState=function(T){return H.H.useState(T)},Ce.useSyncExternalStore=function(T,K,ne){return H.H.useSyncExternalStore(T,K,ne)},Ce.useTransition=function(){return H.H.useTransition()},Ce.version="19.2.0",Ce}var Px;function bf(){return Px||(Px=1,nh.exports=wj()),nh.exports}var A=bf();const jj=xf(A);var ah={exports:{}},Dl={},rh={exports:{}},ih={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function _j(){return qx||(qx=1,(function(n){function t(P,X){var ie=P.length;P.push(X);e:for(;0<ie;){var ye=ie-1>>>1,Z=P[ye];if(0<c(Z,X))P[ye]=X,P[ie]=Z,ie=ye;else break e}}function a(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var X=P[0],ie=P.pop();if(ie!==X){P[0]=ie;e:for(var ye=0,Z=P.length,T=Z>>>1;ye<T;){var K=2*(ye+1)-1,ne=P[K],I=K+1,ce=P[I];if(0>c(ne,ie))I<Z&&0>c(ce,ne)?(P[ye]=ce,P[I]=ie,ye=I):(P[ye]=ne,P[K]=ie,ye=K);else if(I<Z&&0>c(ce,ie))P[ye]=ce,P[I]=ie,ye=I;else break e}}return X}function c(P,X){var ie=P.sortIndex-X.sortIndex;return ie!==0?ie:P.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var m=[],g=[],x=1,y=null,v=3,j=!1,N=!1,S=!1,k=!1,O=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function Q(P){for(var X=a(g);X!==null;){if(X.callback===null)i(g);else if(X.startTime<=P)i(g),X.sortIndex=X.expirationTime,t(m,X);else break;X=a(g)}}function F(P){if(S=!1,Q(P),!N)if(a(m)!==null)N=!0,te||(te=!0,Te());else{var X=a(g);X!==null&&oe(F,X.startTime-P)}}var te=!1,H=-1,M=5,re=-1;function je(){return k?!0:!(n.unstable_now()-re<M)}function xe(){if(k=!1,te){var P=n.unstable_now();re=P;var X=!0;try{e:{N=!1,S&&(S=!1,U(H),H=-1),j=!0;var ie=v;try{t:{for(Q(P),y=a(m);y!==null&&!(y.expirationTime>P&&je());){var ye=y.callback;if(typeof ye=="function"){y.callback=null,v=y.priorityLevel;var Z=ye(y.expirationTime<=P);if(P=n.unstable_now(),typeof Z=="function"){y.callback=Z,Q(P),X=!0;break t}y===a(m)&&i(m),Q(P)}else i(m);y=a(m)}if(y!==null)X=!0;else{var T=a(g);T!==null&&oe(F,T.startTime-P),X=!1}}break e}finally{y=null,v=ie,j=!1}X=void 0}}finally{X?Te():te=!1}}}var Te;if(typeof R=="function")Te=function(){R(xe)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Ge=Me.port2;Me.port1.onmessage=xe,Te=function(){Ge.postMessage(null)}}else Te=function(){O(xe,0)};function oe(P,X){H=O(function(){P(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(P){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var ie=v;v=X;try{return P()}finally{v=ie}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ie=v;v=P;try{return X()}finally{v=ie}},n.unstable_scheduleCallback=function(P,X,ie){var ye=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ye+ie:ye):ie=ye,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,P={id:x++,callback:X,priorityLevel:P,startTime:ie,expirationTime:Z,sortIndex:-1},ie>ye?(P.sortIndex=ie,t(g,P),a(m)===null&&P===a(g)&&(S?(U(H),H=-1):S=!0,oe(F,ie-ye))):(P.sortIndex=Z,t(m,P),N||j||(N=!0,te||(te=!0,Te()))),P},n.unstable_shouldYield=je,n.unstable_wrapCallback=function(P){var X=v;return function(){var ie=v;v=X;try{return P.apply(this,arguments)}finally{v=ie}}}})(ih)),ih}var Hx;function Nj(){return Hx||(Hx=1,rh.exports=_j()),rh.exports}var lh={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function Sj(){if($x)return Jt;$x=1;var n=bf();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:m,containerInfo:g,implementation:x}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jt.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(m,g,null,x)},Jt.flushSync=function(m){var g=d.T,x=i.p;try{if(d.T=null,i.p=2,m)return m()}finally{d.T=g,i.p=x,i.d.f()}},Jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Jt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,y=p(x,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,j=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:j}):x==="script"&&i.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:j,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=p(x,g.crossOrigin);i.d.L(m,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=p(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Jt.requestFormReset=function(m){i.d.r(m)},Jt.unstable_batchedUpdates=function(m,g){return m(g)},Jt.useFormState=function(m,g,x){return d.H.useFormState(m,g,x)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var Ix;function Tj(){if(Ix)return lh.exports;Ix=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lh.exports=Sj(),lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function Ej(){if(Gx)return Dl;Gx=1;var n=Nj(),t=bf(),a=Tj();function i(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function d(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function p(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function g(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(i(188));return s!==e?null:e}for(var r=e,o=s;;){var h=r.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===r)return m(h),e;if(f===o)return m(h),s;f=f.sibling}throw Error(i(188))}if(r.return!==o.return)r=h,o=f;else{for(var b=!1,w=h.child;w;){if(w===r){b=!0,r=h,o=f;break}if(w===o){b=!0,o=h,r=f;break}w=w.sibling}if(!b){for(w=f.child;w;){if(w===r){b=!0,r=f,o=h;break}if(w===o){b=!0,o=f,r=h;break}w=w.sibling}if(!b)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:s}function x(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=x(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),R=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),je=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function Te(e){return e===null||typeof e!="object"?null:(e=xe&&e[xe]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Symbol.for("react.client.reference");function Ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case O:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case te:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case R:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case Q:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return s=e.displayName||null,s!==null?s:Ge(e.type)||"Memo";case M:s=e._payload,e=e._init;try{return Ge(e(s))}catch{}}return null}var oe=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ye=[],Z=-1;function T(e){return{current:e}}function K(e){0>Z||(e.current=ye[Z],ye[Z]=null,Z--)}function ne(e,s){Z++,ye[Z]=e.current,e.current=s}var I=T(null),ce=T(null),ge=T(null),ke=T(null);function se(e,s){switch(ne(ge,s),ne(ce,e),ne(I,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?ix(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=ix(s),e=lx(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(I),ne(I,e)}function $(){K(I),K(ce),K(ge)}function W(e){e.memoizedState!==null&&ne(ke,e);var s=I.current,r=lx(s,e.type);s!==r&&(ne(ce,e),ne(I,r))}function ae(e){ce.current===e&&(K(I),K(ce)),ke.current===e&&(K(ke),Al._currentValue=ie)}var ve,G;function le(e){if(ve===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ve=s&&s[1]||"",G=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+e+G}var ue=!1;function de(e,s){if(!e||ue)return"";ue=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(q){var V=q}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(q){V=q}e.call(ee.prototype)}}else{try{throw Error()}catch(q){V=q}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(q){if(q&&V&&typeof q.stack=="string")return[q.stack,V.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),b=f[0],w=f[1];if(b&&w){var E=b.split(`
`),L=w.split(`
`);for(h=o=0;o<E.length&&!E[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===E.length||h===L.length)for(o=E.length-1,h=L.length-1;1<=o&&0<=h&&E[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(E[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||E[o]!==L[h]){var Y=`
`+E[o].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=o&&0<=h);break}}}finally{ue=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?le(r):""}function Ae(e,s){switch(e.tag){case 26:case 27:case 5:return le(e.type);case 16:return le("Lazy");case 13:return e.child!==s&&s!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return de(e.type,!1);case 11:return de(e.type.render,!1);case 1:return de(e.type,!0);case 31:return le("Activity");default:return""}}function ze(e){try{var s="",r=null;do s+=Ae(e,r),r=e,e=e.return;while(e);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ye=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,Ma=n.unstable_cancelCallback,Da=n.unstable_shouldYield,Ua=n.unstable_requestPaint,ts=n.unstable_now,ki=n.unstable_getCurrentPriorityLevel,Ai=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,vs=n.unstable_NormalPriority,gr=n.unstable_LowPriority,xr=n.unstable_IdlePriority,br=n.log,lo=n.unstable_setDisableYieldValue,on=null,Ke=null;function ss(e){if(typeof br=="function"&&lo(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(on,e)}catch{}}var ns=Math.clz32?Math.clz32:Ci,za=Math.log,vn=Math.LN2;function Ci(e){return e>>>=0,e===0?32:31-(za(e)/vn|0)|0}var Ba=256,cn=262144,Kn=4194304;function Us(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bt(e,s,r){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?h=Us(o):(b&=w,b!==0?h=Us(b):r||(r=w&~e,r!==0&&(h=Us(r))))):(w=o&~f,w!==0?h=Us(w):b!==0?h=Us(b):r||(r=o&~e,r!==0&&(h=Us(r)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,r=s&-s,f>=r||f===32&&(r&4194048)!==0)?s:h}function Yn(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Oi(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var e=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),e}function wn(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function ws(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ri(e,s,r,o,h,f){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var w=e.entanglements,E=e.expirationTimes,L=e.hiddenUpdates;for(r=b&~r;0<r;){var Y=31-ns(r),ee=1<<Y;w[Y]=0,E[Y]=-1;var V=L[Y];if(V!==null)for(L[Y]=null,Y=0;Y<V.length;Y++){var q=V[Y];q!==null&&(q.lane&=-536870913)}r&=~ee}o!==0&&Mi(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~s))}function Mi(e,s,r){e.pendingLanes|=s,e.suspendedLanes&=~s;var o=31-ns(s);e.entangledLanes|=s,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function Di(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var o=31-ns(r),h=1<<o;h&s|e[o]&s&&(e[o]|=s),r&=~h}}function Xn(e,s){var r=s&-s;return r=(r&42)!==0?1:Ui(r),(r&(e.suspendedLanes|s))!==0?0:r}function Ui(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function oo(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Cx(e.type))}function wr(e,s){var r=X.p;try{return X.p=e,s()}finally{X.p=r}}var Qs=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Qs,Zt="__reactProps$"+Qs,un="__reactContainer$"+Qs,jr="__reactEvents$"+Qs,co="__reactListeners$"+Qs,Qn="__reactHandles$"+Qs,zi="__reactResources$"+Qs,Fn="__reactMarker$"+Qs;function Zn(e){delete e[Dt],delete e[Zt],delete e[jr],delete e[co],delete e[Qn]}function jn(e){var s=e[Dt];if(s)return s;for(var r=e.parentNode;r;){if(s=r[un]||r[Dt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=mx(e);e!==null;){if(r=e[Dt])return r;e=mx(e)}return s}e=r,r=e.parentNode}return null}function Jn(e){if(e=e[Dt]||e[un]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function Ze(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(i(33))}function _n(e){var s=e[zi];return s||(s=e[zi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ht(e){e[Fn]=!0}var _r=new Set,Bi={};function dn(e,s){at(e,s),at(e+"Capture",s)}function at(e,s){for(Bi[e]=s,e=0;e<s.length;e++)_r.add(s[e])}var Wn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ea={},Nr={};function Li(e){return Ye.call(Nr,e)?!0:Ye.call(ea,e)?!1:Wn.test(e)?Nr[e]=!0:(ea[e]=!0,!1)}function La(e,s,r){if(Li(s))if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+r)}}function Sr(e,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+r)}}function Fs(e,s,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(s,r,""+o)}}function us(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uo(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Va(e,s,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){r=""+b,f.call(this,b)}}),Object.defineProperty(e,s,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Zs(e){if(!e._valueTracker){var s=uo(e)?"checked":"value";e._valueTracker=Va(e,s,""+e[s])}}function Tr(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),o="";return e&&(o=uo(e)?e.checked?"true":"false":e.value),e=o,e!==r?(s.setValue(e),!0):!1}function Er(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ru=/[\n"\\]/g;function Lt(e){return e.replace(ru,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vi(e,s,r,o,h,f,b,w){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),s!=null?b==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+us(s)):e.value!==""+us(s)&&(e.value=""+us(s)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),s!=null?Pi(e,b,us(s)):r!=null?Pi(e,b,us(r)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+us(w):e.removeAttribute("name")}function ho(e,s,r,o,h,f,b,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),s!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||s!=null)){Zs(e);return}r=r!=null?""+us(r):"",s=s!=null?""+us(s):r,w||s===e.value||(e.value=s),e.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Zs(e)}function Pi(e,s,r){s==="number"&&Er(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ta(e,s,r,o){if(e=e.options,s){s={};for(var h=0;h<r.length;h++)s["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=s.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&o&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),s=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function fo(e,s,r){if(s!=null&&(s=""+us(s),s!==e.value&&(e.value=s),r==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=r!=null?""+us(r):""}function ds(e,s,r,o){if(s==null){if(o!=null){if(r!=null)throw Error(i(92));if(oe(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),s=r}r=us(s),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),Zs(e)}function Js(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var qi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mo(e,s,r){var o=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":o?e.setProperty(s,r):typeof r!="number"||r===0||qi.has(s)?s==="float"?e.cssFloat=r:e[s]=(""+r).trim():e[s]=r+"px"}function Hi(e,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&r[h]!==o&&mo(e,h,o)}else for(var f in s)s.hasOwnProperty(f)&&mo(e,f,s[f])}function $i(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(e){return po.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function js(){}var Ii=null;function Gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sa=null,as=null;function Pa(e){var s=Jn(e);if(s&&(e=s.stateNode)){var r=e[Zt]||null;e:switch(e=s.stateNode,s.type){case"input":if(Vi(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Lt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var o=r[s];if(o!==e&&o.form===e.form){var h=o[Zt]||null;if(!h)throw Error(i(90));Vi(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<r.length;s++)o=r[s],o.form===e.form&&Tr(o)}break e;case"textarea":fo(e,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&ta(e,!!r.multiple,s,!1)}}}var Ki=!1;function go(e,s,r){if(Ki)return e(s,r);Ki=!0;try{var o=e(s);return o}finally{if(Ki=!1,(sa!==null||as!==null)&&(Jo(),sa&&(s=sa,e=as,as=sa=null,Pa(s),e)))for(s=0;s<e.length;s++)Pa(e[s])}}function hn(e,s){var r=e.stateNode;if(r===null)return null;var o=r[Zt]||null;if(o===null)return null;r=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=!1;if(_s)try{var z={};Object.defineProperty(z,"passive",{get:function(){_=!0}}),window.addEventListener("test",z,z),window.removeEventListener("test",z,z)}catch{_=!1}var he=null,$e=null,gt=null;function lt(){if(gt)return gt;var e,s=$e,r=s.length,o,h="value"in he?he.value:he.textContent,f=h.length;for(e=0;e<r&&s[e]===h[e];e++);var b=r-e;for(o=1;o<=b&&s[r-o]===h[f-o];o++);return gt=h.slice(e,1<o?1-o:void 0)}function rs(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function zs(){return!0}function Ht(){return!1}function rt(e){function s(r,o,h,f,b){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?zs:Ht,this.isPropagationStopped=Ht,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),s}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=rt(Ns),hs=y({},Ns,{view:0,detail:0}),fn=rt(hs),ft,fs,Tt,Pe=y({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tt&&(Tt&&e.type==="mousemove"?(ft=e.screenX-Tt.screenX,fs=e.screenY-Tt.screenY):fs=ft=0,Tt=e),ft)},movementY:function(e){return"movementY"in e?e.movementY:fs}}),ls=rt(Pe),$t=y({},Pe,{dataTransfer:0}),Oe=rt($t),xt=y({},hs,{relatedTarget:0}),Vt=rt(xt),wt=y({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Nn=rt(wt),Yi=y({},Ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xi=rt(Yi),Qi=y({},Ns,{data:0}),It=rt(Qi),Be={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ew(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Tw[e])?!!s[e]:!1}function lu(){return Ew}var kw=y({},hs,{key:function(e){if(e.key){var s=Be[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(e){return e.type==="keypress"?rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Aw=rt(kw),Cw=y({},Pe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=rt(Cw),Ow=y({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),Rw=rt(Ow),Mw=y({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dw=rt(Mw),Uw=y({},Pe,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zw=rt(Uw),Bw=y({},Ns,{newState:0,oldState:0}),Lw=rt(Bw),Vw=[9,13,27,32],ou=_s&&"CompositionEvent"in window,Fi=null;_s&&"documentMode"in document&&(Fi=document.documentMode);var Pw=_s&&"TextEvent"in window&&!Fi,hm=_s&&(!ou||Fi&&8<Fi&&11>=Fi),fm=" ",mm=!1;function pm(e,s){switch(e){case"keyup":return Vw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function qw(e,s){switch(e){case"compositionend":return gm(s);case"keypress":return s.which!==32?null:(mm=!0,fm);case"textInput":return e=s.data,e===fm&&mm?null:e;default:return null}}function Hw(e,s){if(Ar)return e==="compositionend"||!ou&&pm(e,s)?(e=lt(),gt=$e=he=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hm&&s.locale!=="ko"?null:s.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!$w[e.type]:s==="textarea"}function bm(e,s,r,o){sa?as?as.push(o):as=[o]:sa=o,s=rc(s,"onChange"),0<s.length&&(r=new is("onChange","change",null,r,o),e.push({event:r,listeners:s}))}var Zi=null,Ji=null;function Iw(e){ex(e,0)}function xo(e){var s=Ze(e);if(Tr(s))return e}function ym(e,s){if(e==="change")return s}var vm=!1;if(_s){var cu;if(_s){var uu="oninput"in document;if(!uu){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),uu=typeof wm.oninput=="function"}cu=uu}else cu=!1;vm=cu&&(!document.documentMode||9<document.documentMode)}function jm(){Zi&&(Zi.detachEvent("onpropertychange",_m),Ji=Zi=null)}function _m(e){if(e.propertyName==="value"&&xo(Ji)){var s=[];bm(s,Ji,e,Gi(e)),go(Iw,s)}}function Gw(e,s,r){e==="focusin"?(jm(),Zi=s,Ji=r,Zi.attachEvent("onpropertychange",_m)):e==="focusout"&&jm()}function Kw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xo(Ji)}function Yw(e,s){if(e==="click")return xo(s)}function Xw(e,s){if(e==="input"||e==="change")return xo(s)}function Qw(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ss=typeof Object.is=="function"?Object.is:Qw;function Wi(e,s){if(Ss(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),o=Object.keys(s);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!Ye.call(s,h)||!Ss(e[h],s[h]))return!1}return!0}function Nm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sm(e,s){var r=Nm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=s&&o>=s)return{node:r,offset:s-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nm(r)}}function Tm(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Tm(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Em(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Er(e.document);s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Er(e.document)}return s}function du(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var Fw=_s&&"documentMode"in document&&11>=document.documentMode,Cr=null,hu=null,el=null,fu=!1;function km(e,s,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fu||Cr==null||Cr!==Er(o)||(o=Cr,"selectionStart"in o&&du(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),el&&Wi(el,o)||(el=o,o=rc(hu,"onSelect"),0<o.length&&(s=new is("onSelect","select",null,s,r),e.push({event:s,listeners:o}),s.target=Cr)))}function qa(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Or={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},mu={},Am={};_s&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Ha(e){if(mu[e])return mu[e];if(!Or[e])return e;var s=Or[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in Am)return mu[e]=s[r];return e}var Cm=Ha("animationend"),Om=Ha("animationiteration"),Rm=Ha("animationstart"),Zw=Ha("transitionrun"),Jw=Ha("transitionstart"),Ww=Ha("transitioncancel"),Mm=Ha("transitionend"),Dm=new Map,pu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pu.push("scrollEnd");function Ws(e,s){Dm.set(e,s),dn(s,[e])}var bo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bs=[],Rr=0,gu=0;function yo(){for(var e=Rr,s=gu=Rr=0;s<e;){var r=Bs[s];Bs[s++]=null;var o=Bs[s];Bs[s++]=null;var h=Bs[s];Bs[s++]=null;var f=Bs[s];if(Bs[s++]=null,o!==null&&h!==null){var b=o.pending;b===null?h.next=h:(h.next=b.next,b.next=h),o.pending=h}f!==0&&Um(r,h,f)}}function vo(e,s,r,o){Bs[Rr++]=e,Bs[Rr++]=s,Bs[Rr++]=r,Bs[Rr++]=o,gu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function xu(e,s,r,o){return vo(e,s,r,o),wo(e)}function $a(e,s){return vo(e,null,null,s),wo(e)}function Um(e,s,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var h=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&s!==null&&(h=31-ns(r),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[s]:o.push(s),s.lane=r|536870912),f):null}function wo(e){if(50<jl)throw jl=0,Td=null,Error(i(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Mr={};function e1(e,s,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,s,r,o){return new e1(e,s,r,o)}function bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tn(e,s){var r=e.alternate;return r===null?(r=Ts(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function zm(e,s){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,s=r.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function jo(e,s,r,o,h,f){var b=0;if(o=e,typeof e=="function")bu(e)&&(b=1);else if(typeof e=="string")b=rj(e,r,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=Ts(31,r,s,h),e.elementType=re,e.lanes=f,e;case S:return Ia(r.children,h,f,s);case k:b=8,h|=24;break;case O:return e=Ts(12,r,s,h|2),e.elementType=O,e.lanes=f,e;case F:return e=Ts(13,r,s,h),e.elementType=F,e.lanes=f,e;case te:return e=Ts(19,r,s,h),e.elementType=te,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:b=10;break e;case U:b=9;break e;case Q:b=11;break e;case H:b=14;break e;case M:b=16,o=null;break e}b=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return s=Ts(b,r,s,h),s.elementType=e,s.type=o,s.lanes=f,s}function Ia(e,s,r,o){return e=Ts(7,e,o,s),e.lanes=r,e}function yu(e,s,r){return e=Ts(6,e,null,s),e.lanes=r,e}function Bm(e){var s=Ts(18,null,null,0);return s.stateNode=e,s}function vu(e,s,r){return s=Ts(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Lm=new WeakMap;function Ls(e,s){if(typeof e=="object"&&e!==null){var r=Lm.get(e);return r!==void 0?r:(s={value:e,source:s,stack:ze(s)},Lm.set(e,s),s)}return{value:e,source:s,stack:ze(s)}}var Dr=[],Ur=0,_o=null,tl=0,Vs=[],Ps=0,na=null,mn=1,pn="";function En(e,s){Dr[Ur++]=tl,Dr[Ur++]=_o,_o=e,tl=s}function Vm(e,s,r){Vs[Ps++]=mn,Vs[Ps++]=pn,Vs[Ps++]=na,na=e;var o=mn;e=pn;var h=32-ns(o)-1;o&=~(1<<h),r+=1;var f=32-ns(s)+h;if(30<f){var b=h-h%5;f=(o&(1<<b)-1).toString(32),o>>=b,h-=b,mn=1<<32-ns(s)+h|r<<h|o,pn=f+e}else mn=1<<f|r<<h|o,pn=e}function wu(e){e.return!==null&&(En(e,1),Vm(e,1,0))}function ju(e){for(;e===_o;)_o=Dr[--Ur],Dr[Ur]=null,tl=Dr[--Ur],Dr[Ur]=null;for(;e===na;)na=Vs[--Ps],Vs[Ps]=null,pn=Vs[--Ps],Vs[Ps]=null,mn=Vs[--Ps],Vs[Ps]=null}function Pm(e,s){Vs[Ps++]=mn,Vs[Ps++]=pn,Vs[Ps++]=na,mn=s.id,pn=s.overflow,na=e}var Gt=null,ot=null,Ie=!1,aa=null,qs=!1,_u=Error(i(519));function ra(e){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(Ls(s,e)),_u}function qm(e){var s=e.stateNode,r=e.type,o=e.memoizedProps;switch(s[Dt]=e,s[Zt]=o,r){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(r=0;r<Nl.length;r++)Ve(Nl[r],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),ho(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),ds(s,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||o.suppressHydrationWarning===!0||ax(s.textContent,r)?(o.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),o.onScroll!=null&&Ve("scroll",s),o.onScrollEnd!=null&&Ve("scrollend",s),o.onClick!=null&&(s.onclick=js),s=!0):s=!1,s||ra(e,!0)}function Hm(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 31:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:Gt=Gt.return}}function zr(e){if(e!==Gt)return!1;if(!Ie)return Hm(e),Ie=!0,!1;var s=e.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||qd(e.type,e.memoizedProps)),r=!r),r&&ot&&ra(e),Hm(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ot=fx(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));ot=fx(e)}else s===27?(s=ot,ya(e.type)?(e=Kd,Kd=null,ot=e):ot=s):ot=Gt?$s(e.stateNode.nextSibling):null;return!0}function Ga(){ot=Gt=null,Ie=!1}function Nu(){var e=aa;return e!==null&&(xs===null?xs=e:xs.push.apply(xs,e),aa=null),e}function sl(e){aa===null?aa=[e]:aa.push(e)}var Su=T(null),Ka=null,kn=null;function ia(e,s,r){ne(Su,s._currentValue),s._currentValue=r}function An(e){e._currentValue=Su.current,K(Su)}function Tu(e,s,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),e===r)break;e=e.return}}function Eu(e,s,r,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var E=0;E<s.length;E++)if(w.context===s[E]){f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),Tu(f.return,r,e),o||(b=null);break e}f=w.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=r,f=b.alternate,f!==null&&(f.lanes|=r),Tu(b,r,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Br(e,s,r,o){e=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var w=h.type;Ss(h.pendingProps.value,b.value)||(e!==null?e.push(w):e=[w])}}else if(h===ke.current){if(b=h.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Al):e=[Al])}h=h.return}e!==null&&Eu(s,e,r,o),s.flags|=262144}function No(e){for(e=e.firstContext;e!==null;){if(!Ss(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ya(e){Ka=e,kn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Kt(e){return $m(Ka,e)}function So(e,s){return Ka===null&&Ya(e),$m(e,s)}function $m(e,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},kn===null){if(e===null)throw Error(i(308));kn=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else kn=kn.next=s;return r}var t1=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){s.aborted=!0,e.forEach(function(r){return r()})}},s1=n.unstable_scheduleCallback,n1=n.unstable_NormalPriority,Et={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ku(){return{controller:new t1,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&s1(n1,function(){e.controller.abort()})}var al=null,Au=0,Lr=0,Vr=null;function a1(e,s){if(al===null){var r=al=[];Au=0,Lr=Rd(),Vr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Au++,s.then(Im,Im),s}function Im(){if(--Au===0&&al!==null){Vr!==null&&(Vr.status="fulfilled");var e=al;al=null,Lr=0,Vr=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function r1(e,s){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<r.length;h++)(0,r[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var Gm=P.S;P.S=function(e,s){kg=ts(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&a1(e,s),Gm!==null&&Gm(e,s)};var Xa=T(null);function Cu(){var e=Xa.current;return e!==null?e:nt.pooledCache}function To(e,s){s===null?ne(Xa,Xa.current):ne(Xa,s.pool)}function Km(){var e=Cu();return e===null?null:{parent:Et._currentValue,pool:e}}var Pr=Error(i(460)),Ou=Error(i(474)),Eo=Error(i(542)),ko={then:function(){}};function Ym(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xm(e,s,r){switch(r=e[r],r===void 0?e.push(s):r!==s&&(s.then(js,js),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Fm(e),e;default:if(typeof s.status=="string")s.then(js,js);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=s,e.status="pending",e.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Fm(e),e}throw Fa=s,Pr}}function Qa(e){try{var s=e._init;return s(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Fa=r,Pr):r}}var Fa=null;function Qm(){if(Fa===null)throw Error(i(459));var e=Fa;return Fa=null,e}function Fm(e){if(e===Pr||e===Eo)throw Error(i(483))}var qr=null,rl=0;function Ao(e){var s=rl;return rl+=1,qr===null&&(qr=[]),Xm(qr,e,s)}function il(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Co(e,s){throw s.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Zm(e){function s(D,C){if(e){var B=D.deletions;B===null?(D.deletions=[C],D.flags|=16):B.push(C)}}function r(D,C){if(!e)return null;for(;C!==null;)s(D,C),C=C.sibling;return null}function o(D){for(var C=new Map;D!==null;)D.key!==null?C.set(D.key,D):C.set(D.index,D),D=D.sibling;return C}function h(D,C){return D=Tn(D,C),D.index=0,D.sibling=null,D}function f(D,C,B){return D.index=B,e?(B=D.alternate,B!==null?(B=B.index,B<C?(D.flags|=67108866,C):B):(D.flags|=67108866,C)):(D.flags|=1048576,C)}function b(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function w(D,C,B,J){return C===null||C.tag!==6?(C=yu(B,D.mode,J),C.return=D,C):(C=h(C,B),C.return=D,C)}function E(D,C,B,J){var we=B.type;return we===S?Y(D,C,B.props.children,J,B.key):C!==null&&(C.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&Qa(we)===C.type)?(C=h(C,B.props),il(C,B),C.return=D,C):(C=jo(B.type,B.key,B.props,null,D.mode,J),il(C,B),C.return=D,C)}function L(D,C,B,J){return C===null||C.tag!==4||C.stateNode.containerInfo!==B.containerInfo||C.stateNode.implementation!==B.implementation?(C=vu(B,D.mode,J),C.return=D,C):(C=h(C,B.children||[]),C.return=D,C)}function Y(D,C,B,J,we){return C===null||C.tag!==7?(C=Ia(B,D.mode,J,we),C.return=D,C):(C=h(C,B),C.return=D,C)}function ee(D,C,B){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=yu(""+C,D.mode,B),C.return=D,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case j:return B=jo(C.type,C.key,C.props,null,D.mode,B),il(B,C),B.return=D,B;case N:return C=vu(C,D.mode,B),C.return=D,C;case M:return C=Qa(C),ee(D,C,B)}if(oe(C)||Te(C))return C=Ia(C,D.mode,B,null),C.return=D,C;if(typeof C.then=="function")return ee(D,Ao(C),B);if(C.$$typeof===R)return ee(D,So(D,C),B);Co(D,C)}return null}function V(D,C,B,J){var we=C!==null?C.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return we!==null?null:w(D,C,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return B.key===we?E(D,C,B,J):null;case N:return B.key===we?L(D,C,B,J):null;case M:return B=Qa(B),V(D,C,B,J)}if(oe(B)||Te(B))return we!==null?null:Y(D,C,B,J,null);if(typeof B.then=="function")return V(D,C,Ao(B),J);if(B.$$typeof===R)return V(D,C,So(D,B),J);Co(D,B)}return null}function q(D,C,B,J,we){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return D=D.get(B)||null,w(C,D,""+J,we);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case j:return D=D.get(J.key===null?B:J.key)||null,E(C,D,J,we);case N:return D=D.get(J.key===null?B:J.key)||null,L(C,D,J,we);case M:return J=Qa(J),q(D,C,B,J,we)}if(oe(J)||Te(J))return D=D.get(B)||null,Y(C,D,J,we,null);if(typeof J.then=="function")return q(D,C,B,Ao(J),we);if(J.$$typeof===R)return q(D,C,B,So(C,J),we);Co(C,J)}return null}function fe(D,C,B,J){for(var we=null,Xe=null,me=C,De=C=0,He=null;me!==null&&De<B.length;De++){me.index>De?(He=me,me=null):He=me.sibling;var Qe=V(D,me,B[De],J);if(Qe===null){me===null&&(me=He);break}e&&me&&Qe.alternate===null&&s(D,me),C=f(Qe,C,De),Xe===null?we=Qe:Xe.sibling=Qe,Xe=Qe,me=He}if(De===B.length)return r(D,me),Ie&&En(D,De),we;if(me===null){for(;De<B.length;De++)me=ee(D,B[De],J),me!==null&&(C=f(me,C,De),Xe===null?we=me:Xe.sibling=me,Xe=me);return Ie&&En(D,De),we}for(me=o(me);De<B.length;De++)He=q(me,D,De,B[De],J),He!==null&&(e&&He.alternate!==null&&me.delete(He.key===null?De:He.key),C=f(He,C,De),Xe===null?we=He:Xe.sibling=He,Xe=He);return e&&me.forEach(function(Na){return s(D,Na)}),Ie&&En(D,De),we}function _e(D,C,B,J){if(B==null)throw Error(i(151));for(var we=null,Xe=null,me=C,De=C=0,He=null,Qe=B.next();me!==null&&!Qe.done;De++,Qe=B.next()){me.index>De?(He=me,me=null):He=me.sibling;var Na=V(D,me,Qe.value,J);if(Na===null){me===null&&(me=He);break}e&&me&&Na.alternate===null&&s(D,me),C=f(Na,C,De),Xe===null?we=Na:Xe.sibling=Na,Xe=Na,me=He}if(Qe.done)return r(D,me),Ie&&En(D,De),we;if(me===null){for(;!Qe.done;De++,Qe=B.next())Qe=ee(D,Qe.value,J),Qe!==null&&(C=f(Qe,C,De),Xe===null?we=Qe:Xe.sibling=Qe,Xe=Qe);return Ie&&En(D,De),we}for(me=o(me);!Qe.done;De++,Qe=B.next())Qe=q(me,D,De,Qe.value,J),Qe!==null&&(e&&Qe.alternate!==null&&me.delete(Qe.key===null?De:Qe.key),C=f(Qe,C,De),Xe===null?we=Qe:Xe.sibling=Qe,Xe=Qe);return e&&me.forEach(function(gj){return s(D,gj)}),Ie&&En(D,De),we}function st(D,C,B,J){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case j:e:{for(var we=B.key;C!==null;){if(C.key===we){if(we=B.type,we===S){if(C.tag===7){r(D,C.sibling),J=h(C,B.props.children),J.return=D,D=J;break e}}else if(C.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&Qa(we)===C.type){r(D,C.sibling),J=h(C,B.props),il(J,B),J.return=D,D=J;break e}r(D,C);break}else s(D,C);C=C.sibling}B.type===S?(J=Ia(B.props.children,D.mode,J,B.key),J.return=D,D=J):(J=jo(B.type,B.key,B.props,null,D.mode,J),il(J,B),J.return=D,D=J)}return b(D);case N:e:{for(we=B.key;C!==null;){if(C.key===we)if(C.tag===4&&C.stateNode.containerInfo===B.containerInfo&&C.stateNode.implementation===B.implementation){r(D,C.sibling),J=h(C,B.children||[]),J.return=D,D=J;break e}else{r(D,C);break}else s(D,C);C=C.sibling}J=vu(B,D.mode,J),J.return=D,D=J}return b(D);case M:return B=Qa(B),st(D,C,B,J)}if(oe(B))return fe(D,C,B,J);if(Te(B)){if(we=Te(B),typeof we!="function")throw Error(i(150));return B=we.call(B),_e(D,C,B,J)}if(typeof B.then=="function")return st(D,C,Ao(B),J);if(B.$$typeof===R)return st(D,C,So(D,B),J);Co(D,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,C!==null&&C.tag===6?(r(D,C.sibling),J=h(C,B),J.return=D,D=J):(r(D,C),J=yu(B,D.mode,J),J.return=D,D=J),b(D)):r(D,C)}return function(D,C,B,J){try{rl=0;var we=st(D,C,B,J);return qr=null,we}catch(me){if(me===Pr||me===Eo)throw me;var Xe=Ts(29,me,null,D.mode);return Xe.lanes=J,Xe.return=D,Xe}finally{}}}var Za=Zm(!0),Jm=Zm(!1),la=!1;function Ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ca(e,s,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Fe&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=wo(e),Um(e,null,r),s}return vo(e,o,s,r),wo(e)}function ll(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var o=s.lanes;o&=e.pendingLanes,r|=o,s.lanes=r,Di(e,r)}}function Du(e,s){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,r=r.next}while(r!==null);f===null?h=f=s:f=f.next=s}else h=f=s;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}var Uu=!1;function ol(){if(Uu){var e=Vr;if(e!==null)throw e}}function cl(e,s,r,o){Uu=!1;var h=e.updateQueue;la=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var E=w,L=E.next;E.next=null,b===null?f=L:b.next=L,b=E;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,w=Y.lastBaseUpdate,w!==b&&(w===null?Y.firstBaseUpdate=L:w.next=L,Y.lastBaseUpdate=E))}if(f!==null){var ee=h.baseState;b=0,Y=L=E=null,w=f;do{var V=w.lane&-536870913,q=V!==w.lane;if(q?(qe&V)===V:(o&V)===V){V!==0&&V===Lr&&(Uu=!0),Y!==null&&(Y=Y.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=e,_e=w;V=s;var st=r;switch(_e.tag){case 1:if(fe=_e.payload,typeof fe=="function"){ee=fe.call(st,ee,V);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=_e.payload,V=typeof fe=="function"?fe.call(st,ee,V):fe,V==null)break e;ee=y({},ee,V);break e;case 2:la=!0}}V=w.callback,V!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[V]:q.push(V))}else q={lane:V,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Y===null?(L=Y=q,E=ee):Y=Y.next=q,b|=V;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;q=w,w=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Y===null&&(E=ee),h.baseState=E,h.firstBaseUpdate=L,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),ma|=b,e.lanes=b,e.memoizedState=ee}}function Wm(e,s){if(typeof e!="function")throw Error(i(191,e));e.call(s)}function ep(e,s){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Wm(r[e],s)}var Hr=T(null),Oo=T(0);function tp(e,s){e=Ln,ne(Oo,e),ne(Hr,s),Ln=e|s.baseLanes}function zu(){ne(Oo,Ln),ne(Hr,Hr.current)}function Bu(){Ln=Oo.current,K(Hr),K(Oo)}var Es=T(null),Hs=null;function ua(e){var s=e.alternate;ne(jt,jt.current&1),ne(Es,e),Hs===null&&(s===null||Hr.current!==null||s.memoizedState!==null)&&(Hs=e)}function Lu(e){ne(jt,jt.current),ne(Es,e),Hs===null&&(Hs=e)}function sp(e){e.tag===22?(ne(jt,jt.current),ne(Es,e),Hs===null&&(Hs=e)):da()}function da(){ne(jt,jt.current),ne(Es,Es.current)}function ks(e){K(Es),Hs===e&&(Hs=null),K(jt)}var jt=T(0);function Ro(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Id(r)||Gd(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Cn=0,Re=null,et=null,kt=null,Mo=!1,$r=!1,Ja=!1,Do=0,ul=0,Ir=null,i1=0;function bt(){throw Error(i(321))}function Vu(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!Ss(e[r],s[r]))return!1;return!0}function Pu(e,s,r,o,h,f){return Cn=f,Re=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=e===null||e.memoizedState===null?Vp:td,Ja=!1,f=r(o,h),Ja=!1,$r&&(f=ap(s,r,o,h)),np(e),f}function np(e){P.H=fl;var s=et!==null&&et.next!==null;if(Cn=0,kt=et=Re=null,Mo=!1,ul=0,Ir=null,s)throw Error(i(300));e===null||At||(e=e.dependencies,e!==null&&No(e)&&(At=!0))}function ap(e,s,r,o){Re=e;var h=0;do{if($r&&(Ir=null),ul=0,$r=!1,25<=h)throw Error(i(301));if(h+=1,kt=et=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=Pp,f=s(r,o)}while($r);return f}function l1(){var e=P.H,s=e.useState()[0];return s=typeof s.then=="function"?dl(s):s,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(Re.flags|=1024),s}function qu(){var e=Do!==0;return Do=0,e}function Hu(e,s,r){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~r}function $u(e){if(Mo){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Mo=!1}Cn=0,kt=et=Re=null,$r=!1,ul=Do=0,Ir=null}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Re.memoizedState=kt=e:kt=kt.next=e,kt}function _t(){if(et===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var s=kt===null?Re.memoizedState:kt.next;if(s!==null)kt=s,et=e;else{if(e===null)throw Re.alternate===null?Error(i(467)):Error(i(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},kt===null?Re.memoizedState=kt=e:kt=kt.next=e}return kt}function Uo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(e){var s=ul;return ul+=1,Ir===null&&(Ir=[]),e=Xm(Ir,e,s),s=Re,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Vp:td),e}function zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return dl(e);if(e.$$typeof===R)return Kt(e)}throw Error(i(438,String(e)))}function Iu(e){var s=null,r=Re.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Uo(),Re.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(e),o=0;o<e;o++)r[o]=je;return s.index++,r}function On(e,s){return typeof s=="function"?s(e):s}function Bo(e){var s=_t();return Gu(s,et,e)}function Gu(e,s,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}s.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{s=h.next;var w=b=null,E=null,L=s,Y=!1;do{var ee=L.lane&-536870913;if(ee!==L.lane?(qe&ee)===ee:(Cn&ee)===ee){var V=L.revertLane;if(V===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),ee===Lr&&(Y=!0);else if((Cn&V)===V){L=L.next,V===Lr&&(Y=!0);continue}else ee={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(w=E=ee,b=f):E=E.next=ee,Re.lanes|=V,ma|=V;ee=L.action,Ja&&r(f,ee),f=L.hasEagerState?L.eagerState:r(f,ee)}else V={lane:ee,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(w=E=V,b=f):E=E.next=V,Re.lanes|=ee,ma|=ee;L=L.next}while(L!==null&&L!==s);if(E===null?b=f:E.next=w,!Ss(f,e.memoizedState)&&(At=!0,Y&&(r=Vr,r!==null)))throw r;e.memoizedState=f,e.baseState=b,e.baseQueue=E,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ku(e){var s=_t(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,h=r.pending,f=s.memoizedState;if(h!==null){r.pending=null;var b=h=h.next;do f=e(f,b.action),b=b.next;while(b!==h);Ss(f,s.memoizedState)||(At=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),r.lastRenderedState=f}return[f,o]}function rp(e,s,r){var o=Re,h=_t(),f=Ie;if(f){if(r===void 0)throw Error(i(407));r=r()}else r=s();var b=!Ss((et||h).memoizedState,r);if(b&&(h.memoizedState=r,At=!0),h=h.queue,Qu(op.bind(null,o,h,e),[e]),h.getSnapshot!==s||b||kt!==null&&kt.memoizedState.tag&1){if(o.flags|=2048,Gr(9,{destroy:void 0},lp.bind(null,o,h,r,s),null),nt===null)throw Error(i(349));f||(Cn&127)!==0||ip(o,s,r)}return r}function ip(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Re.updateQueue,s===null?(s=Uo(),Re.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function lp(e,s,r,o){s.value=r,s.getSnapshot=o,cp(s)&&up(e)}function op(e,s,r){return r(function(){cp(s)&&up(e)})}function cp(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Ss(e,r)}catch{return!0}}function up(e){var s=$a(e,2);s!==null&&bs(s,e,2)}function Yu(e){var s=os();if(typeof e=="function"){var r=e;if(e=r(),Ja){ss(!0);try{r()}finally{ss(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},s}function dp(e,s,r,o){return e.baseState=r,Gu(e,et,typeof o=="function"?o:On)}function o1(e,s,r,o,h){if(Po(e))throw Error(i(485));if(e=s.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};P.T!==null?r(!0):f.isTransition=!1,o(f),r=s.pending,r===null?(f.next=s.pending=f,hp(s,f)):(f.next=r.next,s.pending=r.next=f)}}function hp(e,s){var r=s.action,o=s.payload,h=e.state;if(s.isTransition){var f=P.T,b={};P.T=b;try{var w=r(h,o),E=P.S;E!==null&&E(b,w),fp(e,s,w)}catch(L){Xu(e,s,L)}finally{f!==null&&b.types!==null&&(f.types=b.types),P.T=f}}else try{f=r(h,o),fp(e,s,f)}catch(L){Xu(e,s,L)}}function fp(e,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){mp(e,s,o)},function(o){return Xu(e,s,o)}):mp(e,s,r)}function mp(e,s,r){s.status="fulfilled",s.value=r,pp(s),e.state=r,s=e.pending,s!==null&&(r=s.next,r===s?e.pending=null:(r=r.next,s.next=r,hp(e,r)))}function Xu(e,s,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=r,pp(s),s=s.next;while(s!==o)}e.action=null}function pp(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function gp(e,s){return s}function xp(e,s){if(Ie){var r=nt.formState;if(r!==null){e:{var o=Re;if(Ie){if(ot){t:{for(var h=ot,f=qs;h.nodeType!==8;){if(!f){h=null;break t}if(h=$s(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ot=$s(h.nextSibling),o=h.data==="F!";break e}}ra(o)}o=!1}o&&(s=r[0])}}return r=os(),r.memoizedState=r.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:s},r.queue=o,r=zp.bind(null,Re,o),o.dispatch=r,o=Yu(!1),f=ed.bind(null,Re,!1,o.queue),o=os(),h={state:s,dispatch:null,action:e,pending:null},o.queue=h,r=o1.bind(null,Re,h,f,r),h.dispatch=r,o.memoizedState=e,[s,r,!1]}function bp(e){var s=_t();return yp(s,et,e)}function yp(e,s,r){if(s=Gu(e,s,gp)[0],e=Bo(On)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=dl(s)}catch(b){throw b===Pr?Eo:b}else o=s;s=_t();var h=s.queue,f=h.dispatch;return r!==s.memoizedState&&(Re.flags|=2048,Gr(9,{destroy:void 0},c1.bind(null,h,r),null)),[o,f,e]}function c1(e,s){e.action=s}function vp(e){var s=_t(),r=et;if(r!==null)return yp(s,r,e);_t(),s=s.memoizedState,r=_t();var o=r.queue.dispatch;return r.memoizedState=e,[s,o,!1]}function Gr(e,s,r,o){return e={tag:e,create:r,deps:o,inst:s,next:null},s=Re.updateQueue,s===null&&(s=Uo(),Re.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,s.lastEffect=e),e}function wp(){return _t().memoizedState}function Lo(e,s,r,o){var h=os();Re.flags|=e,h.memoizedState=Gr(1|s,{destroy:void 0},r,o===void 0?null:o)}function Vo(e,s,r,o){var h=_t();o=o===void 0?null:o;var f=h.memoizedState.inst;et!==null&&o!==null&&Vu(o,et.memoizedState.deps)?h.memoizedState=Gr(s,f,r,o):(Re.flags|=e,h.memoizedState=Gr(1|s,f,r,o))}function jp(e,s){Lo(8390656,8,e,s)}function Qu(e,s){Vo(2048,8,e,s)}function u1(e){Re.flags|=4;var s=Re.updateQueue;if(s===null)s=Uo(),Re.updateQueue=s,s.events=[e];else{var r=s.events;r===null?s.events=[e]:r.push(e)}}function _p(e){var s=_t().memoizedState;return u1({ref:s,nextImpl:e}),function(){if((Fe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Np(e,s){return Vo(4,2,e,s)}function Sp(e,s){return Vo(4,4,e,s)}function Tp(e,s){if(typeof s=="function"){e=e();var r=s(e);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Ep(e,s,r){r=r!=null?r.concat([e]):null,Vo(4,4,Tp.bind(null,s,e),r)}function Fu(){}function kp(e,s){var r=_t();s=s===void 0?null:s;var o=r.memoizedState;return s!==null&&Vu(s,o[1])?o[0]:(r.memoizedState=[e,s],e)}function Ap(e,s){var r=_t();s=s===void 0?null:s;var o=r.memoizedState;if(s!==null&&Vu(s,o[1]))return o[0];if(o=e(),Ja){ss(!0);try{e()}finally{ss(!1)}}return r.memoizedState=[o,s],o}function Zu(e,s,r){return r===void 0||(Cn&1073741824)!==0&&(qe&261930)===0?e.memoizedState=s:(e.memoizedState=r,e=Cg(),Re.lanes|=e,ma|=e,r)}function Cp(e,s,r,o){return Ss(r,s)?r:Hr.current!==null?(e=Zu(e,r,o),Ss(e,s)||(At=!0),e):(Cn&42)===0||(Cn&1073741824)!==0&&(qe&261930)===0?(At=!0,e.memoizedState=r):(e=Cg(),Re.lanes|=e,ma|=e,s)}function Op(e,s,r,o,h){var f=X.p;X.p=f!==0&&8>f?f:8;var b=P.T,w={};P.T=w,ed(e,!1,s,r);try{var E=h(),L=P.S;if(L!==null&&L(w,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var Y=r1(E,o);hl(e,s,Y,Os(e))}else hl(e,s,o,Os(e))}catch(ee){hl(e,s,{then:function(){},status:"rejected",reason:ee},Os())}finally{X.p=f,b!==null&&w.types!==null&&(b.types=w.types),P.T=b}}function d1(){}function Ju(e,s,r,o){if(e.tag!==5)throw Error(i(476));var h=Rp(e).queue;Op(e,h,s,ie,r===null?d1:function(){return Mp(e),r(o)})}function Rp(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:ie},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:r},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Mp(e){var s=Rp(e);s.next===null&&(s=e.alternate.memoizedState),hl(e,s.next.queue,{},Os())}function Wu(){return Kt(Al)}function Dp(){return _t().memoizedState}function Up(){return _t().memoizedState}function h1(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var r=Os();e=oa(r);var o=ca(s,e,r);o!==null&&(bs(o,s,r),ll(o,s,r)),s={cache:ku()},e.payload=s;return}s=s.return}}function f1(e,s,r){var o=Os();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Po(e)?Bp(s,r):(r=xu(e,s,r,o),r!==null&&(bs(r,e,o),Lp(r,s,o)))}function zp(e,s,r){var o=Os();hl(e,s,r,o)}function hl(e,s,r,o){var h={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Po(e))Bp(s,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var b=s.lastRenderedState,w=f(b,r);if(h.hasEagerState=!0,h.eagerState=w,Ss(w,b))return vo(e,s,h,0),nt===null&&yo(),!1}catch{}finally{}if(r=xu(e,s,h,o),r!==null)return bs(r,e,o),Lp(r,s,o),!0}return!1}function ed(e,s,r,o){if(o={lane:2,revertLane:Rd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Po(e)){if(s)throw Error(i(479))}else s=xu(e,r,o,2),s!==null&&bs(s,e,2)}function Po(e){var s=e.alternate;return e===Re||s!==null&&s===Re}function Bp(e,s){$r=Mo=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Lp(e,s,r){if((r&4194048)!==0){var o=s.lanes;o&=e.pendingLanes,r|=o,s.lanes=r,Di(e,r)}}var fl={readContext:Kt,use:zo,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};fl.useEffectEvent=bt;var Vp={readContext:Kt,use:zo,useCallback:function(e,s){return os().memoizedState=[e,s===void 0?null:s],e},useContext:Kt,useEffect:jp,useImperativeHandle:function(e,s,r){r=r!=null?r.concat([e]):null,Lo(4194308,4,Tp.bind(null,s,e),r)},useLayoutEffect:function(e,s){return Lo(4194308,4,e,s)},useInsertionEffect:function(e,s){Lo(4,2,e,s)},useMemo:function(e,s){var r=os();s=s===void 0?null:s;var o=e();if(Ja){ss(!0);try{e()}finally{ss(!1)}}return r.memoizedState=[o,s],o},useReducer:function(e,s,r){var o=os();if(r!==void 0){var h=r(s);if(Ja){ss(!0);try{r(s)}finally{ss(!1)}}}else h=s;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=f1.bind(null,Re,e),[o.memoizedState,e]},useRef:function(e){var s=os();return e={current:e},s.memoizedState=e},useState:function(e){e=Yu(e);var s=e.queue,r=zp.bind(null,Re,s);return s.dispatch=r,[e.memoizedState,r]},useDebugValue:Fu,useDeferredValue:function(e,s){var r=os();return Zu(r,e,s)},useTransition:function(){var e=Yu(!1);return e=Op.bind(null,Re,e.queue,!0,!1),os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,r){var o=Re,h=os();if(Ie){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),nt===null)throw Error(i(349));(qe&127)!==0||ip(o,s,r)}h.memoizedState=r;var f={value:r,getSnapshot:s};return h.queue=f,jp(op.bind(null,o,f,e),[e]),o.flags|=2048,Gr(9,{destroy:void 0},lp.bind(null,o,f,r,s),null),r},useId:function(){var e=os(),s=nt.identifierPrefix;if(Ie){var r=pn,o=mn;r=(o&~(1<<32-ns(o)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Do++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=i1++,s="_"+s+"r_"+r.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:Wu,useFormState:xp,useActionState:xp,useOptimistic:function(e){var s=os();s.memoizedState=s.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=ed.bind(null,Re,!0,r),r.dispatch=s,[e,s]},useMemoCache:Iu,useCacheRefresh:function(){return os().memoizedState=h1.bind(null,Re)},useEffectEvent:function(e){var s=os(),r={impl:e};return s.memoizedState=r,function(){if((Fe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},td={readContext:Kt,use:zo,useCallback:kp,useContext:Kt,useEffect:Qu,useImperativeHandle:Ep,useInsertionEffect:Np,useLayoutEffect:Sp,useMemo:Ap,useReducer:Bo,useRef:wp,useState:function(){return Bo(On)},useDebugValue:Fu,useDeferredValue:function(e,s){var r=_t();return Cp(r,et.memoizedState,e,s)},useTransition:function(){var e=Bo(On)[0],s=_t().memoizedState;return[typeof e=="boolean"?e:dl(e),s]},useSyncExternalStore:rp,useId:Dp,useHostTransitionStatus:Wu,useFormState:bp,useActionState:bp,useOptimistic:function(e,s){var r=_t();return dp(r,et,e,s)},useMemoCache:Iu,useCacheRefresh:Up};td.useEffectEvent=_p;var Pp={readContext:Kt,use:zo,useCallback:kp,useContext:Kt,useEffect:Qu,useImperativeHandle:Ep,useInsertionEffect:Np,useLayoutEffect:Sp,useMemo:Ap,useReducer:Ku,useRef:wp,useState:function(){return Ku(On)},useDebugValue:Fu,useDeferredValue:function(e,s){var r=_t();return et===null?Zu(r,e,s):Cp(r,et.memoizedState,e,s)},useTransition:function(){var e=Ku(On)[0],s=_t().memoizedState;return[typeof e=="boolean"?e:dl(e),s]},useSyncExternalStore:rp,useId:Dp,useHostTransitionStatus:Wu,useFormState:vp,useActionState:vp,useOptimistic:function(e,s){var r=_t();return et!==null?dp(r,et,e,s):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Iu,useCacheRefresh:Up};Pp.useEffectEvent=_p;function sd(e,s,r,o){s=e.memoizedState,r=r(o,s),r=r==null?s:y({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nd={enqueueSetState:function(e,s,r){e=e._reactInternals;var o=Os(),h=oa(o);h.payload=s,r!=null&&(h.callback=r),s=ca(e,h,o),s!==null&&(bs(s,e,o),ll(s,e,o))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var o=Os(),h=oa(o);h.tag=1,h.payload=s,r!=null&&(h.callback=r),s=ca(e,h,o),s!==null&&(bs(s,e,o),ll(s,e,o))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Os(),o=oa(r);o.tag=2,s!=null&&(o.callback=s),s=ca(e,o,r),s!==null&&(bs(s,e,r),ll(s,e,r))}};function qp(e,s,r,o,h,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,b):s.prototype&&s.prototype.isPureReactComponent?!Wi(r,o)||!Wi(h,f):!0}function Hp(e,s,r,o){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,o),s.state!==e&&nd.enqueueReplaceState(s,s.state,null)}function Wa(e,s){var r=s;if("ref"in s){r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}if(e=e.defaultProps){r===s&&(r=y({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}function $p(e){bo(e)}function Ip(e){console.error(e)}function Gp(e){bo(e)}function qo(e,s){try{var r=e.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function Kp(e,s,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ad(e,s,r){return r=oa(r),r.tag=3,r.payload={element:null},r.callback=function(){qo(e,s)},r}function Yp(e){return e=oa(e),e.tag=3,e}function Xp(e,s,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Kp(s,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Kp(s,r,o),typeof h!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function m1(e,s,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=r.alternate,s!==null&&Br(s,r,h,!0),r=Es.current,r!==null){switch(r.tag){case 31:case 13:return Hs===null?Wo():r.alternate===null&&yt===0&&(yt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===ko?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([o]):s.add(o),Ad(e,o,h)),!1;case 22:return r.flags|=65536,o===ko?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([o]):r.add(o)),Ad(e,o,h)),!1}throw Error(i(435,r.tag))}return Ad(e,o,h),Wo(),!1}if(Ie)return s=Es.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==_u&&(e=Error(i(422),{cause:o}),sl(Ls(e,r)))):(o!==_u&&(s=Error(i(423),{cause:o}),sl(Ls(s,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Ls(o,r),h=ad(e.stateNode,o,h),Du(e,h),yt!==4&&(yt=2)),!1;var f=Error(i(520),{cause:o});if(f=Ls(f,r),wl===null?wl=[f]:wl.push(f),yt!==4&&(yt=2),s===null)return!0;o=Ls(o,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=ad(r.stateNode,o,e),Du(r,e),!1;case 1:if(s=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pa===null||!pa.has(f))))return r.flags|=65536,h&=-h,r.lanes|=h,h=Yp(h),Xp(h,e,r,o),Du(r,h),!1}r=r.return}while(r!==null);return!1}var rd=Error(i(461)),At=!1;function Yt(e,s,r,o){s.child=e===null?Jm(s,null,r,o):Za(s,e.child,r,o)}function Qp(e,s,r,o,h){r=r.render;var f=s.ref;if("ref"in o){var b={};for(var w in o)w!=="ref"&&(b[w]=o[w])}else b=o;return Ya(s),o=Pu(e,s,r,b,f,h),w=qu(),e!==null&&!At?(Hu(e,s,h),Rn(e,s,h)):(Ie&&w&&wu(s),s.flags|=1,Yt(e,s,o,h),s.child)}function Fp(e,s,r,o,h){if(e===null){var f=r.type;return typeof f=="function"&&!bu(f)&&f.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=f,Zp(e,s,f,o,h)):(e=jo(r.type,null,o,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(f=e.child,!fd(e,h)){var b=f.memoizedProps;if(r=r.compare,r=r!==null?r:Wi,r(b,o)&&e.ref===s.ref)return Rn(e,s,h)}return s.flags|=1,e=Tn(f,o),e.ref=s.ref,e.return=s,s.child=e}function Zp(e,s,r,o,h){if(e!==null){var f=e.memoizedProps;if(Wi(f,o)&&e.ref===s.ref)if(At=!1,s.pendingProps=o=f,fd(e,h))(e.flags&131072)!==0&&(At=!0);else return s.lanes=e.lanes,Rn(e,s,h)}return id(e,s,r,o,h)}function Jp(e,s,r,o){var h=o.children,f=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(f=f!==null?f.baseLanes|r:r,e!==null){for(o=s.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,s.child=null;return Wp(e,s,f,r,o)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&To(s,f!==null?f.cachePool:null),f!==null?tp(s,f):zu(),sp(s);else return o=s.lanes=536870912,Wp(e,s,f!==null?f.baseLanes|r:r,r,o)}else f!==null?(To(s,f.cachePool),tp(s,f),da(),s.memoizedState=null):(e!==null&&To(s,null),zu(),da());return Yt(e,s,h,r),s.child}function ml(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wp(e,s,r,o,h){var f=Cu();return f=f===null?null:{parent:Et._currentValue,pool:f},s.memoizedState={baseLanes:r,cachePool:f},e!==null&&To(s,null),zu(),sp(s),e!==null&&Br(e,s,o,!0),s.childLanes=h,null}function Ho(e,s){return s=Io({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function eg(e,s,r){return Za(s,e.child,null,r),e=Ho(s,s.pendingProps),e.flags|=2,ks(s),s.memoizedState=null,e}function p1(e,s,r){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(Ie){if(o.mode==="hidden")return e=Ho(s,o),s.lanes=536870912,ml(null,e);if(Lu(s),(e=ot)?(e=hx(e,qs),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:na!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=Bm(e),r.return=s,s.child=r,Gt=s,ot=null)):e=null,e===null)throw ra(s);return s.lanes=536870912,null}return Ho(s,o)}var f=e.memoizedState;if(f!==null){var b=f.dehydrated;if(Lu(s),h)if(s.flags&256)s.flags&=-257,s=eg(e,s,r);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(i(558));else if(At||Br(e,s,r,!1),h=(r&e.childLanes)!==0,At||h){if(o=nt,o!==null&&(b=Xn(o,r),b!==0&&b!==f.retryLane))throw f.retryLane=b,$a(e,b),bs(o,e,b),rd;Wo(),s=eg(e,s,r)}else e=f.treeContext,ot=$s(b.nextSibling),Gt=s,Ie=!0,aa=null,qs=!1,e!==null&&Pm(s,e),s=Ho(s,o),s.flags|=4096;return s}return e=Tn(e.child,{mode:o.mode,children:o.children}),e.ref=s.ref,s.child=e,e.return=s,e}function $o(e,s){var r=s.ref;if(r===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(s.flags|=4194816)}}function id(e,s,r,o,h){return Ya(s),r=Pu(e,s,r,o,void 0,h),o=qu(),e!==null&&!At?(Hu(e,s,h),Rn(e,s,h)):(Ie&&o&&wu(s),s.flags|=1,Yt(e,s,r,h),s.child)}function tg(e,s,r,o,h,f){return Ya(s),s.updateQueue=null,r=ap(s,o,r,h),np(e),o=qu(),e!==null&&!At?(Hu(e,s,f),Rn(e,s,f)):(Ie&&o&&wu(s),s.flags|=1,Yt(e,s,r,f),s.child)}function sg(e,s,r,o,h){if(Ya(s),s.stateNode===null){var f=Mr,b=r.contextType;typeof b=="object"&&b!==null&&(f=Kt(b)),f=new r(o,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=nd,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=o,f.state=s.memoizedState,f.refs={},Ru(s),b=r.contextType,f.context=typeof b=="object"&&b!==null?Kt(b):Mr,f.state=s.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(sd(s,r,b,o),f.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&nd.enqueueReplaceState(f,f.state,null),cl(s,o,f,h),ol(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(e===null){f=s.stateNode;var w=s.memoizedProps,E=Wa(r,w);f.props=E;var L=f.context,Y=r.contextType;b=Mr,typeof Y=="object"&&Y!==null&&(b=Kt(Y));var ee=r.getDerivedStateFromProps;Y=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||L!==b)&&Hp(s,f,o,b),la=!1;var V=s.memoizedState;f.state=V,cl(s,o,f,h),ol(),L=s.memoizedState,w||V!==L||la?(typeof ee=="function"&&(sd(s,r,ee,o),L=s.memoizedState),(E=la||qp(s,r,E,o,V,L,b))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=L),f.props=o,f.state=L,f.context=b,o=E):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{f=s.stateNode,Mu(e,s),b=s.memoizedProps,Y=Wa(r,b),f.props=Y,ee=s.pendingProps,V=f.context,L=r.contextType,E=Mr,typeof L=="object"&&L!==null&&(E=Kt(L)),w=r.getDerivedStateFromProps,(L=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ee||V!==E)&&Hp(s,f,o,E),la=!1,V=s.memoizedState,f.state=V,cl(s,o,f,h),ol();var q=s.memoizedState;b!==ee||V!==q||la||e!==null&&e.dependencies!==null&&No(e.dependencies)?(typeof w=="function"&&(sd(s,r,w,o),q=s.memoizedState),(Y=la||qp(s,r,Y,o,V,q,E)||e!==null&&e.dependencies!==null&&No(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,E),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,E)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&V===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&V===e.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=q),f.props=o,f.state=q,f.context=E,o=Y):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&V===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&V===e.memoizedState||(s.flags|=1024),o=!1)}return f=o,$o(e,s),o=(s.flags&128)!==0,f||o?(f=s.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,e!==null&&o?(s.child=Za(s,e.child,null,h),s.child=Za(s,null,r,h)):Yt(e,s,r,h),s.memoizedState=f.state,e=s.child):e=Rn(e,s,h),e}function ng(e,s,r,o){return Ga(),s.flags|=256,Yt(e,s,r,o),s.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function od(e){return{baseLanes:e,cachePool:Km()}}function cd(e,s,r){return e=e!==null?e.childLanes&~r:0,s&&(e|=Cs),e}function ag(e,s,r){var o=s.pendingProps,h=!1,f=(s.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(jt.current&2)!==0),b&&(h=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,e===null){if(Ie){if(h?ua(s):da(),(e=ot)?(e=hx(e,qs),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:na!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=Bm(e),r.return=s,s.child=r,Gt=s,ot=null)):e=null,e===null)throw ra(s);return Gd(e)?s.lanes=32:s.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(da(),h=s.mode,w=Io({mode:"hidden",children:w},h),o=Ia(o,h,r,null),w.return=s,o.return=s,w.sibling=o,s.child=w,o=s.child,o.memoizedState=od(r),o.childLanes=cd(e,b,r),s.memoizedState=ld,ml(null,o)):(ua(s),ud(s,w))}var E=e.memoizedState;if(E!==null&&(w=E.dehydrated,w!==null)){if(f)s.flags&256?(ua(s),s.flags&=-257,s=dd(e,s,r)):s.memoizedState!==null?(da(),s.child=e.child,s.flags|=128,s=null):(da(),w=o.fallback,h=s.mode,o=Io({mode:"visible",children:o.children},h),w=Ia(w,h,r,null),w.flags|=2,o.return=s,w.return=s,o.sibling=w,s.child=o,Za(s,e.child,null,r),o=s.child,o.memoizedState=od(r),o.childLanes=cd(e,b,r),s.memoizedState=ld,s=ml(null,o));else if(ua(s),Gd(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var L=b.dgst;b=L,o=Error(i(419)),o.stack="",o.digest=b,sl({value:o,source:null,stack:null}),s=dd(e,s,r)}else if(At||Br(e,s,r,!1),b=(r&e.childLanes)!==0,At||b){if(b=nt,b!==null&&(o=Xn(b,r),o!==0&&o!==E.retryLane))throw E.retryLane=o,$a(e,o),bs(b,e,o),rd;Id(w)||Wo(),s=dd(e,s,r)}else Id(w)?(s.flags|=192,s.child=e.child,s=null):(e=E.treeContext,ot=$s(w.nextSibling),Gt=s,Ie=!0,aa=null,qs=!1,e!==null&&Pm(s,e),s=ud(s,o.children),s.flags|=4096);return s}return h?(da(),w=o.fallback,h=s.mode,E=e.child,L=E.sibling,o=Tn(E,{mode:"hidden",children:o.children}),o.subtreeFlags=E.subtreeFlags&65011712,L!==null?w=Tn(L,w):(w=Ia(w,h,r,null),w.flags|=2),w.return=s,o.return=s,o.sibling=w,s.child=o,ml(null,o),o=s.child,w=e.child.memoizedState,w===null?w=od(r):(h=w.cachePool,h!==null?(E=Et._currentValue,h=h.parent!==E?{parent:E,pool:E}:h):h=Km(),w={baseLanes:w.baseLanes|r,cachePool:h}),o.memoizedState=w,o.childLanes=cd(e,b,r),s.memoizedState=ld,ml(e.child,o)):(ua(s),r=e.child,e=r.sibling,r=Tn(r,{mode:"visible",children:o.children}),r.return=s,r.sibling=null,e!==null&&(b=s.deletions,b===null?(s.deletions=[e],s.flags|=16):b.push(e)),s.child=r,s.memoizedState=null,r)}function ud(e,s){return s=Io({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Io(e,s){return e=Ts(22,e,null,s),e.lanes=0,e}function dd(e,s,r){return Za(s,e.child,null,r),e=ud(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rg(e,s,r){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s),Tu(e.return,s,r)}function hd(e,s,r,o,h,f){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h,treeForkCount:f}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=h,b.treeForkCount=f)}function ig(e,s,r){var o=s.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var b=jt.current,w=(b&2)!==0;if(w?(b=b&1|2,s.flags|=128):b&=1,ne(jt,b),Yt(e,s,o,r),o=Ie?tl:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rg(e,r,s);else if(e.tag===19)rg(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(r=s.child,h=null;r!==null;)e=r.alternate,e!==null&&Ro(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=s.child,s.child=null):(h=r.sibling,r.sibling=null),hd(s,!1,h,r,f,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&Ro(e)===null){s.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}hd(s,!0,r,null,f,o);break;case"together":hd(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function Rn(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),ma|=s.lanes,(r&s.childLanes)===0)if(e!==null){if(Br(e,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,r=Tn(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Tn(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function fd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&No(e)))}function g1(e,s,r){switch(s.tag){case 3:se(s,s.stateNode.containerInfo),ia(s,Et,e.memoizedState.cache),Ga();break;case 27:case 5:W(s);break;case 4:se(s,s.stateNode.containerInfo);break;case 10:ia(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Lu(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ua(s),s.flags|=128,null):(r&s.child.childLanes)!==0?ag(e,s,r):(ua(s),e=Rn(e,s,r),e!==null?e.sibling:null);ua(s);break;case 19:var h=(e.flags&128)!==0;if(o=(r&s.childLanes)!==0,o||(Br(e,s,r,!1),o=(r&s.childLanes)!==0),h){if(o)return ig(e,s,r);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(jt,jt.current),o)break;return null;case 22:return s.lanes=0,Jp(e,s,r,s.pendingProps);case 24:ia(s,Et,e.memoizedState.cache)}return Rn(e,s,r)}function lg(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps)At=!0;else{if(!fd(e,r)&&(s.flags&128)===0)return At=!1,g1(e,s,r);At=(e.flags&131072)!==0}else At=!1,Ie&&(s.flags&1048576)!==0&&Vm(s,tl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(e=Qa(s.elementType),s.type=e,typeof e=="function")bu(e)?(o=Wa(e,o),s.tag=1,s=sg(null,s,e,o,r)):(s.tag=0,s=id(null,s,e,o,r));else{if(e!=null){var h=e.$$typeof;if(h===Q){s.tag=11,s=Qp(null,s,e,o,r);break e}else if(h===H){s.tag=14,s=Fp(null,s,e,o,r);break e}}throw s=Ge(e)||e,Error(i(306,s,""))}}return s;case 0:return id(e,s,s.type,s.pendingProps,r);case 1:return o=s.type,h=Wa(o,s.pendingProps),sg(e,s,o,h,r);case 3:e:{if(se(s,s.stateNode.containerInfo),e===null)throw Error(i(387));o=s.pendingProps;var f=s.memoizedState;h=f.element,Mu(e,s),cl(s,o,null,r);var b=s.memoizedState;if(o=b.cache,ia(s,Et,o),o!==f.cache&&Eu(s,[Et],r,!0),ol(),o=b.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=ng(e,s,o,r);break e}else if(o!==h){h=Ls(Error(i(424)),s),sl(h),s=ng(e,s,o,r);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ot=$s(e.firstChild),Gt=s,Ie=!0,aa=null,qs=!0,r=Jm(s,null,o,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ga(),o===h){s=Rn(e,s,r);break e}Yt(e,s,o,r)}s=s.child}return s;case 26:return $o(e,s),e===null?(r=bx(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ie||(r=s.type,e=s.pendingProps,o=ic(ge.current).createElement(r),o[Dt]=s,o[Zt]=e,Xt(o,r,e),ht(o),s.stateNode=o):s.memoizedState=bx(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return W(s),e===null&&Ie&&(o=s.stateNode=px(s.type,s.pendingProps,ge.current),Gt=s,qs=!0,h=ot,ya(s.type)?(Kd=h,ot=$s(o.firstChild)):ot=h),Yt(e,s,s.pendingProps.children,r),$o(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Ie&&((h=o=ot)&&(o=K1(o,s.type,s.pendingProps,qs),o!==null?(s.stateNode=o,Gt=s,ot=$s(o.firstChild),qs=!1,h=!0):h=!1),h||ra(s)),W(s),h=s.type,f=s.pendingProps,b=e!==null?e.memoizedProps:null,o=f.children,qd(h,f)?o=null:b!==null&&qd(h,b)&&(s.flags|=32),s.memoizedState!==null&&(h=Pu(e,s,l1,null,null,r),Al._currentValue=h),$o(e,s),Yt(e,s,o,r),s.child;case 6:return e===null&&Ie&&((e=r=ot)&&(r=Y1(r,s.pendingProps,qs),r!==null?(s.stateNode=r,Gt=s,ot=null,e=!0):e=!1),e||ra(s)),null;case 13:return ag(e,s,r);case 4:return se(s,s.stateNode.containerInfo),o=s.pendingProps,e===null?s.child=Za(s,null,o,r):Yt(e,s,o,r),s.child;case 11:return Qp(e,s,s.type,s.pendingProps,r);case 7:return Yt(e,s,s.pendingProps,r),s.child;case 8:return Yt(e,s,s.pendingProps.children,r),s.child;case 12:return Yt(e,s,s.pendingProps.children,r),s.child;case 10:return o=s.pendingProps,ia(s,s.type,o.value),Yt(e,s,o.children,r),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,Ya(s),h=Kt(h),o=o(h),s.flags|=1,Yt(e,s,o,r),s.child;case 14:return Fp(e,s,s.type,s.pendingProps,r);case 15:return Zp(e,s,s.type,s.pendingProps,r);case 19:return ig(e,s,r);case 31:return p1(e,s,r);case 22:return Jp(e,s,r,s.pendingProps);case 24:return Ya(s),o=Kt(Et),e===null?(h=Cu(),h===null&&(h=nt,f=ku(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=r),h=f),s.memoizedState={parent:o,cache:h},Ru(s),ia(s,Et,h)):((e.lanes&r)!==0&&(Mu(e,s),cl(s,null,null,r),ol()),h=e.memoizedState,f=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ia(s,Et,o)):(o=f.cache,ia(s,Et,o),o!==h.cache&&Eu(s,[Et],r,!0))),Yt(e,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Mn(e){e.flags|=4}function md(e,s,r,o,h){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Dg())e.flags|=8192;else throw Fa=ko,Ou}else e.flags&=-16777217}function og(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_x(s))if(Dg())e.flags|=8192;else throw Fa=ko,Ou}function Go(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?yr():536870912,e.lanes|=s,Qr|=s)}function pl(e,s){if(!Ie)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ct(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(s)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=r,s}function x1(e,s,r){var o=s.pendingProps;switch(ju(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(s),null;case 1:return ct(s),null;case 3:return r=s.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),An(Et),$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(zr(s)?Mn(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nu())),ct(s),null;case 26:var h=s.type,f=s.memoizedState;return e===null?(Mn(s),f!==null?(ct(s),og(s,f)):(ct(s),md(s,h,null,o,r))):f?f!==e.memoizedState?(Mn(s),ct(s),og(s,f)):(ct(s),s.flags&=-16777217):(e=e.memoizedProps,e!==o&&Mn(s),ct(s),md(s,h,e,o,r)),null;case 27:if(ae(s),r=ge.current,h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==o&&Mn(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return ct(s),null}e=I.current,zr(s)?qm(s):(e=px(h,o,r),s.stateNode=e,Mn(s))}return ct(s),null;case 5:if(ae(s),h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==o&&Mn(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return ct(s),null}if(f=I.current,zr(s))qm(s);else{var b=ic(ge.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?b.createElement(h,{is:o.is}):b.createElement(h)}}f[Dt]=s,f[Zt]=o;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=f;e:switch(Xt(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mn(s)}}return ct(s),md(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,r),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==o&&Mn(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(e=ge.current,zr(s)){if(e=s.stateNode,r=s.memoizedProps,o=null,h=Gt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Dt]=s,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||ax(e.nodeValue,r)),e||ra(s,!0)}else e=ic(e).createTextNode(o),e[Dt]=s,s.stateNode=e}return ct(s),null;case 31:if(r=s.memoizedState,e===null||e.memoizedState!==null){if(o=zr(s),r!==null){if(e===null){if(!o)throw Error(i(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Dt]=s}else Ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),e=!1}else r=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return s.flags&256?(ks(s),s):(ks(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ct(s),null;case 13:if(o=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=zr(s),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Dt]=s}else Ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),h=!1}else h=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ks(s),s):(ks(s),null)}return ks(s),(s.flags&128)!==0?(s.lanes=r,s):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),r!==e&&r&&(s.child.flags|=8192),Go(s,s.updateQueue),ct(s),null);case 4:return $(),e===null&&zd(s.stateNode.containerInfo),ct(s),null;case 10:return An(s.type),ct(s),null;case 19:if(K(jt),o=s.memoizedState,o===null)return ct(s),null;if(h=(s.flags&128)!==0,f=o.rendering,f===null)if(h)pl(o,!1);else{if(yt!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(f=Ro(e),f!==null){for(s.flags|=128,pl(o,!1),e=f.updateQueue,s.updateQueue=e,Go(s,e),s.subtreeFlags=0,e=r,r=s.child;r!==null;)zm(r,e),r=r.sibling;return ne(jt,jt.current&1|2),Ie&&En(s,o.treeForkCount),s.child}e=e.sibling}o.tail!==null&&ts()>Fo&&(s.flags|=128,h=!0,pl(o,!1),s.lanes=4194304)}else{if(!h)if(e=Ro(f),e!==null){if(s.flags|=128,h=!0,e=e.updateQueue,s.updateQueue=e,Go(s,e),pl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Ie)return ct(s),null}else 2*ts()-o.renderingStartTime>Fo&&r!==536870912&&(s.flags|=128,h=!0,pl(o,!1),s.lanes=4194304);o.isBackwards?(f.sibling=s.child,s.child=f):(e=o.last,e!==null?e.sibling=f:s.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ts(),e.sibling=null,r=jt.current,ne(jt,h?r&1|2:r&1),Ie&&En(s,o.treeForkCount),e):(ct(s),null);case 22:case 23:return ks(s),Bu(),o=s.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(r&536870912)!==0&&(s.flags&128)===0&&(ct(s),s.subtreeFlags&6&&(s.flags|=8192)):ct(s),r=s.updateQueue,r!==null&&Go(s,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048),e!==null&&K(Xa),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),An(Et),ct(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function b1(e,s){switch(ju(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return An(Et),$(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return ae(s),null;case 31:if(s.memoizedState!==null){if(ks(s),s.alternate===null)throw Error(i(340));Ga()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(ks(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ga()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return K(jt),null;case 4:return $(),null;case 10:return An(s.type),null;case 22:case 23:return ks(s),Bu(),e!==null&&K(Xa),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return An(Et),null;case 25:return null;default:return null}}function cg(e,s){switch(ju(s),s.tag){case 3:An(Et),$();break;case 26:case 27:case 5:ae(s);break;case 4:$();break;case 31:s.memoizedState!==null&&ks(s);break;case 13:ks(s);break;case 19:K(jt);break;case 10:An(s.type);break;case 22:case 23:ks(s),Bu(),e!==null&&K(Xa);break;case 24:An(Et)}}function gl(e,s){try{var r=s.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&e)===e){o=void 0;var f=r.create,b=r.inst;o=f(),b.destroy=o}r=r.next}while(r!==h)}}catch(w){We(s,s.return,w)}}function ha(e,s,r){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var b=o.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,h=s;var E=r,L=w;try{L()}catch(Y){We(h,E,Y)}}}o=o.next}while(o!==f)}}catch(Y){We(s,s.return,Y)}}function ug(e){var s=e.updateQueue;if(s!==null){var r=e.stateNode;try{ep(s,r)}catch(o){We(e,e.return,o)}}}function dg(e,s,r){r.props=Wa(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){We(e,s,o)}}function xl(e,s){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(h){We(e,s,h)}}function gn(e,s){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){We(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){We(e,s,h)}else r.current=null}function hg(e){var s=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){We(e,e.return,h)}}function pd(e,s,r){try{var o=e.stateNode;P1(o,e.type,r,s),o[Zt]=s}catch(h){We(e,e.return,h)}}function fg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ya(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xd(e,s,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(e),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=js));else if(o!==4&&(o===27&&ya(e.type)&&(r=e.stateNode,s=null),e=e.child,e!==null))for(xd(e,s,r),e=e.sibling;e!==null;)xd(e,s,r),e=e.sibling}function Ko(e,s,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(o!==4&&(o===27&&ya(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Ko(e,s,r),e=e.sibling;e!==null;)Ko(e,s,r),e=e.sibling}function mg(e){var s=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Xt(s,o,r),s[Dt]=e,s[Zt]=r}catch(f){We(e,e.return,f)}}var Dn=!1,Ct=!1,bd=!1,pg=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function y1(e,s){if(e=e.containerInfo,Vd=fc,e=Em(e),du(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var b=0,w=-1,E=-1,L=0,Y=0,ee=e,V=null;t:for(;;){for(var q;ee!==r||h!==0&&ee.nodeType!==3||(w=b+h),ee!==f||o!==0&&ee.nodeType!==3||(E=b+o),ee.nodeType===3&&(b+=ee.nodeValue.length),(q=ee.firstChild)!==null;)V=ee,ee=q;for(;;){if(ee===e)break t;if(V===r&&++L===h&&(w=b),V===f&&++Y===o&&(E=b),(q=ee.nextSibling)!==null)break;ee=V,V=ee.parentNode}ee=q}r=w===-1||E===-1?null:{start:w,end:E}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pd={focusedElem:e,selectionRange:r},fc=!1,Pt=s;Pt!==null;)if(s=Pt,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,Pt=e;else for(;Pt!==null;){switch(s=Pt,f=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)h=e[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=s,h=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var fe=Wa(r.type,h);e=o.getSnapshotBeforeUpdate(fe,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(_e){We(r,r.return,_e)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,r=e.nodeType,r===9)$d(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=s.sibling,e!==null){e.return=s.return,Pt=e;break}Pt=s.return}}function gg(e,s,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:zn(e,r),o&4&&gl(5,r);break;case 1:if(zn(e,r),o&4)if(e=r.stateNode,s===null)try{e.componentDidMount()}catch(b){We(r,r.return,b)}else{var h=Wa(r.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(b){We(r,r.return,b)}}o&64&&ug(r),o&512&&xl(r,r.return);break;case 3:if(zn(e,r),o&64&&(e=r.updateQueue,e!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{ep(e,s)}catch(b){We(r,r.return,b)}}break;case 27:s===null&&o&4&&mg(r);case 26:case 5:zn(e,r),s===null&&o&4&&hg(r),o&512&&xl(r,r.return);break;case 12:zn(e,r);break;case 31:zn(e,r),o&4&&yg(e,r);break;case 13:zn(e,r),o&4&&vg(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=k1.bind(null,r),X1(e,r))));break;case 22:if(o=r.memoizedState!==null||Dn,!o){s=s!==null&&s.memoizedState!==null||Ct,h=Dn;var f=Ct;Dn=o,(Ct=s)&&!f?Bn(e,r,(r.subtreeFlags&8772)!==0):zn(e,r),Dn=h,Ct=f}break;case 30:break;default:zn(e,r)}}function xg(e){var s=e.alternate;s!==null&&(e.alternate=null,xg(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Zn(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ut=null,ms=!1;function Un(e,s,r){for(r=r.child;r!==null;)bg(e,s,r),r=r.sibling}function bg(e,s,r){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(on,r)}catch{}switch(r.tag){case 26:Ct||gn(r,s),Un(e,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ct||gn(r,s);var o=ut,h=ms;ya(r.type)&&(ut=r.stateNode,ms=!1),Un(e,s,r),Tl(r.stateNode),ut=o,ms=h;break;case 5:Ct||gn(r,s);case 6:if(o=ut,h=ms,ut=null,Un(e,s,r),ut=o,ms=h,ut!==null)if(ms)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(r.stateNode)}catch(f){We(r,s,f)}else try{ut.removeChild(r.stateNode)}catch(f){We(r,s,f)}break;case 18:ut!==null&&(ms?(e=ut,ux(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),ni(e)):ux(ut,r.stateNode));break;case 4:o=ut,h=ms,ut=r.stateNode.containerInfo,ms=!0,Un(e,s,r),ut=o,ms=h;break;case 0:case 11:case 14:case 15:ha(2,r,s),Ct||ha(4,r,s),Un(e,s,r);break;case 1:Ct||(gn(r,s),o=r.stateNode,typeof o.componentWillUnmount=="function"&&dg(r,s,o)),Un(e,s,r);break;case 21:Un(e,s,r);break;case 22:Ct=(o=Ct)||r.memoizedState!==null,Un(e,s,r),Ct=o;break;default:Un(e,s,r)}}function yg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ni(e)}catch(r){We(s,s.return,r)}}}function vg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ni(e)}catch(r){We(s,s.return,r)}}function v1(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new pg),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new pg),s;default:throw Error(i(435,e.tag))}}function Yo(e,s){var r=v1(e);s.forEach(function(o){if(!r.has(o)){r.add(o);var h=A1.bind(null,e,o);o.then(h,h)}})}function ps(e,s){var r=s.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],f=e,b=s,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(ya(w.type)){ut=w.stateNode,ms=!1;break e}break;case 5:ut=w.stateNode,ms=!1;break e;case 3:case 4:ut=w.stateNode.containerInfo,ms=!0;break e}w=w.return}if(ut===null)throw Error(i(160));bg(f,b,h),ut=null,ms=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wg(s,e),s=s.sibling}var en=null;function wg(e,s){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ps(s,e),gs(e),o&4&&(ha(3,e,e.return),gl(3,e),ha(5,e,e.return));break;case 1:ps(s,e),gs(e),o&512&&(Ct||r===null||gn(r,r.return)),o&64&&Dn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=en;if(ps(s,e),gs(e),o&512&&(Ct||r===null||gn(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Fn]||f[Dt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Xt(f,o,r),f[Dt]=e,ht(f),o=f;break e;case"link":var b=wx("link","href",h).get(o+(r.href||""));if(b){for(var w=0;w<b.length;w++)if(f=b[w],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(w,1);break t}}f=h.createElement(o),Xt(f,o,r),h.head.appendChild(f);break;case"meta":if(b=wx("meta","content",h).get(o+(r.content||""))){for(w=0;w<b.length;w++)if(f=b[w],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(w,1);break t}}f=h.createElement(o),Xt(f,o,r),h.head.appendChild(f);break;default:throw Error(i(468,o))}f[Dt]=e,ht(f),o=f}e.stateNode=o}else jx(h,e.type,e.stateNode);else e.stateNode=vx(h,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?jx(h,e.type,e.stateNode):vx(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&pd(e,e.memoizedProps,r.memoizedProps)}break;case 27:ps(s,e),gs(e),o&512&&(Ct||r===null||gn(r,r.return)),r!==null&&o&4&&pd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(ps(s,e),gs(e),o&512&&(Ct||r===null||gn(r,r.return)),e.flags&32){h=e.stateNode;try{Js(h,"")}catch(fe){We(e,e.return,fe)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,pd(e,h,r!==null?r.memoizedProps:h)),o&1024&&(bd=!0);break;case 6:if(ps(s,e),gs(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(fe){We(e,e.return,fe)}}break;case 3:if(cc=null,h=en,en=lc(s.containerInfo),ps(s,e),en=h,gs(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{ni(s.containerInfo)}catch(fe){We(e,e.return,fe)}bd&&(bd=!1,jg(e));break;case 4:o=en,en=lc(e.stateNode.containerInfo),ps(s,e),gs(e),en=o;break;case 12:ps(s,e),gs(e);break;case 31:ps(s,e),gs(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Yo(e,o)));break;case 13:ps(s,e),gs(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Qo=ts()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Yo(e,o)));break;case 22:h=e.memoizedState!==null;var E=r!==null&&r.memoizedState!==null,L=Dn,Y=Ct;if(Dn=L||h,Ct=Y||E,ps(s,e),Ct=Y,Dn=L,gs(e),o&8192)e:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(r===null||E||Dn||Ct||er(e)),r=null,s=e;;){if(s.tag===5||s.tag===26){if(r===null){E=r=s;try{if(f=E.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=E.stateNode;var ee=E.memoizedProps.style,V=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;w.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(fe){We(E,E.return,fe)}}}else if(s.tag===6){if(r===null){E=s;try{E.stateNode.nodeValue=h?"":E.memoizedProps}catch(fe){We(E,E.return,fe)}}}else if(s.tag===18){if(r===null){E=s;try{var q=E.stateNode;h?dx(q,!0):dx(E.stateNode,!1)}catch(fe){We(E,E.return,fe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Yo(e,r))));break;case 19:ps(s,e),gs(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Yo(e,o)));break;case 30:break;case 21:break;default:ps(s,e),gs(e)}}function gs(e){var s=e.flags;if(s&2){try{for(var r,o=e.return;o!==null;){if(fg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var h=r.stateNode,f=gd(e);Ko(e,f,h);break;case 5:var b=r.stateNode;r.flags&32&&(Js(b,""),r.flags&=-33);var w=gd(e);Ko(e,w,b);break;case 3:case 4:var E=r.stateNode.containerInfo,L=gd(e);xd(e,L,E);break;default:throw Error(i(161))}}catch(Y){We(e,e.return,Y)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function jg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;jg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function zn(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gg(e,s.alternate,s),s=s.sibling}function er(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:ha(4,s,s.return),er(s);break;case 1:gn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&dg(s,s.return,r),er(s);break;case 27:Tl(s.stateNode);case 26:case 5:gn(s,s.return),er(s);break;case 22:s.memoizedState===null&&er(s);break;case 30:er(s);break;default:er(s)}e=e.sibling}}function Bn(e,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=e,f=s,b=f.flags;switch(f.tag){case 0:case 11:case 15:Bn(h,f,r),gl(4,f);break;case 1:if(Bn(h,f,r),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){We(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var w=o.stateNode;try{var E=h.shared.hiddenCallbacks;if(E!==null)for(h.shared.hiddenCallbacks=null,h=0;h<E.length;h++)Wm(E[h],w)}catch(L){We(o,o.return,L)}}r&&b&64&&ug(f),xl(f,f.return);break;case 27:mg(f);case 26:case 5:Bn(h,f,r),r&&o===null&&b&4&&hg(f),xl(f,f.return);break;case 12:Bn(h,f,r);break;case 31:Bn(h,f,r),r&&b&4&&yg(h,f);break;case 13:Bn(h,f,r),r&&b&4&&vg(h,f);break;case 22:f.memoizedState===null&&Bn(h,f,r),xl(f,f.return);break;case 30:break;default:Bn(h,f,r)}s=s.sibling}}function yd(e,s){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&nl(r))}function vd(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&nl(e))}function tn(e,s,r,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_g(e,s,r,o),s=s.sibling}function _g(e,s,r,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:tn(e,s,r,o),h&2048&&gl(9,s);break;case 1:tn(e,s,r,o);break;case 3:tn(e,s,r,o),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&nl(e)));break;case 12:if(h&2048){tn(e,s,r,o),e=s.stateNode;try{var f=s.memoizedProps,b=f.id,w=f.onPostCommit;typeof w=="function"&&w(b,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){We(s,s.return,E)}}else tn(e,s,r,o);break;case 31:tn(e,s,r,o);break;case 13:tn(e,s,r,o);break;case 23:break;case 22:f=s.stateNode,b=s.alternate,s.memoizedState!==null?f._visibility&2?tn(e,s,r,o):bl(e,s):f._visibility&2?tn(e,s,r,o):(f._visibility|=2,Kr(e,s,r,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&yd(b,s);break;case 24:tn(e,s,r,o),h&2048&&vd(s.alternate,s);break;default:tn(e,s,r,o)}}function Kr(e,s,r,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var f=e,b=s,w=r,E=o,L=b.flags;switch(b.tag){case 0:case 11:case 15:Kr(f,b,w,E,h),gl(8,b);break;case 23:break;case 22:var Y=b.stateNode;b.memoizedState!==null?Y._visibility&2?Kr(f,b,w,E,h):bl(f,b):(Y._visibility|=2,Kr(f,b,w,E,h)),h&&L&2048&&yd(b.alternate,b);break;case 24:Kr(f,b,w,E,h),h&&L&2048&&vd(b.alternate,b);break;default:Kr(f,b,w,E,h)}s=s.sibling}}function bl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=e,o=s,h=o.flags;switch(o.tag){case 22:bl(r,o),h&2048&&yd(o.alternate,o);break;case 24:bl(r,o),h&2048&&vd(o.alternate,o);break;default:bl(r,o)}s=s.sibling}}var yl=8192;function Yr(e,s,r){if(e.subtreeFlags&yl)for(e=e.child;e!==null;)Ng(e,s,r),e=e.sibling}function Ng(e,s,r){switch(e.tag){case 26:Yr(e,s,r),e.flags&yl&&e.memoizedState!==null&&ij(r,en,e.memoizedState,e.memoizedProps);break;case 5:Yr(e,s,r);break;case 3:case 4:var o=en;en=lc(e.stateNode.containerInfo),Yr(e,s,r),en=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=yl,yl=16777216,Yr(e,s,r),yl=o):Yr(e,s,r));break;default:Yr(e,s,r)}}function Sg(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function vl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];Pt=o,Eg(o,e)}Sg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Tg(e),e=e.sibling}function Tg(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&ha(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Xo(e)):vl(e);break;default:vl(e)}}function Xo(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];Pt=o,Eg(o,e)}Sg(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:ha(8,s,s.return),Xo(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Xo(s));break;default:Xo(s)}e=e.sibling}}function Eg(e,s){for(;Pt!==null;){var r=Pt;switch(r.tag){case 0:case 11:case 15:ha(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:nl(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Pt=o;else e:for(r=e;Pt!==null;){o=Pt;var h=o.sibling,f=o.return;if(xg(o),o===r){Pt=null;break e}if(h!==null){h.return=f,Pt=h;break e}Pt=f}}}var w1={getCacheForType:function(e){var s=Kt(Et),r=s.data.get(e);return r===void 0&&(r=e(),s.data.set(e,r)),r},cacheSignal:function(){return Kt(Et).controller.signal}},j1=typeof WeakMap=="function"?WeakMap:Map,Fe=0,nt=null,Le=null,qe=0,Je=0,As=null,fa=!1,Xr=!1,wd=!1,Ln=0,yt=0,ma=0,tr=0,jd=0,Cs=0,Qr=0,wl=null,xs=null,_d=!1,Qo=0,kg=0,Fo=1/0,Zo=null,pa=null,Ut=0,ga=null,Fr=null,Vn=0,Nd=0,Sd=null,Ag=null,jl=0,Td=null;function Os(){return(Fe&2)!==0&&qe!==0?qe&-qe:P.T!==null?Rd():oo()}function Cg(){if(Cs===0)if((qe&536870912)===0||Ie){var e=cn;cn<<=1,(cn&3932160)===0&&(cn=262144),Cs=e}else Cs=536870912;return e=Es.current,e!==null&&(e.flags|=32),Cs}function bs(e,s,r){(e===nt&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(Zr(e,0),xa(e,qe,Cs,!1)),ws(e,r),((Fe&2)===0||e!==nt)&&(e===nt&&((Fe&2)===0&&(tr|=r),yt===4&&xa(e,qe,Cs,!1)),xn(e))}function Og(e,s,r){if((Fe&6)!==0)throw Error(i(327));var o=!r&&(s&127)===0&&(s&e.expiredLanes)===0||Yn(e,s),h=o?S1(e,s):kd(e,s,!0),f=o;do{if(h===0){Xr&&!o&&xa(e,s,0,!1);break}else{if(r=e.current.alternate,f&&!_1(r)){h=kd(e,s,!1),f=!1;continue}if(h===2){if(f=s,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var w=e;h=wl;var E=w.current.memoizedState.isDehydrated;if(E&&(Zr(w,b).flags|=256),b=kd(w,b,!1),b!==2){if(wd&&!E){w.errorRecoveryDisabledLanes|=f,tr|=f,h=4;break e}f=xs,xs=h,f!==null&&(xs===null?xs=f:xs.push.apply(xs,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Zr(e,0),xa(e,s,0,!0);break}e:{switch(o=e,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:xa(o,s,Cs,!fa);break e;case 2:xs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Qo+300-ts(),10<h)){if(xa(o,s,Cs,!fa),Bt(o,0,!0)!==0)break e;Vn=s,o.timeoutHandle=ox(Rg.bind(null,o,r,xs,Zo,_d,s,Cs,tr,Qr,fa,f,"Throttled",-0,0),h);break e}Rg(o,r,xs,Zo,_d,s,Cs,tr,Qr,fa,f,null,-0,0)}}break}while(!0);xn(e)}function Rg(e,s,r,o,h,f,b,w,E,L,Y,ee,V,q){if(e.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:js},Ng(s,f,ee);var fe=(f&62914560)===f?Qo-ts():(f&4194048)===f?kg-ts():0;if(fe=lj(ee,fe),fe!==null){Vn=f,e.cancelPendingCommit=fe(Pg.bind(null,e,s,f,r,o,h,b,w,E,Y,ee,null,V,q)),xa(e,f,b,!L);return}}Pg(e,s,f,r,o,h,b,w,E)}function _1(e){for(var s=e;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],f=h.getSnapshot;h=h.value;try{if(!Ss(f(),h))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xa(e,s,r,o){s&=~jd,s&=~tr,e.suspendedLanes|=s,e.pingedLanes&=~s,o&&(e.warmLanes|=s),o=e.expirationTimes;for(var h=s;0<h;){var f=31-ns(h),b=1<<f;o[f]=-1,h&=~b}r!==0&&Mi(e,r,s)}function Jo(){return(Fe&6)===0?(_l(0),!1):!0}function Ed(){if(Le!==null){if(Je===0)var e=Le.return;else e=Le,kn=Ka=null,$u(e),qr=null,rl=0,e=Le;for(;e!==null;)cg(e.alternate,e),e=e.return;Le=null}}function Zr(e,s){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,$1(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Vn=0,Ed(),nt=e,Le=r=Tn(e.current,null),qe=s,Je=0,As=null,fa=!1,Xr=Yn(e,s),wd=!1,Qr=Cs=jd=tr=ma=yt=0,xs=wl=null,_d=!1,(s&8)!==0&&(s|=s&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=s;0<o;){var h=31-ns(o),f=1<<h;s|=e[h],o&=~f}return Ln=s,yo(),r}function Mg(e,s){Re=null,P.H=fl,s===Pr||s===Eo?(s=Qm(),Je=3):s===Ou?(s=Qm(),Je=4):Je=s===rd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,As=s,Le===null&&(yt=1,qo(e,Ls(s,e.current)))}function Dg(){var e=Es.current;return e===null?!0:(qe&4194048)===qe?Hs===null:(qe&62914560)===qe||(qe&536870912)!==0?e===Hs:!1}function Ug(){var e=P.H;return P.H=fl,e===null?fl:e}function zg(){var e=P.A;return P.A=w1,e}function Wo(){yt=4,fa||(qe&4194048)!==qe&&Es.current!==null||(Xr=!0),(ma&134217727)===0&&(tr&134217727)===0||nt===null||xa(nt,qe,Cs,!1)}function kd(e,s,r){var o=Fe;Fe|=2;var h=Ug(),f=zg();(nt!==e||qe!==s)&&(Zo=null,Zr(e,s)),s=!1;var b=yt;e:do try{if(Je!==0&&Le!==null){var w=Le,E=As;switch(Je){case 8:Ed(),b=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(s=!0);var L=Je;if(Je=0,As=null,Jr(e,w,E,L),r&&Xr){b=0;break e}break;default:L=Je,Je=0,As=null,Jr(e,w,E,L)}}N1(),b=yt;break}catch(Y){Mg(e,Y)}while(!0);return s&&e.shellSuspendCounter++,kn=Ka=null,Fe=o,P.H=h,P.A=f,Le===null&&(nt=null,qe=0,yo()),b}function N1(){for(;Le!==null;)Bg(Le)}function S1(e,s){var r=Fe;Fe|=2;var o=Ug(),h=zg();nt!==e||qe!==s?(Zo=null,Fo=ts()+500,Zr(e,s)):Xr=Yn(e,s);e:do try{if(Je!==0&&Le!==null){s=Le;var f=As;t:switch(Je){case 1:Je=0,As=null,Jr(e,s,f,1);break;case 2:case 9:if(Ym(f)){Je=0,As=null,Lg(s);break}s=function(){Je!==2&&Je!==9||nt!==e||(Je=7),xn(e)},f.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Ym(f)?(Je=0,As=null,Lg(s)):(Je=0,As=null,Jr(e,s,f,7));break;case 5:var b=null;switch(Le.tag){case 26:b=Le.memoizedState;case 5:case 27:var w=Le;if(b?_x(b):w.stateNode.complete){Je=0,As=null;var E=w.sibling;if(E!==null)Le=E;else{var L=w.return;L!==null?(Le=L,ec(L)):Le=null}break t}}Je=0,As=null,Jr(e,s,f,5);break;case 6:Je=0,As=null,Jr(e,s,f,6);break;case 8:Ed(),yt=6;break e;default:throw Error(i(462))}}T1();break}catch(Y){Mg(e,Y)}while(!0);return kn=Ka=null,P.H=o,P.A=h,Fe=r,Le!==null?0:(nt=null,qe=0,yo(),yt)}function T1(){for(;Le!==null&&!Da();)Bg(Le)}function Bg(e){var s=lg(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,s===null?ec(e):Le=s}function Lg(e){var s=e,r=s.alternate;switch(s.tag){case 15:case 0:s=tg(r,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=tg(r,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:$u(s);default:cg(r,s),s=Le=zm(s,Ln),s=lg(r,s,Ln)}e.memoizedProps=e.pendingProps,s===null?ec(e):Le=s}function Jr(e,s,r,o){kn=Ka=null,$u(s),qr=null,rl=0;var h=s.return;try{if(m1(e,h,s,r,qe)){yt=1,qo(e,Ls(r,e.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;yt=1,qo(e,Ls(r,e.current)),Le=null;return}s.flags&32768?(Ie||o===1?e=!0:Xr||(qe&536870912)!==0?e=!1:(fa=e=!0,(o===2||o===9||o===3||o===6)&&(o=Es.current,o!==null&&o.tag===13&&(o.flags|=16384))),Vg(s,e)):ec(s)}function ec(e){var s=e;do{if((s.flags&32768)!==0){Vg(s,fa);return}e=s.return;var r=x1(s.alternate,s,Ln);if(r!==null){Le=r;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=e}while(s!==null);yt===0&&(yt=5)}function Vg(e,s){do{var r=b1(e.alternate,e);if(r!==null){r.flags&=32767,Le=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(e=e.sibling,e!==null)){Le=e;return}Le=e=r}while(e!==null);yt=6,Le=null}function Pg(e,s,r,o,h,f,b,w,E){e.cancelPendingCommit=null;do tc();while(Ut!==0);if((Fe&6)!==0)throw Error(i(327));if(s!==null){if(s===e.current)throw Error(i(177));if(f=s.lanes|s.childLanes,f|=gu,Ri(e,r,f,b,w,E),e===nt&&(Le=nt=null,qe=0),Fr=s,ga=e,Vn=r,Nd=f,Sd=h,Ag=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,C1(vs,function(){return Gg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=P.T,P.T=null,h=X.p,X.p=2,b=Fe,Fe|=4;try{y1(e,s,r)}finally{Fe=b,X.p=h,P.T=o}}Ut=1,qg(),Hg(),$g()}}function qg(){if(Ut===1){Ut=0;var e=ga,s=Fr,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var o=X.p;X.p=2;var h=Fe;Fe|=4;try{wg(s,e);var f=Pd,b=Em(e.containerInfo),w=f.focusedElem,E=f.selectionRange;if(b!==w&&w&&w.ownerDocument&&Tm(w.ownerDocument.documentElement,w)){if(E!==null&&du(w)){var L=E.start,Y=E.end;if(Y===void 0&&(Y=L),"selectionStart"in w)w.selectionStart=L,w.selectionEnd=Math.min(Y,w.value.length);else{var ee=w.ownerDocument||document,V=ee&&ee.defaultView||window;if(V.getSelection){var q=V.getSelection(),fe=w.textContent.length,_e=Math.min(E.start,fe),st=E.end===void 0?_e:Math.min(E.end,fe);!q.extend&&_e>st&&(b=st,st=_e,_e=b);var D=Sm(w,_e),C=Sm(w,st);if(D&&C&&(q.rangeCount!==1||q.anchorNode!==D.node||q.anchorOffset!==D.offset||q.focusNode!==C.node||q.focusOffset!==C.offset)){var B=ee.createRange();B.setStart(D.node,D.offset),q.removeAllRanges(),_e>st?(q.addRange(B),q.extend(C.node,C.offset)):(B.setEnd(C.node,C.offset),q.addRange(B))}}}}for(ee=[],q=w;q=q.parentNode;)q.nodeType===1&&ee.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ee.length;w++){var J=ee[w];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}fc=!!Vd,Pd=Vd=null}finally{Fe=h,X.p=o,P.T=r}}e.current=s,Ut=2}}function Hg(){if(Ut===2){Ut=0;var e=ga,s=Fr,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var o=X.p;X.p=2;var h=Fe;Fe|=4;try{gg(e,s.alternate,s)}finally{Fe=h,X.p=o,P.T=r}}Ut=3}}function $g(){if(Ut===4||Ut===3){Ut=0,Ua();var e=ga,s=Fr,r=Vn,o=Ag;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ut=5:(Ut=0,Fr=ga=null,Ig(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(pa=null),vr(r),s=s.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(on,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=P.T,h=X.p,X.p=2,P.T=null;try{for(var f=e.onRecoverableError,b=0;b<o.length;b++){var w=o[b];f(w.value,{componentStack:w.stack})}}finally{P.T=s,X.p=h}}(Vn&3)!==0&&tc(),xn(e),h=e.pendingLanes,(r&261930)!==0&&(h&42)!==0?e===Td?jl++:(jl=0,Td=e):jl=0,_l(0)}}function Ig(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,nl(s)))}function tc(){return qg(),Hg(),$g(),Gg()}function Gg(){if(Ut!==5)return!1;var e=ga,s=Nd;Nd=0;var r=vr(Vn),o=P.T,h=X.p;try{X.p=32>r?32:r,P.T=null,r=Sd,Sd=null;var f=ga,b=Vn;if(Ut=0,Fr=ga=null,Vn=0,(Fe&6)!==0)throw Error(i(331));var w=Fe;if(Fe|=4,Tg(f.current),_g(f,f.current,b,r),Fe=w,_l(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(on,f)}catch{}return!0}finally{X.p=h,P.T=o,Ig(e,s)}}function Kg(e,s,r){s=Ls(r,s),s=ad(e.stateNode,s,2),e=ca(e,s,2),e!==null&&(ws(e,2),xn(e))}function We(e,s,r){if(e.tag===3)Kg(e,e,r);else for(;s!==null;){if(s.tag===3){Kg(s,e,r);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pa===null||!pa.has(o))){e=Ls(r,e),r=Yp(2),o=ca(s,r,2),o!==null&&(Xp(r,o,s,e),ws(o,2),xn(o));break}}s=s.return}}function Ad(e,s,r){var o=e.pingCache;if(o===null){o=e.pingCache=new j1;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(r)||(wd=!0,h.add(r),e=E1.bind(null,e,s,r),s.then(e,e))}function E1(e,s,r){var o=e.pingCache;o!==null&&o.delete(s),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nt===e&&(qe&r)===r&&(yt===4||yt===3&&(qe&62914560)===qe&&300>ts()-Qo?(Fe&2)===0&&Zr(e,0):jd|=r,Qr===qe&&(Qr=0)),xn(e)}function Yg(e,s){s===0&&(s=yr()),e=$a(e,s),e!==null&&(ws(e,s),xn(e))}function k1(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),Yg(e,r)}function A1(e,s){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),Yg(e,r)}function C1(e,s){return Mt(e,s)}var sc=null,Wr=null,Cd=!1,nc=!1,Od=!1,ba=0;function xn(e){e!==Wr&&e.next===null&&(Wr===null?sc=Wr=e:Wr=Wr.next=e),nc=!0,Cd||(Cd=!0,R1())}function _l(e,s){if(!Od&&nc){Od=!0;do for(var r=!1,o=sc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var b=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-ns(42|e)+1)-1,f&=h&~(b&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Zg(o,f))}else f=qe,f=Bt(o,o===nt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Yn(o,f)||(r=!0,Zg(o,f));o=o.next}while(r);Od=!1}}function O1(){Xg()}function Xg(){nc=Cd=!1;var e=0;ba!==0&&H1()&&(e=ba);for(var s=ts(),r=null,o=sc;o!==null;){var h=o.next,f=Qg(o,s);f===0?(o.next=null,r===null?sc=h:r.next=h,h===null&&(Wr=r)):(r=o,(e!==0||(f&3)!==0)&&(nc=!0)),o=h}Ut!==0&&Ut!==5||_l(e),ba!==0&&(ba=0)}function Qg(e,s){for(var r=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-ns(f),w=1<<b,E=h[b];E===-1?((w&r)===0||(w&o)!==0)&&(h[b]=Oi(w,s)):E<=s&&(e.expiredLanes|=w),f&=~w}if(s=nt,r=qe,r=Bt(e,e===s?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===s&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ma(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Yn(e,r)){if(s=r&-r,s===e.callbackPriority)return s;switch(o!==null&&Ma(o),vr(r)){case 2:case 8:r=qt;break;case 32:r=vs;break;case 268435456:r=xr;break;default:r=vs}return o=Fg.bind(null,e),r=Mt(r,o),e.callbackPriority=s,e.callbackNode=r,s}return o!==null&&o!==null&&Ma(o),e.callbackPriority=2,e.callbackNode=null,2}function Fg(e,s){if(Ut!==0&&Ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(tc()&&e.callbackNode!==r)return null;var o=qe;return o=Bt(e,e===nt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Og(e,o,s),Qg(e,ts()),e.callbackNode!=null&&e.callbackNode===r?Fg.bind(null,e):null)}function Zg(e,s){if(tc())return null;Og(e,s,!0)}function R1(){I1(function(){(Fe&6)!==0?Mt(Ai,O1):Xg()})}function Rd(){if(ba===0){var e=Lr;e===0&&(e=Ba,Ba<<=1,(Ba&261888)===0&&(Ba=256)),ba=e}return ba}function Jg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:kr(""+e)}function Wg(e,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,e.id&&r.setAttribute("form",e.id),s.parentNode.insertBefore(r,s),e=new FormData(e),r.parentNode.removeChild(r),e}function M1(e,s,r,o,h){if(s==="submit"&&r&&r.stateNode===h){var f=Jg((h[Zt]||null).action),b=o.submitter;b&&(s=(s=b[Zt]||null)?Jg(s.formAction):b.getAttribute("formAction"),s!==null&&(f=s,b=null));var w=new is("action","action",null,o,h);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ba!==0){var E=b?Wg(h,b):new FormData(h);Ju(r,{pending:!0,data:E,method:h.method,action:f},null,E)}}else typeof f=="function"&&(w.preventDefault(),E=b?Wg(h,b):new FormData(h),Ju(r,{pending:!0,data:E,method:h.method,action:f},f,E))},currentTarget:h}]})}}for(var Md=0;Md<pu.length;Md++){var Dd=pu[Md],D1=Dd.toLowerCase(),U1=Dd[0].toUpperCase()+Dd.slice(1);Ws(D1,"on"+U1)}Ws(Cm,"onAnimationEnd"),Ws(Om,"onAnimationIteration"),Ws(Rm,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(Zw,"onTransitionRun"),Ws(Jw,"onTransitionStart"),Ws(Ww,"onTransitionCancel"),Ws(Mm,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function ex(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],h=o.event;o=o.listeners;e:{var f=void 0;if(s)for(var b=o.length-1;0<=b;b--){var w=o[b],E=w.instance,L=w.currentTarget;if(w=w.listener,E!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=L;try{f(h)}catch(Y){bo(Y)}h.currentTarget=null,f=E}else for(b=0;b<o.length;b++){if(w=o[b],E=w.instance,L=w.currentTarget,w=w.listener,E!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=L;try{f(h)}catch(Y){bo(Y)}h.currentTarget=null,f=E}}}}function Ve(e,s){var r=s[jr];r===void 0&&(r=s[jr]=new Set);var o=e+"__bubble";r.has(o)||(tx(s,e,2,!1),r.add(o))}function Ud(e,s,r){var o=0;s&&(o|=4),tx(r,e,o,s)}var ac="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[ac]){e[ac]=!0,_r.forEach(function(r){r!=="selectionchange"&&(z1.has(r)||Ud(r,!1,e),Ud(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[ac]||(s[ac]=!0,Ud("selectionchange",!1,s))}}function tx(e,s,r,o){switch(Cx(s)){case 2:var h=uj;break;case 8:h=dj;break;default:h=Zd}r=h.bind(null,s,r,e),h=void 0,!_||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(s,r,{capture:!0,passive:h}):e.addEventListener(s,r,!0):h!==void 0?e.addEventListener(s,r,{passive:h}):e.addEventListener(s,r,!1)}function Bd(e,s,r,o,h){var f=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var w=o.stateNode.containerInfo;if(w===h)break;if(b===4)for(b=o.return;b!==null;){var E=b.tag;if((E===3||E===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;w!==null;){if(b=jn(w),b===null)return;if(E=b.tag,E===5||E===6||E===26||E===27){o=f=b;continue e}w=w.parentNode}}o=o.return}go(function(){var L=f,Y=Gi(r),ee=[];e:{var V=Dm.get(e);if(V!==void 0){var q=is,fe=e;switch(e){case"keypress":if(rs(r)===0)break e;case"keydown":case"keyup":q=Aw;break;case"focusin":fe="focus",q=Vt;break;case"focusout":fe="blur",q=Vt;break;case"beforeblur":case"afterblur":q=Vt;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Oe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Rw;break;case Cm:case Om:case Rm:q=Nn;break;case Mm:q=Dw;break;case"scroll":case"scrollend":q=fn;break;case"wheel":q=zw;break;case"copy":case"cut":case"paste":q=Xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=dm;break;case"toggle":case"beforetoggle":q=Lw}var _e=(s&4)!==0,st=!_e&&(e==="scroll"||e==="scrollend"),D=_e?V!==null?V+"Capture":null:V;_e=[];for(var C=L,B;C!==null;){var J=C;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||D===null||(J=hn(C,D),J!=null&&_e.push(Sl(C,J,B))),st)break;C=C.return}0<_e.length&&(V=new q(V,fe,null,r,Y),ee.push({event:V,listeners:_e}))}}if((s&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",V&&r!==Ii&&(fe=r.relatedTarget||r.fromElement)&&(jn(fe)||fe[un]))break e;if((q||V)&&(V=Y.window===Y?Y:(V=Y.ownerDocument)?V.defaultView||V.parentWindow:window,q?(fe=r.relatedTarget||r.toElement,q=L,fe=fe?jn(fe):null,fe!==null&&(st=u(fe),_e=fe.tag,fe!==st||_e!==5&&_e!==27&&_e!==6)&&(fe=null)):(q=null,fe=L),q!==fe)){if(_e=ls,J="onMouseLeave",D="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(_e=dm,J="onPointerLeave",D="onPointerEnter",C="pointer"),st=q==null?V:Ze(q),B=fe==null?V:Ze(fe),V=new _e(J,C+"leave",q,r,Y),V.target=st,V.relatedTarget=B,J=null,jn(Y)===L&&(_e=new _e(D,C+"enter",fe,r,Y),_e.target=B,_e.relatedTarget=st,J=_e),st=J,q&&fe)t:{for(_e=B1,D=q,C=fe,B=0,J=D;J;J=_e(J))B++;J=0;for(var we=C;we;we=_e(we))J++;for(;0<B-J;)D=_e(D),B--;for(;0<J-B;)C=_e(C),J--;for(;B--;){if(D===C||C!==null&&D===C.alternate){_e=D;break t}D=_e(D),C=_e(C)}_e=null}else _e=null;q!==null&&sx(ee,V,q,_e,!1),fe!==null&&st!==null&&sx(ee,st,fe,_e,!0)}}e:{if(V=L?Ze(L):window,q=V.nodeName&&V.nodeName.toLowerCase(),q==="select"||q==="input"&&V.type==="file")var Xe=ym;else if(xm(V))if(vm)Xe=Xw;else{Xe=Kw;var me=Gw}else q=V.nodeName,!q||q.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?L&&$i(L.elementType)&&(Xe=ym):Xe=Yw;if(Xe&&(Xe=Xe(e,L))){bm(ee,Xe,r,Y);break e}me&&me(e,V,L),e==="focusout"&&L&&V.type==="number"&&L.memoizedProps.value!=null&&Pi(V,"number",V.value)}switch(me=L?Ze(L):window,e){case"focusin":(xm(me)||me.contentEditable==="true")&&(Cr=me,hu=L,el=null);break;case"focusout":el=hu=Cr=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,km(ee,r,Y);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":km(ee,r,Y)}var De;if(ou)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Ar?pm(e,r)&&(He="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(He="onCompositionStart");He&&(hm&&r.locale!=="ko"&&(Ar||He!=="onCompositionStart"?He==="onCompositionEnd"&&Ar&&(De=lt()):(he=Y,$e="value"in he?he.value:he.textContent,Ar=!0)),me=rc(L,He),0<me.length&&(He=new It(He,e,null,r,Y),ee.push({event:He,listeners:me}),De?He.data=De:(De=gm(r),De!==null&&(He.data=De)))),(De=Pw?qw(e,r):Hw(e,r))&&(He=rc(L,"onBeforeInput"),0<He.length&&(me=new It("onBeforeInput","beforeinput",null,r,Y),ee.push({event:me,listeners:He}),me.data=De)),M1(ee,e,L,r,Y)}ex(ee,s)})}function Sl(e,s,r){return{instance:e,listener:s,currentTarget:r}}function rc(e,s){for(var r=s+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=hn(e,r),h!=null&&o.unshift(Sl(e,h,f)),h=hn(e,s),h!=null&&o.push(Sl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function B1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sx(e,s,r,o,h){for(var f=s._reactName,b=[];r!==null&&r!==o;){var w=r,E=w.alternate,L=w.stateNode;if(w=w.tag,E!==null&&E===o)break;w!==5&&w!==26&&w!==27||L===null||(E=L,h?(L=hn(r,f),L!=null&&b.unshift(Sl(r,L,E))):h||(L=hn(r,f),L!=null&&b.push(Sl(r,L,E)))),r=r.return}b.length!==0&&e.push({event:s,listeners:b})}var L1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function nx(e){return(typeof e=="string"?e:""+e).replace(L1,`
`).replace(V1,"")}function ax(e,s){return s=nx(s),nx(e)===s}function tt(e,s,r,o,h,f){switch(r){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Js(e,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Js(e,""+o);break;case"className":Sr(e,"class",o);break;case"tabIndex":Sr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(e,r,o);break;case"style":Hi(e,o,f);break;case"data":if(s!=="object"){Sr(e,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=kr(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(s!=="input"&&tt(e,s,"name",h.name,h,null),tt(e,s,"formEncType",h.formEncType,h,null),tt(e,s,"formMethod",h.formMethod,h,null),tt(e,s,"formTarget",h.formTarget,h,null)):(tt(e,s,"encType",h.encType,h,null),tt(e,s,"method",h.method,h,null),tt(e,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=kr(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=js);break;case"onScroll":o!=null&&Ve("scroll",e);break;case"onScrollEnd":o!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=kr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),La(e,"popover",o);break;case"xlinkActuate":Fs(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Fs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Fs(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Fs(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Fs(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Fs(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Fs(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Fs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Fs(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":La(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=iu.get(r)||r,La(e,r,o))}}function Ld(e,s,r,o,h,f){switch(r){case"style":Hi(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Js(e,o):(typeof o=="number"||typeof o=="bigint")&&Js(e,""+o);break;case"onScroll":o!=null&&Ve("scroll",e);break;case"onScrollEnd":o!=null&&Ve("scrollend",e);break;case"onClick":o!=null&&(e.onclick=js);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bi.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),s=r.slice(2,h?r.length-7:void 0),f=e[Zt]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(s,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(s,o,h);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):La(e,r,o)}}}function Xt(e,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var o=!1,h=!1,f;for(f in r)if(r.hasOwnProperty(f)){var b=r[f];if(b!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(e,s,f,b,r,null)}}h&&tt(e,s,"srcSet",r.srcSet,r,null),o&&tt(e,s,"src",r.src,r,null);return;case"input":Ve("invalid",e);var w=f=b=h=null,E=null,L=null;for(o in r)if(r.hasOwnProperty(o)){var Y=r[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":b=Y;break;case"checked":E=Y;break;case"defaultChecked":L=Y;break;case"value":f=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:tt(e,s,o,Y,r,null)}}ho(e,f,w,E,L,b,h,!1);return;case"select":Ve("invalid",e),o=b=f=null;for(h in r)if(r.hasOwnProperty(h)&&(w=r[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":b=w;break;case"multiple":o=w;default:tt(e,s,h,w,r,null)}s=f,r=b,e.multiple=!!o,s!=null?ta(e,!!o,s,!1):r!=null&&ta(e,!!o,r,!0);return;case"textarea":Ve("invalid",e),f=h=o=null;for(b in r)if(r.hasOwnProperty(b)&&(w=r[b],w!=null))switch(b){case"value":o=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:tt(e,s,b,w,r,null)}ds(e,o,h,f);return;case"option":for(E in r)if(r.hasOwnProperty(E)&&(o=r[E],o!=null))switch(E){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:tt(e,s,E,o,r,null)}return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(o=0;o<Nl.length;o++)Ve(Nl[o],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(o=r[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(e,s,L,o,r,null)}return;default:if($i(s)){for(Y in r)r.hasOwnProperty(Y)&&(o=r[Y],o!==void 0&&Ld(e,s,Y,o,r,void 0));return}}for(w in r)r.hasOwnProperty(w)&&(o=r[w],o!=null&&tt(e,s,w,o,r,null))}function P1(e,s,r,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,w=null,E=null,L=null,Y=null;for(q in r){var ee=r[q];if(r.hasOwnProperty(q)&&ee!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":E=ee;default:o.hasOwnProperty(q)||tt(e,s,q,null,o,ee)}}for(var V in o){var q=o[V];if(ee=r[V],o.hasOwnProperty(V)&&(q!=null||ee!=null))switch(V){case"type":f=q;break;case"name":h=q;break;case"checked":L=q;break;case"defaultChecked":Y=q;break;case"value":b=q;break;case"defaultValue":w=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:q!==ee&&tt(e,s,V,q,o,ee)}}Vi(e,b,w,E,L,Y,f,h);return;case"select":q=b=w=V=null;for(f in r)if(E=r[f],r.hasOwnProperty(f)&&E!=null)switch(f){case"value":break;case"multiple":q=E;default:o.hasOwnProperty(f)||tt(e,s,f,null,o,E)}for(h in o)if(f=o[h],E=r[h],o.hasOwnProperty(h)&&(f!=null||E!=null))switch(h){case"value":V=f;break;case"defaultValue":w=f;break;case"multiple":b=f;default:f!==E&&tt(e,s,h,f,o,E)}s=w,r=b,o=q,V!=null?ta(e,!!r,V,!1):!!o!=!!r&&(s!=null?ta(e,!!r,s,!0):ta(e,!!r,r?[]:"",!1));return;case"textarea":q=V=null;for(w in r)if(h=r[w],r.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(e,s,w,null,o,h)}for(b in o)if(h=o[b],f=r[b],o.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":V=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&tt(e,s,b,h,o,f)}fo(e,V,q);return;case"option":for(var fe in r)if(V=r[fe],r.hasOwnProperty(fe)&&V!=null&&!o.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:tt(e,s,fe,null,o,V)}for(E in o)if(V=o[E],q=r[E],o.hasOwnProperty(E)&&V!==q&&(V!=null||q!=null))switch(E){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:tt(e,s,E,V,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in r)V=r[_e],r.hasOwnProperty(_e)&&V!=null&&!o.hasOwnProperty(_e)&&tt(e,s,_e,null,o,V);for(L in o)if(V=o[L],q=r[L],o.hasOwnProperty(L)&&V!==q&&(V!=null||q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:tt(e,s,L,V,o,q)}return;default:if($i(s)){for(var st in r)V=r[st],r.hasOwnProperty(st)&&V!==void 0&&!o.hasOwnProperty(st)&&Ld(e,s,st,void 0,o,V);for(Y in o)V=o[Y],q=r[Y],!o.hasOwnProperty(Y)||V===q||V===void 0&&q===void 0||Ld(e,s,Y,V,o,q);return}}for(var D in r)V=r[D],r.hasOwnProperty(D)&&V!=null&&!o.hasOwnProperty(D)&&tt(e,s,D,null,o,V);for(ee in o)V=o[ee],q=r[ee],!o.hasOwnProperty(ee)||V===q||V==null&&q==null||tt(e,s,ee,V,o,q)}function rx(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var h=r[o],f=h.transferSize,b=h.initiatorType,w=h.duration;if(f&&w&&rx(b)){for(b=0,w=h.responseEnd,o+=1;o<r.length;o++){var E=r[o],L=E.startTime;if(L>w)break;var Y=E.transferSize,ee=E.initiatorType;Y&&rx(ee)&&(E=E.responseEnd,b+=Y*(E<w?1:(w-L)/(E-L)))}if(--o,s+=8*(f+b)/(h.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vd=null,Pd=null;function ic(e){return e.nodeType===9?e:e.ownerDocument}function ix(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lx(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function qd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hd=null;function H1(){var e=window.event;return e&&e.type==="popstate"?e===Hd?!1:(Hd=e,!0):(Hd=null,!1)}var ox=typeof setTimeout=="function"?setTimeout:void 0,$1=typeof clearTimeout=="function"?clearTimeout:void 0,cx=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof cx<"u"?function(e){return cx.resolve(null).then(e).catch(G1)}:ox;function G1(e){setTimeout(function(){throw e})}function ya(e){return e==="head"}function ux(e,s){var r=s,o=0;do{var h=r.nextSibling;if(e.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(h),ni(s);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Tl(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Tl(r);for(var f=r.firstChild;f;){var b=f.nextSibling,w=f.nodeName;f[Fn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||r.removeChild(f),f=b}}else r==="body"&&Tl(e.ownerDocument.body);r=h}while(r);ni(s)}function dx(e,s){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function $d(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":$d(r),Zn(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function K1(e,s,r,o){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Fn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=$s(e.nextSibling),e===null)break}return null}function Y1(e,s,r){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=$s(e.nextSibling),e===null))return null;return e}function hx(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=$s(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$?"||e.data==="$~"}function Gd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function X1(e,s){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||r.readyState!=="loading")s();else{var o=function(){s(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function $s(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var Kd=null;function fx(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(s===0)return $s(e.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}e=e.nextSibling}return null}function mx(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return e;s--}else r!=="/$"&&r!=="/&"||s++}e=e.previousSibling}return null}function px(e,s,r){switch(s=ic(r),e){case"html":if(e=s.documentElement,!e)throw Error(i(452));return e;case"head":if(e=s.head,!e)throw Error(i(453));return e;case"body":if(e=s.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Tl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Zn(e)}var Is=new Map,gx=new Set;function lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pn=X.d;X.d={f:Q1,r:F1,D:Z1,C:J1,L:W1,m:ej,X:sj,S:tj,M:nj};function Q1(){var e=Pn.f(),s=Jo();return e||s}function F1(e){var s=Jn(e);s!==null&&s.tag===5&&s.type==="form"?Mp(s):Pn.r(e)}var ei=typeof document>"u"?null:document;function xx(e,s,r){var o=ei;if(o&&typeof s=="string"&&s){var h=Lt(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),gx.has(h)||(gx.add(h),e={rel:e,crossOrigin:r,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),Xt(s,"link",e),ht(s),o.head.appendChild(s)))}}function Z1(e){Pn.D(e),xx("dns-prefetch",e,null)}function J1(e,s){Pn.C(e,s),xx("preconnect",e,s)}function W1(e,s,r){Pn.L(e,s,r);var o=ei;if(o&&e&&s){var h='link[rel="preload"][as="'+Lt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Lt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Lt(r.imageSizes)+'"]')):h+='[href="'+Lt(e)+'"]';var f=h;switch(s){case"style":f=ti(e);break;case"script":f=si(e)}Is.has(f)||(e=y({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:e,as:s},r),Is.set(f,e),o.querySelector(h)!==null||s==="style"&&o.querySelector(El(f))||s==="script"&&o.querySelector(kl(f))||(s=o.createElement("link"),Xt(s,"link",e),ht(s),o.head.appendChild(s)))}}function ej(e,s){Pn.m(e,s);var r=ei;if(r&&e){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Lt(o)+'"][href="'+Lt(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=si(e)}if(!Is.has(f)&&(e=y({rel:"modulepreload",href:e},s),Is.set(f,e),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(kl(f)))return}o=r.createElement("link"),Xt(o,"link",e),ht(o),r.head.appendChild(o)}}}function tj(e,s,r){Pn.S(e,s,r);var o=ei;if(o&&e){var h=_n(o).hoistableStyles,f=ti(e);s=s||"default";var b=h.get(f);if(!b){var w={loading:0,preload:null};if(b=o.querySelector(El(f)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},r),(r=Is.get(f))&&Yd(e,r);var E=b=o.createElement("link");ht(E),Xt(E,"link",e),E._p=new Promise(function(L,Y){E.onload=L,E.onerror=Y}),E.addEventListener("load",function(){w.loading|=1}),E.addEventListener("error",function(){w.loading|=2}),w.loading|=4,oc(b,s,o)}b={type:"stylesheet",instance:b,count:1,state:w},h.set(f,b)}}}function sj(e,s){Pn.X(e,s);var r=ei;if(r&&e){var o=_n(r).hoistableScripts,h=si(e),f=o.get(h);f||(f=r.querySelector(kl(h)),f||(e=y({src:e,async:!0},s),(s=Is.get(h))&&Xd(e,s),f=r.createElement("script"),ht(f),Xt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function nj(e,s){Pn.M(e,s);var r=ei;if(r&&e){var o=_n(r).hoistableScripts,h=si(e),f=o.get(h);f||(f=r.querySelector(kl(h)),f||(e=y({src:e,async:!0,type:"module"},s),(s=Is.get(h))&&Xd(e,s),f=r.createElement("script"),ht(f),Xt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function bx(e,s,r,o){var h=(h=ge.current)?lc(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=ti(r.href),r=_n(h).hoistableStyles,o=r.get(s),o||(o={type:"style",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=ti(r.href);var f=_n(h).hoistableStyles,b=f.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=h.querySelector(El(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Is.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Is.set(e,r),f||aj(h,e,r,b.state))),s&&o===null)throw Error(i(528,""));return b}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=si(r),r=_n(h).hoistableScripts,o=r.get(s),o||(o={type:"script",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ti(e){return'href="'+Lt(e)+'"'}function El(e){return'link[rel="stylesheet"]['+e+"]"}function yx(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function aj(e,s,r,o){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=e.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),Xt(s,"link",r),ht(s),e.head.appendChild(s))}function si(e){return'[src="'+Lt(e)+'"]'}function kl(e){return"script[async]"+e}function vx(e,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var o=e.querySelector('style[data-href~="'+Lt(r.href)+'"]');if(o)return s.instance=o,ht(o),o;var h=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ht(o),Xt(o,"style",h),oc(o,r.precedence,e),s.instance=o;case"stylesheet":h=ti(r.href);var f=e.querySelector(El(h));if(f)return s.state.loading|=4,s.instance=f,ht(f),f;o=yx(r),(h=Is.get(h))&&Yd(o,h),f=(e.ownerDocument||e).createElement("link"),ht(f);var b=f;return b._p=new Promise(function(w,E){b.onload=w,b.onerror=E}),Xt(f,"link",o),s.state.loading|=4,oc(f,r.precedence,e),s.instance=f;case"script":return f=si(r.src),(h=e.querySelector(kl(f)))?(s.instance=h,ht(h),h):(o=r,(h=Is.get(f))&&(o=y({},r),Xd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ht(h),Xt(h,"link",o),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,oc(o,r.precedence,e));return s.instance}function oc(e,s,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,b=0;b<o.length;b++){var w=o[b];if(w.dataset.precedence===s)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(e,s.firstChild))}function Yd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Xd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var cc=null;function wx(e,s,r){if(cc===null){var o=new Map,h=cc=new Map;h.set(r,o)}else h=cc,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var f=r[h];if(!(f[Fn]||f[Dt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(s)||"";b=e+b;var w=o.get(b);w?w.push(f):o.set(b,[f])}}return o}function jx(e,s,r){e=e.ownerDocument||e,e.head.insertBefore(r,s==="title"?e.querySelector("head > title"):null)}function rj(e,s,r){if(r===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _x(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ij(e,s,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=ti(o.href),f=s.querySelector(El(h));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=uc.bind(e),s.then(e,e)),r.state.loading|=4,r.instance=f,ht(f);return}f=s.ownerDocument||s,o=yx(o),(h=Is.get(h))&&Yd(o,h),f=f.createElement("link"),ht(f);var b=f;b._p=new Promise(function(w,E){b.onload=w,b.onerror=E}),Xt(f,"link",o),r.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=uc.bind(e),s.addEventListener("load",r),s.addEventListener("error",r))}}var Qd=0;function lj(e,s){return e.stylesheets&&e.count===0&&hc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&hc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+s);0<e.imgBytes&&Qd===0&&(Qd=62500*q1());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qd?50:800)+s);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function uc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dc=null;function hc(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dc=new Map,s.forEach(oj,e),dc=null,uc.call(e))}function oj(e,s){if(!(s.state.loading&4)){var r=dc.get(e);if(r)var o=r.get(null);else{r=new Map,dc.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}h=s.instance,b=h.getAttribute("data-precedence"),f=r.get(b)||o,f===o&&r.set(null,h),r.set(b,h),this.count++,o=uc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var Al={$$typeof:R,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function cj(e,s,r,o,h,f,b,w,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wn(0),this.hiddenUpdates=wn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Nx(e,s,r,o,h,f,b,w,E,L,Y,ee){return e=new cj(e,s,r,b,E,L,Y,ee,w),s=1,f===!0&&(s|=24),f=Ts(3,null,null,s),e.current=f,f.stateNode=e,s=ku(),s.refCount++,e.pooledCache=s,s.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:s},Ru(f),e}function Sx(e){return e?(e=Mr,e):Mr}function Tx(e,s,r,o,h,f){h=Sx(h),o.context===null?o.context=h:o.pendingContext=h,o=oa(s),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=ca(e,o,s),r!==null&&(bs(r,e,s),ll(r,e,s))}function Ex(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Fd(e,s){Ex(e,s),(e=e.alternate)&&Ex(e,s)}function kx(e){if(e.tag===13||e.tag===31){var s=$a(e,67108864);s!==null&&bs(s,e,67108864),Fd(e,67108864)}}function Ax(e){if(e.tag===13||e.tag===31){var s=Os();s=Ui(s);var r=$a(e,s);r!==null&&bs(r,e,s),Fd(e,s)}}var fc=!0;function uj(e,s,r,o){var h=P.T;P.T=null;var f=X.p;try{X.p=2,Zd(e,s,r,o)}finally{X.p=f,P.T=h}}function dj(e,s,r,o){var h=P.T;P.T=null;var f=X.p;try{X.p=8,Zd(e,s,r,o)}finally{X.p=f,P.T=h}}function Zd(e,s,r,o){if(fc){var h=Jd(o);if(h===null)Bd(e,s,o,mc,r),Ox(e,o);else if(fj(h,e,s,r,o))o.stopPropagation();else if(Ox(e,o),s&4&&-1<hj.indexOf(e)){for(;h!==null;){var f=Jn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Us(f.pendingLanes);if(b!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var E=1<<31-ns(b);w.entanglements[1]|=E,b&=~E}xn(f),(Fe&6)===0&&(Fo=ts()+500,_l(0))}}break;case 31:case 13:w=$a(f,2),w!==null&&bs(w,f,2),Jo(),Fd(f,2)}if(f=Jd(o),f===null&&Bd(e,s,o,mc,r),f===h)break;h=f}h!==null&&o.stopPropagation()}else Bd(e,s,o,null,r)}}function Jd(e){return e=Gi(e),Wd(e)}var mc=null;function Wd(e){if(mc=null,e=jn(e),e!==null){var s=u(e);if(s===null)e=null;else{var r=s.tag;if(r===13){if(e=d(s),e!==null)return e;e=null}else if(r===31){if(e=p(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return mc=e,null}function Cx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case Ai:return 2;case qt:return 8;case vs:case gr:return 32;case xr:return 268435456;default:return 32}default:return 32}}var eh=!1,va=null,wa=null,ja=null,Cl=new Map,Ol=new Map,_a=[],hj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ox(e,s){switch(e){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(s.pointerId)}}function Rl(e,s,r,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:s,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},s!==null&&(s=Jn(s),s!==null&&kx(s)),e):(e.eventSystemFlags|=o,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function fj(e,s,r,o,h){switch(s){case"focusin":return va=Rl(va,e,s,r,o,h),!0;case"dragenter":return wa=Rl(wa,e,s,r,o,h),!0;case"mouseover":return ja=Rl(ja,e,s,r,o,h),!0;case"pointerover":var f=h.pointerId;return Cl.set(f,Rl(Cl.get(f)||null,e,s,r,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Ol.set(f,Rl(Ol.get(f)||null,e,s,r,o,h)),!0}return!1}function Rx(e){var s=jn(e.target);if(s!==null){var r=u(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){e.blockedOn=s,wr(e.priority,function(){Ax(r)});return}}else if(s===31){if(s=p(r),s!==null){e.blockedOn=s,wr(e.priority,function(){Ax(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Jd(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Ii=o,r.target.dispatchEvent(o),Ii=null}else return s=Jn(r),s!==null&&kx(s),e.blockedOn=r,!1;s.shift()}return!0}function Mx(e,s,r){pc(e)&&r.delete(s)}function mj(){eh=!1,va!==null&&pc(va)&&(va=null),wa!==null&&pc(wa)&&(wa=null),ja!==null&&pc(ja)&&(ja=null),Cl.forEach(Mx),Ol.forEach(Mx)}function gc(e,s){e.blockedOn===s&&(e.blockedOn=null,eh||(eh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mj)))}var xc=null;function Dx(e){xc!==e&&(xc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xc===e&&(xc=null);for(var s=0;s<e.length;s+=3){var r=e[s],o=e[s+1],h=e[s+2];if(typeof o!="function"){if(Wd(o||r)===null)continue;break}var f=Jn(r);f!==null&&(e.splice(s,3),s-=3,Ju(f,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function ni(e){function s(E){return gc(E,e)}va!==null&&gc(va,e),wa!==null&&gc(wa,e),ja!==null&&gc(ja,e),Cl.forEach(s),Ol.forEach(s);for(var r=0;r<_a.length;r++){var o=_a[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<_a.length&&(r=_a[0],r.blockedOn===null);)Rx(r),r.blockedOn===null&&_a.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],f=r[o+1],b=h[Zt]||null;if(typeof f=="function")b||Dx(r);else if(b){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[Zt]||null)w=b.formAction;else if(Wd(h)!==null)continue}else w=b.action;typeof w=="function"?r[o+1]=w:(r.splice(o,3),o-=3),Dx(r)}}}function Ux(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return h=b})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function th(e){this._internalRoot=e}bc.prototype.render=th.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,o=Os();Tx(r,o,e,s,null,null)},bc.prototype.unmount=th.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Tx(e.current,2,null,e,null,null),Jo(),s[un]=null}};function bc(e){this._internalRoot=e}bc.prototype.unstable_scheduleHydration=function(e){if(e){var s=oo();e={blockedOn:null,target:e,priority:s};for(var r=0;r<_a.length&&s!==0&&s<_a[r].priority;r++);_a.splice(r,0,e),r===0&&Rx(e)}};var zx=t.version;if(zx!=="19.2.0")throw Error(i(527,zx,"19.2.0"));X.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(s),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var pj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{on=yc.inject(pj),Ke=yc}catch{}}return Dl.createRoot=function(e,s){if(!c(e))throw Error(i(299));var r=!1,o="",h=$p,f=Ip,b=Gp;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=Nx(e,1,!1,null,null,r,o,null,h,f,b,Ux),e[un]=s.current,zd(e),new th(s)},Dl.hydrateRoot=function(e,s,r){if(!c(e))throw Error(i(299));var o=!1,h="",f=$p,b=Ip,w=Gp,E=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.formState!==void 0&&(E=r.formState)),s=Nx(e,1,!0,s,r??null,o,h,E,f,b,w,Ux),s.context=Sx(null),r=s.current,o=Os(),o=Ui(o),h=oa(o),h.callback=null,ca(r,h,o),r=o,s.current.lanes=r,ws(s,r),xn(s),e[un]=s.current,zd(e),new bc(s)},Dl.version="19.2.0",Dl}var Kx;function kj(){if(Kx)return ah.exports;Kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ah.exports=Ej(),ah.exports}var Aj=kj();const Cj=xf(Aj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,i)=>i?i.toUpperCase():a.toLowerCase()),Yx=n=>{const t=Rj(n);return t.charAt(0).toUpperCase()+t.slice(1)},Vb=(...n)=>n.filter((t,a,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===a).join(" ").trim(),Mj=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=A.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...p},m)=>A.createElement("svg",{ref:m,...Dj,width:t,height:t,stroke:n,strokeWidth:i?Number(a)*24/Number(t):a,className:Vb("lucide",c),...!u&&!Mj(p)&&{"aria-hidden":"true"},...p},[...d.map(([g,x])=>A.createElement(g,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(n,t)=>{const a=A.forwardRef(({className:i,...c},u)=>A.createElement(Uj,{ref:u,iconNode:t,className:Vb(`lucide-${Oj(Yx(n))}`,`lucide-${n}`,i),...c}));return a.displayName=Yx(n),a};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Pb=Ue("arrow-right",zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Lj=Ue("bell",Bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Pj=Ue("bold",Vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Qc=Ue("book-open",qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$j=Ue("briefcase",Hj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xx=Ue("chevron-down",Ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gi=Ue("circle-check-big",Gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yj=Ue("circle-play",Kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Qx=Ue("circle-plus",Xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qb=Ue("clock",Qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Hb=Ue("coins",Fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fc=Ue("compass",Zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$b=Ue("earth",Jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],e_=Ue("grip-vertical",Wj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ib=Ue("heart",t_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gb=Ue("info",s_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],yf=Ue("lightbulb",n_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],r_=Ue("list",a_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Uh=Ue("mail",i_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ln=Ue("map-pin",l_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Kb=Ue("map",o_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Yb=Ue("menu",c_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],d_=Ue("puzzle",u_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],f_=Ue("quote",h_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],vf=Ue("rocket",m_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],oh=Ue("scroll",p_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wf=Ue("send",g_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Xb=Ue("shield",x_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],pr=Ue("smartphone",b_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Hn=Ue("sparkles",y_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zl=Ue("square-check-big",v_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j_=Ue("square-pen",w_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],to=Ue("star",__);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],S_=Ue("tag",N_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zc=Ue("target",T_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],k_=Ue("trash-2",E_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],C_=Ue("user",A_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Jc=Ue("users",O_);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lc=Ue("x",R_);var zh=function(n,t){return zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[c]=i[c])},zh(n,t)};function Qb(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zh(n,t);function a(){this.constructor=n}n.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var Vc=function(){return Vc=Object.assign||function(t){for(var a,i=1,c=arguments.length;i<c;i++){a=arguments[i];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Vc.apply(this,arguments)};function _i(n,t){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(n);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(n,i[c])&&(a[i[c]]=n[i[c]]);return a}function Fb(n,t,a,i){var c=arguments.length,u=c<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,a,i);else for(var p=n.length-1;p>=0;p--)(d=n[p])&&(u=(c<3?d(u):c>3?d(t,a,u):d(t,a))||u);return c>3&&u&&Object.defineProperty(t,a,u),u}function Zb(n,t){return function(a,i){t(a,i,n)}}function Jb(n,t,a,i,c,u){function d(O){if(O!==void 0&&typeof O!="function")throw new TypeError("Function expected");return O}for(var p=i.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!t&&n?i.static?n:n.prototype:null,x=t||(g?Object.getOwnPropertyDescriptor(g,i.name):{}),y,v=!1,j=a.length-1;j>=0;j--){var N={};for(var S in i)N[S]=S==="access"?{}:i[S];for(var S in i.access)N.access[S]=i.access[S];N.addInitializer=function(O){if(v)throw new TypeError("Cannot add initializers after decoration has completed");u.push(d(O||null))};var k=(0,a[j])(p==="accessor"?{get:x.get,set:x.set}:x[m],N);if(p==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(y=d(k.get))&&(x.get=y),(y=d(k.set))&&(x.set=y),(y=d(k.init))&&c.unshift(y)}else(y=d(k))&&(p==="field"?c.unshift(y):x[m]=y)}g&&Object.defineProperty(g,i.name,x),v=!0}function Wb(n,t,a){for(var i=arguments.length>2,c=0;c<t.length;c++)a=i?t[c].call(n,a):t[c].call(n);return i?a:void 0}function ey(n){return typeof n=="symbol"?n:"".concat(n)}function ty(n,t,a){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:a?"".concat(a," ",t):t})}function sy(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function pe(n,t,a,i){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function p(x){try{g(i.next(x))}catch(y){d(y)}}function m(x){try{g(i.throw(x))}catch(y){d(y)}}function g(x){x.done?u(x.value):c(x.value).then(p,m)}g((i=i.apply(n,t||[])).next())})}function ny(n,t){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,c,u,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=p(0),d.throw=p(1),d.return=p(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(g){return function(x){return m([g,x])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(a=0)),a;)try{if(i=1,c&&(u=g[0]&2?c.return:g[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,g[1])).done)return u;switch(c=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,c=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=t.call(n,a)}catch(x){g=[6,x],c=0}finally{i=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Wc=Object.create?(function(n,t,a,i){i===void 0&&(i=a);var c=Object.getOwnPropertyDescriptor(t,a);(!c||("get"in c?!t.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(n,i,c)}):(function(n,t,a,i){i===void 0&&(i=a),n[i]=t[a]});function ay(n,t){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(t,a)&&Wc(t,n,a)}function Pc(n){var t=typeof Symbol=="function"&&Symbol.iterator,a=t&&n[t],i=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function jf(n,t){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),c,u=[],d;try{for(;(t===void 0||t-- >0)&&!(c=i.next()).done;)u.push(c.value)}catch(p){d={error:p}}finally{try{c&&!c.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u}function ry(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(jf(arguments[t]));return n}function iy(){for(var n=0,t=0,a=arguments.length;t<a;t++)n+=arguments[t].length;for(var i=Array(n),c=0,t=0;t<a;t++)for(var u=arguments[t],d=0,p=u.length;d<p;d++,c++)i[c]=u[d];return i}function ly(n,t,a){if(a||arguments.length===2)for(var i=0,c=t.length,u;i<c;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return n.concat(u||Array.prototype.slice.call(t))}function vi(n){return this instanceof vi?(this.v=n,this):new vi(n)}function oy(n,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=a.apply(n,t||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),c[Symbol.asyncIterator]=function(){return this},c;function d(j){return function(N){return Promise.resolve(N).then(j,y)}}function p(j,N){i[j]&&(c[j]=function(S){return new Promise(function(k,O){u.push([j,S,k,O])>1||m(j,S)})},N&&(c[j]=N(c[j])))}function m(j,N){try{g(i[j](N))}catch(S){v(u[0][3],S)}}function g(j){j.value instanceof vi?Promise.resolve(j.value.v).then(x,y):v(u[0][2],j)}function x(j){m("next",j)}function y(j){m("throw",j)}function v(j,N){j(N),u.shift(),u.length&&m(u[0][0],u[0][1])}}function cy(n){var t,a;return t={},i("next"),i("throw",function(c){throw c}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(c,u){t[c]=n[c]?function(d){return(a=!a)?{value:vi(n[c](d)),done:!1}:u?u(d):d}:u}}function uy(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],a;return t?t.call(n):(n=typeof Pc=="function"?Pc(n):n[Symbol.iterator](),a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a);function i(u){a[u]=n[u]&&function(d){return new Promise(function(p,m){d=n[u](d),c(p,m,d.done,d.value)})}}function c(u,d,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},d)}}function dy(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var M_=Object.create?(function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}):function(n,t){n.default=t},Bh=function(n){return Bh=Object.getOwnPropertyNames||function(t){var a=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[a.length]=i);return a},Bh(n)};function hy(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var a=Bh(n),i=0;i<a.length;i++)a[i]!=="default"&&Wc(t,n,a[i]);return M_(t,n),t}function fy(n){return n&&n.__esModule?n:{default:n}}function my(n,t,a,i){if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?i:a==="a"?i.call(n):i?i.value:t.get(n)}function py(n,t,a,i,c){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!c:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?c.call(n,a):c?c.value=a:t.set(n,a),a}function gy(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function xy(n,t,a){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,c;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],a&&(c=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");c&&(i=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),n.stack.push({value:t,dispose:i,async:a})}else a&&n.stack.push({async:!0});return t}var D_=typeof SuppressedError=="function"?SuppressedError:function(n,t,a){var i=new Error(a);return i.name="SuppressedError",i.error=n,i.suppressed=t,i};function by(n){function t(u){n.error=n.hasError?new D_(u,n.error,"An error was suppressed during disposal."):u,n.hasError=!0}var a,i=0;function c(){for(;a=n.stack.pop();)try{if(!a.async&&i===1)return i=0,n.stack.push(a),Promise.resolve().then(c);if(a.dispose){var u=a.dispose.call(a.value);if(a.async)return i|=2,Promise.resolve(u).then(c,function(d){return t(d),c()})}else i|=1}catch(d){t(d)}if(i===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return c()}function yy(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,i,c,u,d){return i?t?".jsx":".js":c&&(!u||!d)?a:c+u+"."+d.toLowerCase()+"js"}):n}const U_={__extends:Qb,__assign:Vc,__rest:_i,__decorate:Fb,__param:Zb,__esDecorate:Jb,__runInitializers:Wb,__propKey:ey,__setFunctionName:ty,__metadata:sy,__awaiter:pe,__generator:ny,__createBinding:Wc,__exportStar:ay,__values:Pc,__read:jf,__spread:ry,__spreadArrays:iy,__spreadArray:ly,__await:vi,__asyncGenerator:oy,__asyncDelegator:cy,__asyncValues:uy,__makeTemplateObject:dy,__importStar:hy,__importDefault:fy,__classPrivateFieldGet:my,__classPrivateFieldSet:py,__classPrivateFieldIn:gy,__addDisposableResource:xy,__disposeResources:by,__rewriteRelativeImportExtension:yy},z_=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:xy,get __assign(){return Vc},__asyncDelegator:cy,__asyncGenerator:oy,__asyncValues:uy,__await:vi,__awaiter:pe,__classPrivateFieldGet:my,__classPrivateFieldIn:gy,__classPrivateFieldSet:py,__createBinding:Wc,__decorate:Fb,__disposeResources:by,__esDecorate:Jb,__exportStar:ay,__extends:Qb,__generator:ny,__importDefault:fy,__importStar:hy,__makeTemplateObject:dy,__metadata:sy,__param:Zb,__propKey:ey,__read:jf,__rest:_i,__rewriteRelativeImportExtension:yy,__runInitializers:Wb,__setFunctionName:ty,__spread:ry,__spreadArray:ly,__spreadArrays:iy,__values:Pc,default:U_},Symbol.toStringTag,{value:"Module"})),B_=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class _f extends Error{constructor(t,a="FunctionsError",i){super(t),this.name=a,this.context=i}}class L_ extends _f{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fx extends _f{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Zx extends _f{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Lh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Lh||(Lh={}));class V_{constructor(t,{headers:a={},customFetch:i,region:c=Lh.Any}={}){this.url=t,this.headers=a,this.region=c,this.fetch=B_(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return pe(this,arguments,void 0,function*(a,i={}){var c;let u,d;try{const{headers:p,method:m,body:g,signal:x,timeout:y}=i;let v={},{region:j}=i;j||(j=this.region);const N=new URL(`${this.url}/${a}`);j&&j!=="any"&&(v["x-region"]=j,N.searchParams.set("forceFunctionRegion",j));let S;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",S=g):typeof g=="string"?(v["Content-Type"]="text/plain",S=g):typeof FormData<"u"&&g instanceof FormData?S=g:(v["Content-Type"]="application/json",S=JSON.stringify(g)):S=g;let k=x;y&&(d=new AbortController,u=setTimeout(()=>d.abort(),y),x?(k=d.signal,x.addEventListener("abort",()=>d.abort())):k=d.signal);const O=yield this.fetch(N.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),p),body:S,signal:k}).catch(F=>{throw new L_(F)}),U=O.headers.get("x-relay-error");if(U&&U==="true")throw new Fx(O);if(!O.ok)throw new Zx(O);let R=((c=O.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),Q;return R==="application/json"?Q=yield O.json():R==="application/octet-stream"||R==="application/pdf"?Q=yield O.blob():R==="text/event-stream"?Q=O:R==="multipart/form-data"?Q=yield O.formData():Q=yield O.text(),{data:Q,error:null,response:O}}catch(p){return{data:null,error:p,response:p instanceof Zx||p instanceof Fx?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var Wt={};const Ni=bj(z_);var vc={},wc={},jc={},_c={},Nc={},Sc={},Jx;function vy(){if(Jx)return Sc;Jx=1,Object.defineProperty(Sc,"__esModule",{value:!0});class n extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return Sc.default=n,Sc}var Wx;function wy(){if(Wx)return Nc;Wx=1,Object.defineProperty(Nc,"__esModule",{value:!0});const t=Ni.__importDefault(vy());class a{constructor(c){var u,d;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(d=c.isMaybeSingle)!==null&&d!==void 0?d:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,x,y,v;let j=null,N=null,S=null,k=m.status,O=m.statusText;if(m.ok){if(this.method!=="HEAD"){const F=await m.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?N=F:N=JSON.parse(F))}const R=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),Q=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");R&&Q&&Q.length>1&&(S=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(j={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,S=null,k=406,O="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const R=await m.text();try{j=JSON.parse(R),Array.isArray(j)&&m.status===404&&(N=[],j=null,k=200,O="OK")}catch{m.status===404&&R===""?(k=204,O="No Content"):j={message:R}}if(j&&this.isMaybeSingle&&(!((v=j==null?void 0:j.details)===null||v===void 0)&&v.includes("0 rows"))&&(j=null,k=200,O="OK"),j&&this.shouldThrowOnError)throw new t.default(j)}return{error:j,data:N,count:S,status:k,statusText:O}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,x,y,v,j,N;let S="";const k=m==null?void 0:m.cause;if(k){const O=(g=k==null?void 0:k.message)!==null&&g!==void 0?g:"",U=(x=k==null?void 0:k.code)!==null&&x!==void 0?x:"";S=`${(y=m==null?void 0:m.name)!==null&&y!==void 0?y:"FetchError"}: ${m==null?void 0:m.message}`,S+=`

Caused by: ${(v=k==null?void 0:k.name)!==null&&v!==void 0?v:"Error"}: ${O}`,U&&(S+=` (${U})`),k!=null&&k.stack&&(S+=`
${k.stack}`)}else S=(j=m==null?void 0:m.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(N=m==null?void 0:m.name)!==null&&N!==void 0?N:"FetchError"}: ${m==null?void 0:m.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}}return Nc.default=a,Nc}var e0;function jy(){if(e0)return _c;e0=1,Object.defineProperty(_c,"__esModule",{value:!0});const t=Ni.__importDefault(wy());class a extends t.default{select(c){let u=!1;const d=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:d,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",x=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${x?`${x},`:""}${c}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:d,referencedTable:p=d}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:d=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var x;const y=[c?"analyze":null,u?"verbose":null,d?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${v}"; options=${y};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return _c.default=a,_c}var t0;function Nf(){if(t0)return jc;t0=1,Object.defineProperty(jc,"__esModule",{value:!0});const t=Ni.__importDefault(jy()),a=new RegExp("[,()]");class i extends t.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}regexMatch(u,d){return this.url.searchParams.append(u,`match.${d}`),this}regexIMatch(u,d){return this.url.searchParams.append(u,`imatch.${d}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}isDistinct(u,d){return this.url.searchParams.append(u,`isdistinct.${d}`),this}in(u,d){const p=Array.from(new Set(d)).map(m=>typeof m=="string"&&a.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const x=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${x}.${d}`),this}match(u){return Object.entries(u).forEach(([d,p])=>{this.url.searchParams.append(d,`eq.${p}`)}),this}not(u,d,p){return this.url.searchParams.append(u,`not.${d}.${p}`),this}or(u,{foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,d,p){return this.url.searchParams.append(u,`${d}.${p}`),this}}return jc.default=i,jc}var s0;function _y(){if(s0)return wc;s0=1,Object.defineProperty(wc,"__esModule",{value:!0});const t=Ni.__importDefault(Nf());class a{constructor(c,{headers:u={},schema:d,fetch:p}){this.url=c,this.headers=new Headers(u),this.schema=d,this.fetch=p}select(c,u){const{head:d=!1,count:p}=u??{},m=d?"HEAD":"GET";let g=!1;const x=(c??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",x),p&&this.headers.append("Prefer",`count=${p}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:d=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(g.length>0){const x=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:d=!1,count:p,defaultToNull:m=!0}={}){var g;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((v,j)=>v.concat(Object.keys(j)),[]);if(y.length>0){const v=[...new Set(y)].map(j=>`"${j}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var d;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:c}={}){var u;const d="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return wc.default=a,wc}var n0;function P_(){if(n0)return vc;n0=1,Object.defineProperty(vc,"__esModule",{value:!0});const n=Ni,t=n.__importDefault(_y()),a=n.__importDefault(Nf());class i{constructor(u,{headers:d={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(d),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL(`${this.url}/${u}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:m=!1,count:g}={}){var x;let y;const v=new URL(`${this.url}/rpc/${u}`);let j;p||m?(y=p?"HEAD":"GET",Object.entries(d).filter(([S,k])=>k!==void 0).map(([S,k])=>[S,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([S,k])=>{v.searchParams.append(S,k)})):(y="POST",j=d);const N=new Headers(this.headers);return g&&N.set("Prefer",`count=${g}`),new a.default({method:y,url:v,headers:N,schema:this.schemaName,body:j,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return vc.default=i,vc}var a0;function q_(){if(a0)return Wt;a0=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const n=Ni,t=n.__importDefault(P_());Wt.PostgrestClient=t.default;const a=n.__importDefault(_y());Wt.PostgrestQueryBuilder=a.default;const i=n.__importDefault(Nf());Wt.PostgrestFilterBuilder=i.default;const c=n.__importDefault(jy());Wt.PostgrestTransformBuilder=c.default;const u=n.__importDefault(wy());Wt.PostgrestBuilder=u.default;const d=n.__importDefault(vy());return Wt.PostgrestError=d.default,Wt.default={PostgrestClient:t.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:d.default},Wt}var Ny=q_();const Sy=xf(Ny),H_=xj({__proto__:null,default:Sy},[Ny]),{PostgrestClient:$_,PostgrestQueryBuilder:yA,PostgrestFilterBuilder:vA,PostgrestTransformBuilder:wA,PostgrestBuilder:jA,PostgrestError:_A}=Sy||H_;class I_{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const i=a.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const i=this.getWebSocketConstructor();return new i(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const G_="2.84.0",K_=`realtime-js/${G_}`,Ty="1.0.0",Y_="2.0.0",r0=Ty,Vh=1e4,X_=1e3,Q_=100;var lr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(lr||(lr={}));var zt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(zt||(zt={}));var rn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(rn||(rn={}));var Ph;(function(n){n.websocket="websocket"})(Ph||(Ph={}));var or;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(or||(or={}));class F_{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(t,a){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return a(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var a;return this._isArrayBuffer((a=t.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var a,i,c,u;const d=t.topic,p=(a=t.ref)!==null&&a!==void 0?a:"",m=(i=t.join_ref)!==null&&i!==void 0?i:"",g=t.payload.event,x=(u=(c=t.payload)===null||c===void 0?void 0:c.payload)!==null&&u!==void 0?u:new ArrayBuffer(0),y=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+g.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let j=new DataView(v),N=0;j.setUint8(N++,this.KINDS.userBroadcastPush),j.setUint8(N++,m.length),j.setUint8(N++,p.length),j.setUint8(N++,d.length),j.setUint8(N++,g.length),j.setUint8(N++,this.BINARY_ENCODING),Array.from(m,k=>j.setUint8(N++,k.charCodeAt(0))),Array.from(p,k=>j.setUint8(N++,k.charCodeAt(0))),Array.from(d,k=>j.setUint8(N++,k.charCodeAt(0))),Array.from(g,k=>j.setUint8(N++,k.charCodeAt(0)));var S=new Uint8Array(v.byteLength+x.byteLength);return S.set(new Uint8Array(v),0),S.set(new Uint8Array(x),v.byteLength),S.buffer}_encodeJsonUserBroadcastPush(t){var a,i,c,u;const d=t.topic,p=(a=t.ref)!==null&&a!==void 0?a:"",m=(i=t.join_ref)!==null&&i!==void 0?i:"",g=t.payload.event,x=(u=(c=t.payload)===null||c===void 0?void 0:c.payload)!==null&&u!==void 0?u:{},v=new TextEncoder().encode(JSON.stringify(x)).buffer,j=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+g.length,N=new ArrayBuffer(this.HEADER_LENGTH+j);let S=new DataView(N),k=0;S.setUint8(k++,this.KINDS.userBroadcastPush),S.setUint8(k++,m.length),S.setUint8(k++,p.length),S.setUint8(k++,d.length),S.setUint8(k++,g.length),S.setUint8(k++,this.JSON_ENCODING),Array.from(m,U=>S.setUint8(k++,U.charCodeAt(0))),Array.from(p,U=>S.setUint8(k++,U.charCodeAt(0))),Array.from(d,U=>S.setUint8(k++,U.charCodeAt(0))),Array.from(g,U=>S.setUint8(k++,U.charCodeAt(0)));var O=new Uint8Array(N.byteLength+v.byteLength);return O.set(new Uint8Array(N),0),O.set(new Uint8Array(v),N.byteLength),O.buffer}decode(t,a){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return a(i)}if(typeof t=="string"){const i=JSON.parse(t),[c,u,d,p,m]=i;return a({join_ref:c,ref:u,topic:d,event:p,payload:m})}return a({})}_binaryDecode(t){const a=new DataView(t),i=a.getUint8(0),c=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,a,c)}}_decodeUserBroadcast(t,a,i){const c=a.getUint8(1),u=a.getUint8(2),d=a.getUint8(3),p=a.getUint8(4);let m=this.HEADER_LENGTH+4;const g=i.decode(t.slice(m,m+c));m=m+c;const x=i.decode(t.slice(m,m+u));m=m+u;const y=i.decode(t.slice(m,m+d));m=m+d;const v=t.slice(m,t.byteLength),j=p===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,N={type:this.BROADCAST_EVENT,event:x,payload:j};return d>0&&(N.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var a;return t instanceof ArrayBuffer||((a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}}class Ey{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(it||(it={}));const i0=(n,t,a={})=>{var i;const c=(i=a.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=Z_(d,n,t,c),u),{}):{}},Z_=(n,t,a,i)=>{const c=t.find(p=>p.name===n),u=c==null?void 0:c.type,d=a[n];return u&&!i.includes(u)?ky(u,d):qh(d)},ky=(n,t)=>{if(n.charAt(0)==="_"){const a=n.slice(1,n.length);return t2(t,a)}switch(n){case it.bool:return J_(t);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return W_(t);case it.json:case it.jsonb:return e2(t);case it.timestamp:return s2(t);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return qh(t);default:return qh(t)}},qh=n=>n,J_=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},W_=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},e2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},t2=(n,t)=>{if(typeof n!="string")return n;const a=n.length-1,i=n[a];if(n[0]==="{"&&i==="}"){let u;const d=n.slice(1,a);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>ky(t,p))}return n},s2=n=>typeof n=="string"?n.replace(" ","T"):n,Ay=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ch{constructor(t,a,i={},c=Vh){this.channel=t,this.event=a,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var i;return this._hasReceived(t)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var l0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(l0||(l0={}));class Vl{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vl.syncState(this.state,c,u,d),this.pendingDiffs.forEach(m=>{this.state=Vl.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Vl.syncDiff(this.state,c,u,d),p())}),this.onJoin((c,u,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:d})}),this.onLeave((c,u,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,i,c){const u=this.cloneDeep(t),d=this.transformState(a),p={},m={};return this.map(u,(g,x)=>{d[g]||(m[g]=x)}),this.map(d,(g,x)=>{const y=u[g];if(y){const v=x.map(k=>k.presence_ref),j=y.map(k=>k.presence_ref),N=x.filter(k=>j.indexOf(k.presence_ref)<0),S=y.filter(k=>v.indexOf(k.presence_ref)<0);N.length>0&&(p[g]=N),S.length>0&&(m[g]=S)}else p[g]=x}),this.syncDiff(u,{joins:p,leaves:m},i,c)}static syncDiff(t,a,i,c){const{joins:u,leaves:d}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var g;const x=(g=t[p])!==null&&g!==void 0?g:[];if(t[p]=this.cloneDeep(m),x.length>0){const y=t[p].map(j=>j.presence_ref),v=x.filter(j=>y.indexOf(j.presence_ref)<0);t[p].unshift(...v)}i(p,x,m)}),this.map(d,(p,m)=>{let g=t[p];if(!g)return;const x=m.map(y=>y.presence_ref);g=g.filter(y=>x.indexOf(y.presence_ref)<0),t[p]=g,c(p,g,m),g.length===0&&delete t[p]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(i=>a(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,i)=>{const c=t[i];return"metas"in c?a[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[i]=c,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var o0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(o0||(o0={}));var Pl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Pl||(Pl={}));var qn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(qn||(qn={}));class Sf{constructor(t,a={config:{}},i){var c,u;if(this.topic=t,this.params=a,this.socket=i,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new ch(this,rn.join,this.params,this.timeout),this.rejoinTimer=new Ey(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new Vl(this),this.broadcastEndpointURL=Ay(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var i,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:d,presence:p,private:m}}=this.params,g=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(j=>j.filter))!==null&&c!==void 0?c:[],x=!!this.bindings[Pl.PRESENCE]&&this.bindings[Pl.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,y={},v={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(qn.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(qn.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:j})=>{var N;if(this.socket.setAuth(),j===void 0){t==null||t(qn.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(N=S==null?void 0:S.length)!==null&&N!==void 0?N:0,O=[];for(let U=0;U<k;U++){const R=S[U],{filter:{event:Q,schema:F,table:te,filter:H}}=R,M=j&&j[U];if(M&&M.event===Q&&M.schema===F&&M.table===te&&M.filter===H)O.push(Object.assign(Object.assign({},R),{id:M.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(qn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,t&&t(qn.SUBSCRIBED);return}}).receive("error",j=>{this.state=zt.errored,t==null||t(qn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,i){return this.state===zt.joined&&t===Pl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,i)}async httpSend(t,a,i={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:a,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(c=i.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(t,a={}){var i,c;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,m;const g=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new ch(this,rn.leave,{},t),i.receive("ok",()=>{a(),c("ok")}).receive("timeout",()=>{a(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,a,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),d=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:c.signal}));return clearTimeout(u),d}_push(t,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ch(this,t,a,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Q_){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,i){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,i){var c,u;const d=t.toLocaleLowerCase(),{close:p,error:m,leave:g,join:x}=rn;if(i&&[p,m,g,x].indexOf(d)>=0&&i!==this._joinRef())return;let v=this._onMessage(d,a,i);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(j=>{var N,S,k;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((k=(S=j.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===d}).map(j=>j.callback(v,i)):(u=this.bindings[d])===null||u===void 0||u.filter(j=>{var N,S,k,O,U,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in j){const Q=j.id,F=(N=j.filter)===null||N===void 0?void 0:N.event;return Q&&((S=a.ids)===null||S===void 0?void 0:S.includes(Q))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((k=a.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const Q=(U=(O=j==null?void 0:j.filter)===null||O===void 0?void 0:O.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return Q==="*"||Q===((R=a==null?void 0:a.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===d}).map(j=>{if(typeof v=="object"&&"ids"in v){const N=v.data,{schema:S,table:k,commit_timestamp:O,type:U,errors:R}=N;v=Object.assign(Object.assign({},{schema:S,table:k,commit_timestamp:O,eventType:U,new:{},old:{},errors:R}),this._getPayloadRecords(N))}j.callback(v,i)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,i){const c=t.toLocaleLowerCase(),u={type:c,filter:a,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(t,a){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Sf.isEqual(c.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const i in t)if(t[i]!==a[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rn.close,{},t)}_onError(t){this._on(rn.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=i0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=i0(t.columns,t.old_record)),a}}const uh=()=>{},Tc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n2=[1e3,2e3,5e3,1e4],a2=1e4,r2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class i2{constructor(t,a){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vh,this.transport=null,this.heartbeatIntervalMs=Tc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uh,this.ref=0,this.reconnectTimer=null,this.vsn=r0,this.logger=uh,this.conn=null,this.sendBuffer=[],this.serializer=new F_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((i=a==null?void 0:a.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${Ph.websocket}`,this.httpEndpoint=Ay(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=I_.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,i){this.logger(t,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case lr.connecting:return or.Connecting;case lr.open:return or.Open;case lr.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const i=`realtime:${t}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new Sf(`realtime:${t}`,a,this);return this.channels.push(u),u}}push(t){const{topic:a,event:i,payload:c,ref:u}=t,d=()=>{this.encode(t,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${a} ${i} (${u})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(X_,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Tc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:d}=a,p=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${i} ${c} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,d)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===lr.open||this.conn.readyState===lr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rn.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const i=t.match(/\?/)?"&":"?",c=new URLSearchParams(a);return`${t}${i}${c}`}_workerObjectUrl(t){let a;if(t)a=t;else{const i=new Blob([r2],{type:"application/javascript"});a=URL.createObjectURL(i)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(i=>{const c={access_token:a,version:K_};a&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(rn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(a)}catch(c){this.log("error",`error in ${t} callback`,c)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Ey(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,i,c,u,d,p,m,g,x,y,v,j;switch(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Vh,this.heartbeatIntervalMs=(c=t==null?void 0:t.heartbeatIntervalMs)!==null&&c!==void 0?c:Tc.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=t==null?void 0:t.heartbeatCallback)!==null&&p!==void 0?p:uh,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:r0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=t==null?void 0:t.reconnectAfterMs)!==null&&g!==void 0?g:(N=>n2[N-1]||a2),this.vsn){case Ty:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:((N,S)=>S(JSON.stringify(N))),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:((N,S)=>S(JSON.parse(N)));break;case Y_:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(j=t==null?void 0:t.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Tf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function mt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class l2 extends Tf{constructor(t,a,i){super(t),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hh extends Tf{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}const Ef=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),o2=()=>Response,$h=n=>{if(Array.isArray(n))return n.map(a=>$h(a));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([a,i])=>{const c=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[c]=$h(i)}),t},c2=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},dh=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},u2=(n,t,a)=>pe(void 0,void 0,void 0,function*(){const i=yield o2();n instanceof i&&!(a!=null&&a.noResolveJson)?n.json().then(c=>{const u=n.status||500,d=(c==null?void 0:c.statusCode)||u+"";t(new l2(dh(c),u,d))}).catch(c=>{t(new Hh(dh(c),c))}):t(new Hh(dh(n),n))}),d2=(n,t,a,i)=>{const c={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!i?c:(c2(i)?(c.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),c.body=JSON.stringify(i)):c.body=i,t!=null&&t.duplex&&(c.duplex=t.duplex),Object.assign(Object.assign({},c),a))};function so(n,t,a,i,c,u){return pe(this,void 0,void 0,function*(){return new Promise((d,p)=>{n(a,d2(t,i,c,u)).then(m=>{if(!m.ok)throw m;return i!=null&&i.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>u2(m,p,i))})})}function Kl(n,t,a,i){return pe(this,void 0,void 0,function*(){return so(n,"GET",t,a,i)})}function an(n,t,a,i,c){return pe(this,void 0,void 0,function*(){return so(n,"POST",t,i,c,a)})}function Ih(n,t,a,i,c){return pe(this,void 0,void 0,function*(){return so(n,"PUT",t,i,c,a)})}function h2(n,t,a,i){return pe(this,void 0,void 0,function*(){return so(n,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),i)})}function kf(n,t,a,i,c){return pe(this,void 0,void 0,function*(){return so(n,"DELETE",t,i,c,a)})}class f2{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a}then(t,a){return this.execute().then(t,a)}execute(){return pe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mt(t))return{data:null,error:t};throw t}})}}var Cy;class m2{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a,this[Cy]="BlobDownloadBuilder",this.promise=null}asStream(){return new f2(this.downloadFn,this.shouldThrowOnError)}then(t,a){return this.getPromise().then(t,a)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mt(t))return{data:null,error:t};throw t}})}}Cy=Symbol.toStringTag;const p2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g2{constructor(t,a={},i,c){this.shouldThrowOnError=!1,this.url=t,this.headers=a,this.bucketId=i,this.fetch=Ef(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,a,i,c){return pe(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},c0),c);let p=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=i,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),c!=null&&c.headers&&(p=Object.assign(Object.assign({},p),c.headers));const g=this._removeEmptyFolders(a),x=this._getFinalPath(g),y=yield(t=="PUT"?Ih:an)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:y.Id,fullPath:y.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(mt(u))return{data:null,error:u};throw u}})}upload(t,a,i){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,i)})}uploadToSignedUrl(t,a,i,c){return pe(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",a);try{let m;const g=Object.assign({upsert:c0.upsert},c),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",g.cacheControl)):(m=i,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType);const y=yield Ih(this.fetch,p.toString(),m,{headers:x});return{data:{path:u,fullPath:y.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(mt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,a){return pe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const c=Object.assign({},this.headers);a!=null&&a.upsert&&(c["x-upsert"]="true");const u=yield an(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),d=new URL(this.url+u.url),p=d.searchParams.get("token");if(!p)throw new Tf("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:p},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}update(t,a,i){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,i)})}move(t,a,i){return pe(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}copy(t,a,i){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield an(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}createSignedUrl(t,a,i){return pe(this,void 0,void 0,function*(){try{let c=this._getFinalPath(t),u=yield an(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:a},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const d=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}createSignedUrls(t,a,i){return pe(this,void 0,void 0,function*(){try{const c=yield an(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}download(t,a){const c=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),d=u?`?${u}`:"",p=this._getFinalPath(t),m=()=>Kl(this.fetch,`${this.url}/${c}/${p}${d}`,{headers:this.headers,noResolveJson:!0});return new m2(m,this.shouldThrowOnError)}info(t){return pe(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const i=yield Kl(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:$h(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}exists(t){return pe(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield h2(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i)&&i instanceof Hh){const c=i.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,a){const i=this._getFinalPath(t),c=[],u=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";u!==""&&c.push(u);const p=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});m!==""&&c.push(m);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${i}${g}`)}}}remove(t){return pe(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}list(t,a,i){return pe(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},p2),a),{prefix:t||""});return{data:yield an(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}listV2(t,a){return pe(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield an(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const Oy="2.84.0",Ry={"X-Client-Info":`storage-js/${Oy}`};class x2{constructor(t,a={},i,c){this.shouldThrowOnError=!1;const u=new URL(t);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ry),a),this.fetch=Ef(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return pe(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(t);return{data:yield Kl(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}getBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}createBucket(t){return pe(this,arguments,void 0,function*(a,i={public:!1}){try{return{data:yield an(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}updateBucket(t,a){return pe(this,void 0,void 0,function*(){try{return{data:yield Ih(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(t){const a={};return t&&("limit"in t&&(a.limit=String(t.limit)),"offset"in t&&(a.offset=String(t.offset)),t.search&&(a.search=t.search),t.sortColumn&&(a.sortColumn=t.sortColumn),t.sortOrder&&(a.sortOrder=t.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}class b2{constructor(t,a={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ry),a),this.fetch=Ef(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}listBuckets(t){return pe(this,void 0,void 0,function*(){try{const a=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&a.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&a.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&a.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&a.set("sortOrder",t.sortOrder),t!=null&&t.search&&a.set("search",t.search);const i=a.toString(),c=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Kl(this.fetch,c,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}}const Af={"X-Client-Info":`storage-js/${Oy}`,"Content-Type":"application/json"};class My extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ms(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class hh extends My{constructor(t,a,i){super(t),this.name="StorageVectorsApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class y2 extends My{constructor(t,a){super(t),this.name="StorageVectorsUnknownError",this.originalError=a}}var u0;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(u0||(u0={}));const Cf=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),v2=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},d0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),w2=(n,t,a)=>pe(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(a!=null&&a.noResolveJson)){const c=n.status||500,u=n;if(typeof u.json=="function")u.json().then(d=>{const p=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||c+"";t(new hh(d0(d),c,p))}).catch(()=>{const d=c+"",p=u.statusText||`HTTP ${c} error`;t(new hh(p,c,d))});else{const d=c+"",p=u.statusText||`HTTP ${c} error`;t(new hh(p,c,d))}}else t(new y2(d0(n),n))}),j2=(n,t,a,i)=>{const c={method:n,headers:(t==null?void 0:t.headers)||{}};return i?(v2(i)?(c.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),c.body=JSON.stringify(i)):c.body=i,Object.assign(Object.assign({},c),a)):c};function _2(n,t,a,i,c,u){return pe(this,void 0,void 0,function*(){return new Promise((d,p)=>{n(a,j2(t,i,c,u)).then(m=>{if(!m.ok)throw m;if(i!=null&&i.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>w2(m,p,i))})})}function Ds(n,t,a,i,c){return pe(this,void 0,void 0,function*(){return _2(n,"POST",t,i,c,a)})}class N2{constructor(t,a={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Af),a),this.fetch=Cf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield Ds(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}getIndex(t,a){return pe(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:a},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ms(i))return{data:null,error:i};throw i}})}listIndexes(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}deleteIndex(t,a){return pe(this,void 0,void 0,function*(){try{return{data:(yield Ds(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:a},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ms(i))return{data:null,error:i};throw i}})}}class S2{constructor(t,a={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Af),a),this.fetch=Cf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ds(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}getVectors(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}listVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ds(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}queryVectors(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}deleteVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ds(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}}class T2{constructor(t,a={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Af),a),this.fetch=Cf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield Ds(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}getBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}listBuckets(){return pe(this,arguments,void 0,function*(t={}){try{return{data:yield Ds(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield Ds(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ms(a))return{data:null,error:a};throw a}})}}class E2 extends T2{constructor(t,a={}){super(t,a.headers||{},a.fetch)}from(t){return new k2(this.url,this.headers,t,this.fetch)}}class k2 extends N2{constructor(t,a,i,c){super(t,a,c),this.vectorBucketName=i}createIndex(t){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pe(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pe(this,arguments,void 0,function*(a={}){return t.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pe(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pe(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new A2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class A2 extends S2{constructor(t,a,i,c,u){super(t,a,u),this.vectorBucketName=i,this.indexName=c}putVectors(t){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pe(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pe(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pe(this,arguments,void 0,function*(a={}){return t.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pe(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pe(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class C2 extends x2{constructor(t,a={},i,c){super(t,a,i,c)}from(t){return new g2(this.url,this.headers,t,this.fetch)}get vectors(){return new E2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new b2(this.url+"/iceberg",this.headers,this.fetch)}}const O2="2.84.0";let Bl="";typeof Deno<"u"?Bl="deno":typeof document<"u"?Bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bl="react-native":Bl="node";const R2={"X-Client-Info":`supabase-js-${Bl}/${O2}`},M2={headers:R2},D2={schema:"public"},U2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z2={},B2=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),L2=()=>Headers,V2=(n,t,a)=>{const i=B2(a),c=L2();return async(u,d)=>{var p;const m=(p=await t())!==null&&p!==void 0?p:n;let g=new c(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),i(u,Object.assign(Object.assign({},d),{headers:g}))}};function P2(n){return n.endsWith("/")?n:n+"/"}function q2(n,t){var a,i;const{db:c,auth:u,realtime:d,global:p}=n,{db:m,auth:g,realtime:x,global:y}=t,v={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},y),p),{headers:Object.assign(Object.assign({},(a=y==null?void 0:y.headers)!==null&&a!==void 0?a:{}),(i=p==null?void 0:p.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function H2(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(P2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Dy="2.84.0",ci=30*1e3,Gh=3,fh=Gh*ci,$2="http://localhost:9999",I2="supabase.auth.token",G2={"X-Client-Info":`gotrue-js/${Dy}`},Kh="X-Supabase-Api-Version",Uy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Y2=600*1e3;class Yl extends Error{constructor(t,a,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=i}}function be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class X2 extends Yl{constructor(t,a,i){super(t,a,i),this.name="AuthApiError",this.status=a,this.code=i}}function Q2(n){return be(n)&&n.name==="AuthApiError"}class cr extends Yl{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class Oa extends Yl{constructor(t,a,i,c){super(t,i,c),this.name=a,this.status=i}}class Rs extends Oa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F2(n){return be(n)&&n.name==="AuthSessionMissingError"}class ai extends Oa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ec extends Oa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class kc extends Oa{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Z2(n){return be(n)&&n.name==="AuthImplicitGrantRedirectError"}class h0 extends Oa{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yh extends Oa{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function mh(n){return be(n)&&n.name==="AuthRetryableFetchError"}class f0 extends Oa{constructor(t,a,i){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=i}}class Xh extends Oa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),m0=` 	
\r=`.split(""),J2=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<m0.length;t+=1)n[m0[t].charCodeAt(0)]=-2;for(let t=0;t<qc.length;t+=1)n[qc[t].charCodeAt(0)]=t;return n})();function p0(n,t,a){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;a(qc[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;a(qc[i]),t.queuedBits-=6}}function zy(n,t,a){const i=J2[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function g0(n){const t=[],a=d=>{t.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=d=>{tN(d,i,a)};for(let d=0;d<n.length;d+=1)zy(n.charCodeAt(d),c,u);return t.join("")}function W2(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function eN(n,t){for(let a=0;a<n.length;a+=1){let i=n.charCodeAt(a);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(n.charCodeAt(a+1)-56320&65535|c)+65536,a+=1}W2(i,t)}}function tN(n,t,a){if(t.utf8seq===0){if(n<=127){a(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function xi(n){const t=[],a={queue:0,queuedBits:0},i=c=>{t.push(c)};for(let c=0;c<n.length;c+=1)zy(n.charCodeAt(c),a,i);return new Uint8Array(t)}function sN(n){const t=[];return eN(n,a=>t.push(a)),new Uint8Array(t)}function ur(n){const t=[],a={queue:0,queuedBits:0},i=c=>{t.push(c)};return n.forEach(c=>p0(c,a,i)),p0(null,a,i),t.join("")}function nN(n){return Math.round(Date.now()/1e3)+n}function aN(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",sr={tested:!1,writable:!1},By=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function rN(n){const t={},a=new URL(n);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((c,u)=>{t[u]=c})}catch{}return a.searchParams.forEach((i,c)=>{t[c]=i}),t}const Ly=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),iN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ui=async(n,t,a)=>{await n.setItem(t,JSON.stringify(a))},nr=async(n,t)=>{const a=await n.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Sa=async(n,t)=>{await n.removeItem(t)};class eu{constructor(){this.promise=new eu.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}eu.promiseConstructor=Promise;function ph(n){const t=n.split(".");if(t.length!==3)throw new Xh("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!K2.test(t[i]))throw new Xh("JWT not in base64url format");return{header:JSON.parse(g0(t[0])),payload:JSON.parse(g0(t[1])),signature:xi(t[2]),raw:{header:t[0],payload:t[1]}}}async function lN(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function oN(n,t){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await n(u);if(!t(u,null,d)){i(d);return}}catch(d){if(!t(u,d)){c(d);return}}})()})}function cN(n){return("0"+n.toString(16)).substr(-2)}function uN(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let c="";for(let u=0;u<56;u++)c+=a.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(t),Array.from(t,cN).join("")}async function dN(n){const a=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",a),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function hN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const a=await dN(n);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ri(n,t,a=!1){const i=uN();let c=i;a&&(c+="/PASSWORD_RECOVERY"),await ui(n,`${t}-code-verifier`,c);const u=await hN(i);return[u,i===u?"plain":"s256"]}const fN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mN(n){const t=n.headers.get(Kh);if(!t||!t.match(fN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pN(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function gN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ii(n){if(!xN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gh(){const n={};return new Proxy(n,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bN(n,t){return new Proxy(n,{get:(a,i,c)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,i,c)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(a,i,c)}})}function x0(n){return JSON.parse(JSON.stringify(n))}const rr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),yN=[502,503,504];async function b0(n){var t;if(!iN(n))throw new Yh(rr(n),0);if(yN.includes(n.status))throw new Yh(rr(n),n.status);let a;try{a=await n.json()}catch(u){throw new cr(rr(u),u)}let i;const c=mN(n);if(c&&c.getTime()>=Uy["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?i=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(i=a.error_code),i){if(i==="weak_password")throw new f0(rr(a),n.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Rs}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new f0(rr(a),n.status,a.weak_password.reasons);throw new X2(rr(a),n.status||500,i)}const vN=(n,t,a,i)=>{const c={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),a))};async function Se(n,t,a,i){var c;const u=Object.assign({},i==null?void 0:i.headers);u[Kh]||(u[Kh]=Uy["2024-01-01"].name),i!=null&&i.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const d=(c=i==null?void 0:i.query)!==null&&c!==void 0?c:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await wN(n,t,a+p,{headers:u,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function wN(n,t,a,i,c,u){const d=vN(t,i,c,u);let p;try{p=await n(a,Object.assign({},d))}catch(m){throw console.error(m),new Yh(rr(m),0)}if(p.ok||await b0(p),i!=null&&i.noResolveJson)return p;try{return await p.json()}catch(m){await b0(m)}}function sn(n){var t;let a=null;NN(n)&&(a=Object.assign({},n),n.expires_at||(a.expires_at=nN(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:a,user:i},error:null}}function y0(n){const t=sn(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Ea(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function jN(n){return{data:n,error:null}}function _N(n){const{action_link:t,email_otp:a,hashed_token:i,redirect_to:c,verification_type:u}=n,d=_i(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:a,hashed_token:i,redirect_to:c,verification_type:u},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function v0(n){return n}function NN(n){return n.access_token&&n.refresh_token&&n.expires_in}const xh=["global","local","others"];class SN{constructor({url:t="",headers:a={},fetch:i}){this.url=t,this.headers=a,this.fetch=Ly(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,a=xh[0]){if(xh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xh.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,a={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ea})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:a}=t,i=_i(t,["options"]),c=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(c.new_email=i==null?void 0:i.newEmail,delete c.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:_N,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(be(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ea})}catch(a){if(be(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,i,c,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=t==null?void 0:t.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:v0});if(x.error)throw x.error;const y=await x.json(),v=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,j=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(N=>{const S=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);g[`${k}Page`]=S}),g.total=parseInt(v)),{data:Object.assign(Object.assign({},y),g),error:null}}catch(g){if(be(g))return{data:{users:[]},error:g};throw g}}async getUserById(t){ii(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ea})}catch(a){if(be(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){ii(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Ea})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,a=!1){ii(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ea})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ii(t.userId);try{const{data:a,error:i}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:a,error:i}}catch(a){if(be(a))return{data:null,error:a};throw a}}async _deleteFactor(t){ii(t.userId),ii(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}}async _listOAuthClients(t){var a,i,c,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=t==null?void 0:t.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:v0});if(x.error)throw x.error;const y=await x.json(),v=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,j=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(N=>{const S=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);g[`${k}Page`]=S}),g.total=parseInt(v)),{data:Object.assign(Object.assign({},y),g),error:null}}catch(g){if(be(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}}async _updateOAuthClient(t,a){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(be(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}}}function w0(n={}){return{getItem:t=>n[t]||null,setItem:(t,a)=>{n[t]=a},removeItem:t=>{delete n[t]}}}const li={debug:!!(globalThis&&By()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class TN extends Vy{}async function EN(n,t,a){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),li.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,c.name);try{return await a()}finally{li.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,c.name)}}else{if(t===0)throw li.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new TN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(li.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function kN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Py(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function AN(n){return parseInt(n,16)}function CN(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function ON(n){var t;const{chainId:a,domain:i,expirationTime:c,issuedAt:u=new Date,nonce:d,notBefore:p,requestId:m,resources:g,scheme:x,uri:y,version:v}=n;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const j=Py(n.address),N=x?`${x}://${i}`:i,S=n.statement?`${n.statement}
`:"",k=`${N} wants you to sign in with your Ethereum account:
${j}

${S}`;let O=`URI: ${y}
Version: ${v}
Chain ID: ${a}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(c&&(O+=`
Expiration Time: ${c.toISOString()}`),p&&(O+=`
Not Before: ${p.toISOString()}`),m&&(O+=`
Request ID: ${m}`),g){let U=`
Resources:`;for(const R of g){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);U+=`
- ${R}`}O+=U}return`${k}
${O}`}class Ot extends Error{constructor({message:t,code:a,cause:i,name:c}){var u;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=c??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class Hc extends Ot{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function RN({error:n,options:t}){var a,i,c;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ot({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const d=window.location.hostname;if(qy(d)){if(u.rp.id!==d)return new Ot({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function MN({error:n,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ot({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(qy(i)){if(a.rpId!==i)return new Ot({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class DN{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const UN=new DN;function zN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:a,excludeCredentials:i}=n,c=_i(n,["challenge","user","excludeCredentials"]),u=xi(t).buffer,d=Object.assign(Object.assign({},a),{id:xi(a.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:d});if(i&&i.length>0){p.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const g=i[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:xi(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function BN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:a}=n,i=_i(n,["challenge","allowCredentials"]),c=xi(t).buffer,u=Object.assign(Object.assign({},i),{challenge:c});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const p=a[d];u.allowCredentials[d]=Object.assign(Object.assign({},p),{id:xi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function LN(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n;return{id:n.id,rawId:n.id,response:{attestationObject:ur(new Uint8Array(n.response.attestationObject)),clientDataJSON:ur(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function VN(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n,i=n.getClientExtensionResults(),c=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ur(new Uint8Array(c.authenticatorData)),clientDataJSON:ur(new Uint8Array(c.clientDataJSON)),signature:ur(new Uint8Array(c.signature)),userHandle:c.userHandle?ur(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qy(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function j0(){var n,t;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function PN(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hc("Browser returned unexpected credential type",t)}:{data:null,error:new Hc("Empty credential response",t)}}catch(t){return{data:null,error:RN({error:t,options:n})}}}async function qN(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hc("Browser returned unexpected credential type",t)}:{data:null,error:new Hc("Empty credential response",t)}}catch(t){return{data:null,error:MN({error:t,options:n})}}}const HN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$N={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $c(...n){const t=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),a=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of n)if(c)for(const u in c){const d=c[u];if(d!==void 0)if(Array.isArray(d))i[u]=d;else if(a(d))i[u]=d;else if(t(d)){const p=i[u];t(p)?i[u]=$c(p,d):i[u]=$c(d)}else i[u]=d}return i}function IN(n,t){return $c(HN,n,t||{})}function GN(n,t){return $c($N,n,t||{})}class KN{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:a,friendlyName:i,signal:c},u){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:t,webauthn:a});if(!d)return{data:null,error:p};const m=c??UN.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=IN(d.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:x,error:y}=await PN({publicKey:g,signal:m});return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}case"request":{const g=GN(d.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:x,error:y}=await qN(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:m}));return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}}}catch(d){return be(d)?{data:null,error:d}:{data:null,error:new cr("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:a,webauthn:i}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!a)return{data:null,error:new Yl("rpId is required for WebAuthn authentication")};try{if(!j0())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:i},signal:c},{request:u});if(!d)return{data:null,error:p};const{webauthn:m}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:m.type,rpId:a,rpOrigins:i,credential_response:m.credential_response}})}catch(d){return be(d)?{data:null,error:d}:{data:null,error:new cr("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!a)return{data:null,error:new Yl("rpId is required for WebAuthn registration")};try{if(!j0())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(x=>{var y;return(y=x.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:a,rpOrigins:i},signal:c},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:a,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(d){return be(d)?{data:null,error:d}:{data:null,error:new cr("Unexpected error in register",d)}}}}kN();const YN={url:$2,storageKey:I2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _0(n,t,a){return await a()}const oi={};class Xl{get jwks(){var t,a;return(a=(t=oi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=oi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{cachedAt:t})}constructor(t){var a,i,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},YN),t);if(this.storageKey=u.storageKey,this.instanceID=(a=Xl.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Xl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Qt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new SN({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Ly(u.fetch),this.lock=u.lock||_0,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Qt()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=EN:this.lock=_0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new KN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:By()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=w0(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=w0(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Dy}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let a={},i="none";if(Qt()&&(a=rN(window.location.href),this._isImplicitGrantCallback(a)?i="implicit":await this._isPKCECallback(a)&&(i="pkce")),Qt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(a,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Z2(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return be(a)?this._returnResult({error:a}):this._returnResult({error:new cr("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,i,c;try{const u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=t==null?void 0:t.options)===null||c===void 0?void 0:c.captchaToken}},xform:sn}),{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(be(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var a,i,c;try{let u;if("email"in t){const{email:x,password:y,options:v}=t;let j=null,N=null;this.flowType==="pkce"&&([j,N]=await ri(this.storage,this.storageKey)),u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:x,password:y,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:j,code_challenge_method:N},xform:sn})}else if("phone"in t){const{phone:x,password:y,options:v}=t;u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(c=v==null?void 0:v.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:sn})}else throw new Ec("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(be(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let a;if("email"in t){const{email:u,password:d,options:p}=t;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:y0})}else if("phone"in t){const{phone:u,password:d,options:p}=t;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:y0})}else throw new Ec("You must provide either an email or phone number and a password");const{data:i,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!i||!i.session||!i.user){const u=new ai;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(t){var a,i,c,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;switch(a){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(t){var a,i,c,u,d,p,m,g,x,y,v;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:S,wallet:k,statement:O,options:U}=t;let R;if(Qt())if(typeof k=="object")R=k;else{const re=window;if("ethereum"in re&&typeof re.ethereum=="object"&&"request"in re.ethereum&&typeof re.ethereum.request=="function")R=re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=k}const Q=new URL((a=U==null?void 0:U.url)!==null&&a!==void 0?a:window.location.href),F=await R.request({method:"eth_requestAccounts"}).then(re=>re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const te=Py(F[0]);let H=(i=U==null?void 0:U.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!H){const re=await R.request({method:"eth_chainId"});H=AN(re)}const M={domain:Q.host,address:te,statement:O,uri:Q.href,version:"1",chainId:H,nonce:(c=U==null?void 0:U.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(d=(u=U==null?void 0:U.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=U==null?void 0:U.signInWithEthereum)===null||x===void 0?void 0:x.resources};j=ON(M),N=await R.request({method:"personal_sign",params:[CN(j),te]})}try{const{data:S,error:k}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:N},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:sn});if(k)throw k;if(!S||!S.session||!S.user){const O=new ai;return this._returnResult({data:{user:null,session:null},error:O})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:k})}catch(S){if(be(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var a,i,c,u,d,p,m,g,x,y,v,j;let N,S;if("message"in t)N=t.message,S=t.signature;else{const{chain:k,wallet:O,statement:U,options:R}=t;let Q;if(Qt())if(typeof O=="object")Q=O;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))Q=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=O}const F=new URL((a=R==null?void 0:R.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in Q&&Q.signIn){const te=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),U?{statement:U}:null));let H;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")H=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)H=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)N=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),S=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${F.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(c=(i=R==null?void 0:R.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((d=R==null?void 0:R.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R==null?void 0:R.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((g=R==null?void 0:R.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((y=(x=R==null?void 0:R.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...R.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const te=await Q.signMessage(new TextEncoder().encode(N),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=te}}try{const{data:k,error:O}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:ur(S)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:sn});if(O)throw O;if(!k||!k.session||!k.user){const U=new ai;return this._returnResult({data:{user:null,session:null},error:U})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:O})}catch(k){if(be(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const a=await nr(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(a??"").split("/");try{const{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:sn});if(await Sa(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const p=new ai;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:d})}catch(u){if(be(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:a,provider:i,token:c,access_token:u,nonce:d}=t,p=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:sn}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const x=new ai;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(t){var a,i,c,u,d;try{if("email"in t){const{email:p,options:m}=t;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await ri(this.storage,this.storageKey));const{error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:p,options:m}=t,{data:g,error:x}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m==null?void 0:m.data)!==null&&c!==void 0?c:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:x})}throw new Ec("You must provide either an email or phone number.")}catch(p){if(be(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(t){var a,i;try{let c,u;"options"in t&&(c=(a=t.options)===null||a===void 0?void 0:a.redirectTo,u=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:p}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:sn});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(t){var a,i,c,u,d;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ri(this.storage,this.storageKey));const g=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=t==null?void 0:t.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:jN});return!((u=g.data)===null||u===void 0)&&u.url&&Qt()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(be(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:i}=t;if(i)throw i;if(!a)throw new Rs;const{error:c}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:i,type:c,options:u}=t,{error:d}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:i,type:c,options:u}=t,{data:d,error:p}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p})}throw new Ec("You must provide either an email or phone number and a type")}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<fh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const d=await nr(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=gh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=bN(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ea}):await this._useSession(async a=>{var i,c,u;const{data:d,error:p}=a;if(p)throw p;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rs}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Ea})})}catch(a){if(be(a))return F2(a)&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new Rs;const d=c.session;let p=null,m=null;this.flowType==="pkce"&&t.email!=null&&([p,m]=await ri(this.storage,this.storageKey));const{data:g,error:x}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:Ea});if(x)throw x;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(be(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rs;const a=Date.now()/1e3;let i=a,c=!0,u=null;const{payload:d}=ph(t.access_token);if(d.exp&&(i=d.exp,c=i<=a),c){const{data:p,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(be(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var i;if(!t){const{data:d,error:p}=a;if(p)throw p;t=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Rs;const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(t,a){try{if(!Qt())throw new kc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new kc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new h0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new h0("No code detected.");const{data:U,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:d,expires_in:p,expires_at:m,token_type:g}=t;if(!u||!p||!d||!g)throw new kc("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(p);let v=x+y;m&&(v=parseInt(m));const j=v-x;j*1e3<=ci&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${y}s`);const N=v-y;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,v,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,v,x);const{data:S,error:k}=await this._getUser(u);if(k)throw k;const O={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:y,expires_at:v,refresh_token:d,token_type:g,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:t.type},error:null})}catch(i){if(be(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:c,error:u}=a;if(u)return this._returnResult({error:u});const d=(i=c.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:p}=await this.admin.signOut(d,t);if(p&&!(Q2(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return t!=="others"&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const a=aN(),i={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async a=>{var i,c;try{const{data:{session:u},error:d}=a;if(d)throw d;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,a={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await ri(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(u){if(be(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var a;try{const{data:i,error:c}=await this._useSession(async u=>{var d,p,m,g,x;const{data:y,error:v}=u;if(v)throw v;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(g=y.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return Qt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(be(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async a=>{var i;try{const{error:c,data:{session:u}}=a;if(c)throw c;const{options:d,provider:p,token:m,access_token:g,nonce:x}=t,y=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u==null?void 0:u.access_token)!==null&&i!==void 0?i:void 0,body:{provider:p,id_token:m,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:sn}),{data:v,error:j}=y;return j?this._returnResult({data:{user:null,session:null},error:j}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new ai}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:j}))}catch(c){if(be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(t){try{return await this._useSession(async a=>{var i,c;const{data:u,error:d}=a;if(d)throw d;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await oN(async c=>(c>0&&await lN(200*Math.pow(2,c-1)),this._debug(a,"refreshing attempt",c),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sn})),(c,u)=>{const d=200*Math.pow(2,c);return u&&mh(u)&&Date.now()+d-i<ci})}catch(i){if(this._debug(a,"error",i),be(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",i),Qt()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,a;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await nr(this.storage,this.storageKey);if(c&&this.userStorage){let d=await nr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:c.user},await ui(this.userStorage,this.storageKey+"-user",d)),c.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:gh()}else if(c&&!c.user&&!c.user){const d=await nr(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(c.user=d.user,await Sa(this.storage,this.storageKey+"-user"),await ui(this.storage,this.storageKey,c)):c.user=gh()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((a=c.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<fh;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${fh}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:d}=await this._callRefreshToken(c.refresh_token);d&&(console.error(d),mh(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(c.access_token);!p&&(d!=null&&d.user)?(c.user=d.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var a,i;if(!t)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new eu;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new Rs;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),be(u)){const d={data:null,error:u};return mh(u)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(t,a,i=!0){const c=`#_notifyAllSubscribers(${t})`;this._debug(c,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:a});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,a)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),i=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&a.user&&await ui(this.userStorage,this.storageKey+"-user",{user:a.user});const c=Object.assign({},a);delete c.user;const u=x0(c);await ui(this.storage,this.storageKey,u)}else{const c=x0(a);await ui(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Sa(this.storage,this.storageKey),await Sa(this.storage,this.storageKey+"-code-verifier"),await Sa(this.storage,this.storageKey+"-user"),this.userStorage&&await Sa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ci);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-t)/ci);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ci}ms, refresh threshold is ${Gh} ticks`),c<=Gh&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Vy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,i){const c=[`provider=${encodeURIComponent(a)}`];if(i!=null&&i.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,d]=await ri(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(p.toString())}if(i!=null&&i.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i!=null&&i.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${c.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var i;const{data:c,error:u}=a;return u?this._returnResult({data:null,error:u}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(t){try{return await this._useSession(async a=>{var i,c;const{data:u,error:d}=a;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:g}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(t.factorType==="totp"&&m.type==="totp"&&(!((c=m==null?void 0:m.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:c,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?LN(t.webauthn.credential_response):VN(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:m}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:c,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:zN(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:BN(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(t){const{data:a,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){var t;const{data:{user:a},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var t,a;const{data:{session:i},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ph(i.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((a=(t=i.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async a=>{const{data:{session:i},error:c}=a;return c?this._returnResult({data:null,error:c}):i?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Rs})})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(t,a){try{return await this._useSession(async i=>{const{data:{session:c},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Rs});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&Qt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,a){try{return await this._useSession(async i=>{const{data:{session:c},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Rs});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&Qt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:a},error:i}=t;return i?this._returnResult({data:null,error:i}):a?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Rs})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async a=>{const{data:{session:i},error:c}=a;return c?this._returnResult({data:null,error:c}):i?await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Rs})})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(t,a={keys:[]}){let i=a.keys.find(p=>p.kid===t);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(p=>p.kid===t),i&&this.jwks_cached_at+Y2>c)return i;const{data:u,error:d}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(p=>p.kid===t),!i)?null:i}async getClaims(t,a={}){try{let i=t;if(!i){const{data:j,error:N}=await this.getSession();if(N||!j.session)return this._returnResult({data:null,error:N});i=j.session.access_token}const{header:c,payload:u,signature:d,raw:{header:p,payload:m}}=ph(i);a!=null&&a.allowExpired||pN(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!g){const{error:j}=await this.getUser(i);if(j)throw j;return{data:{claims:u,header:c,signature:d},error:null}}const x=gN(c.alg),y=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,d,sN(`${p}.${m}`)))throw new Xh("Invalid JWT signature");return{data:{claims:u,header:c,signature:d},error:null}}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}}Xl.nextInstanceID={};const XN=Xl;class QN extends XN{constructor(t){super(t)}}class FN{constructor(t,a,i){var c,u,d;this.supabaseUrl=t,this.supabaseKey=a;const p=H2(t);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:D2,realtime:z2,auth:Object.assign(Object.assign({},U2),{storageKey:m}),global:M2},x=q2(i??{},g);this.storageKey=(c=x.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=V2(a,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new $_(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new C2(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new V_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,a,i)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,a;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(a=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:i,storage:c,userStorage:u,storageKey:d,flowType:p,lock:m,debug:g,throwOnError:x},y,v){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QN({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),y),storageKey:d,autoRefreshToken:t,persistSession:a,detectSessionInUrl:i,storage:c,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:x,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new i2(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,i)=>{this._handleTokenChanged(a,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,a,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ZN=(n,t,a)=>new FN(n,t,a);function JN(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}JN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WN="https://pndoojofskfmjmqiojdd.supabase.co",eS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBuZG9vam9mc2tmbWptcWlvamRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5MjA4ODAsImV4cCI6MjA3OTQ5Njg4MH0.E5Ox2Sw4gGdutD7QYoC9O4-fQZvNYhXkutbKGDCrIjU",Ne=ZN(WN,eS),Hy=A.createContext(void 0),tS=({children:n})=>{const[t,a]=A.useState(null),[i,c]=A.useState(null),[u,d]=A.useState(!0),p=async v=>{const{data:j,error:N}=await Ne.from("profiles").select("*").eq("id",v).single();!N&&j&&c(j)};A.useEffect(()=>{Ne.auth.getSession().then(({data:j})=>{var N,S;a(((N=j.session)==null?void 0:N.user)??null),(S=j.session)!=null&&S.user&&p(j.session.user.id),d(!1)});const{data:v}=Ne.auth.onAuthStateChange((j,N)=>{a((N==null?void 0:N.user)??null),N!=null&&N.user?p(N.user.id):c(null)});return()=>{v==null||v.subscription.unsubscribe()}},[]);const m=async(v,j)=>{const{error:N}=await Ne.auth.signInWithPassword({email:v,password:j});if(N)throw N},g=async(v,j)=>{const{data:N,error:S}=await Ne.auth.signUp({email:v,password:j,options:{emailRedirectTo:`${window.location.origin}/auth`}});if(S)throw S;return N},x=async v=>{const{error:j}=await Ne.auth.resetPasswordForEmail(v,{redirectTo:`${window.location.origin}/auth`});if(j)throw j},y=async()=>{const{error:v}=await Ne.auth.signOut();if(v)throw v};return l.jsx(Hy.Provider,{value:{user:t,profile:i,loading:u,signIn:m,signUp:g,resetPassword:x,signOut:y},children:n})},sS=()=>{const n=A.useContext(Hy);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},Of=A.createContext({});function Rf(n){const t=A.useRef(null);return t.current===null&&(t.current=n()),t.current}const Mf=typeof window<"u",$y=Mf?A.useLayoutEffect:A.useEffect,tu=A.createContext(null);function Df(n,t){n.indexOf(t)===-1&&n.push(t)}function Uf(n,t){const a=n.indexOf(t);a>-1&&n.splice(a,1)}const $n=(n,t,a)=>a>t?t:a<n?n:a;let zf=()=>{};const In={},Iy=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Gy(n){return typeof n=="object"&&n!==null}const Ky=n=>/^0[^.\s]+$/u.test(n);function Bf(n){let t;return()=>(t===void 0&&(t=n()),t)}const Xs=n=>n,nS=(n,t)=>a=>t(n(a)),no=(...n)=>n.reduce(nS),Ql=(n,t,a)=>{const i=t-n;return i===0?1:(a-n)/i};class Lf{constructor(){this.subscriptions=[]}add(t){return Df(this.subscriptions,t),()=>Uf(this.subscriptions,t)}notify(t,a,i){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,a,i);else for(let u=0;u<c;u++){const d=this.subscriptions[u];d&&d(t,a,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bn=n=>n*1e3,Ys=n=>n/1e3;function Yy(n,t){return t?n*(1e3/t):0}const Xy=(n,t,a)=>(((1-3*a+3*t)*n+(3*a-6*t))*n+3*t)*n,aS=1e-7,rS=12;function iS(n,t,a,i,c){let u,d,p=0;do d=t+(a-t)/2,u=Xy(d,i,c)-n,u>0?a=d:t=d;while(Math.abs(u)>aS&&++p<rS);return d}function ao(n,t,a,i){if(n===t&&a===i)return Xs;const c=u=>iS(u,0,1,n,a);return u=>u===0||u===1?u:Xy(c(u),t,i)}const Qy=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,Fy=n=>t=>1-n(1-t),Zy=ao(.33,1.53,.69,.99),Vf=Fy(Zy),Jy=Qy(Vf),Wy=n=>(n*=2)<1?.5*Vf(n):.5*(2-Math.pow(2,-10*(n-1))),Pf=n=>1-Math.sin(Math.acos(n)),ev=Fy(Pf),tv=Qy(Pf),lS=ao(.42,0,1,1),oS=ao(0,0,.58,1),sv=ao(.42,0,.58,1),cS=n=>Array.isArray(n)&&typeof n[0]!="number",nv=n=>Array.isArray(n)&&typeof n[0]=="number",uS={linear:Xs,easeIn:lS,easeInOut:sv,easeOut:oS,circIn:Pf,circInOut:tv,circOut:ev,backIn:Vf,backInOut:Jy,backOut:Zy,anticipate:Wy},dS=n=>typeof n=="string",N0=n=>{if(nv(n)){zf(n.length===4);const[t,a,i,c]=n;return ao(t,a,i,c)}else if(dS(n))return uS[n];return n},Ac=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function hS(n,t){let a=new Set,i=new Set,c=!1,u=!1;const d=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function m(x){d.has(x)&&(g.schedule(x),n()),x(p)}const g={schedule:(x,y=!1,v=!1)=>{const N=v&&c?a:i;return y&&d.add(x),N.has(x)||N.add(x),x},cancel:x=>{i.delete(x),d.delete(x)},process:x=>{if(p=x,c){u=!0;return}c=!0,[a,i]=[i,a],a.forEach(m),a.clear(),c=!1,u&&(u=!1,g.process(x))}};return g}const fS=40;function av(n,t){let a=!1,i=!0;const c={delta:0,timestamp:0,isProcessing:!1},u=()=>a=!0,d=Ac.reduce((R,Q)=>(R[Q]=hS(u),R),{}),{setup:p,read:m,resolveKeyframes:g,preUpdate:x,update:y,preRender:v,render:j,postRender:N}=d,S=()=>{const R=In.useManualTiming?c.timestamp:performance.now();a=!1,In.useManualTiming||(c.delta=i?1e3/60:Math.max(Math.min(R-c.timestamp,fS),1)),c.timestamp=R,c.isProcessing=!0,p.process(c),m.process(c),g.process(c),x.process(c),y.process(c),v.process(c),j.process(c),N.process(c),c.isProcessing=!1,a&&t&&(i=!1,n(S))},k=()=>{a=!0,i=!0,c.isProcessing||n(S)};return{schedule:Ac.reduce((R,Q)=>{const F=d[Q];return R[Q]=(te,H=!1,M=!1)=>(a||k(),F.schedule(te,H,M)),R},{}),cancel:R=>{for(let Q=0;Q<Ac.length;Q++)d[Ac[Q]].cancel(R)},state:c,steps:d}}const{schedule:dt,cancel:Aa,state:Ft,steps:bh}=av(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xs,!0);let Dc;function mS(){Dc=void 0}const ys={now:()=>(Dc===void 0&&ys.set(Ft.isProcessing||In.useManualTiming?Ft.timestamp:performance.now()),Dc),set:n=>{Dc=n,queueMicrotask(mS)}},rv=n=>t=>typeof t=="string"&&t.startsWith(n),qf=rv("--"),pS=rv("var(--"),Hf=n=>pS(n)?gS.test(n.split("/*")[0].trim()):!1,gS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Si={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Fl={...Si,transform:n=>$n(0,1,n)},Cc={...Si,default:1},ql=n=>Math.round(n*1e5)/1e5,$f=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xS(n){return n==null}const bS=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,If=(n,t)=>a=>!!(typeof a=="string"&&bS.test(a)&&a.startsWith(n)||t&&!xS(a)&&Object.prototype.hasOwnProperty.call(a,t)),iv=(n,t,a)=>i=>{if(typeof i!="string")return i;const[c,u,d,p]=i.match($f);return{[n]:parseFloat(c),[t]:parseFloat(u),[a]:parseFloat(d),alpha:p!==void 0?parseFloat(p):1}},yS=n=>$n(0,255,n),yh={...Si,transform:n=>Math.round(yS(n))},dr={test:If("rgb","red"),parse:iv("red","green","blue"),transform:({red:n,green:t,blue:a,alpha:i=1})=>"rgba("+yh.transform(n)+", "+yh.transform(t)+", "+yh.transform(a)+", "+ql(Fl.transform(i))+")"};function vS(n){let t="",a="",i="",c="";return n.length>5?(t=n.substring(1,3),a=n.substring(3,5),i=n.substring(5,7),c=n.substring(7,9)):(t=n.substring(1,2),a=n.substring(2,3),i=n.substring(3,4),c=n.substring(4,5),t+=t,a+=a,i+=i,c+=c),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(i,16),alpha:c?parseInt(c,16)/255:1}}const Qh={test:If("#"),parse:vS,transform:dr.transform},ro=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Ta=ro("deg"),yn=ro("%"),Ee=ro("px"),wS=ro("vh"),jS=ro("vw"),S0={...yn,parse:n=>yn.parse(n)/100,transform:n=>yn.transform(n*100)},di={test:If("hsl","hue"),parse:iv("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:a,alpha:i=1})=>"hsla("+Math.round(n)+", "+yn.transform(ql(t))+", "+yn.transform(ql(a))+", "+ql(Fl.transform(i))+")"},Rt={test:n=>dr.test(n)||Qh.test(n)||di.test(n),parse:n=>dr.test(n)?dr.parse(n):di.test(n)?di.parse(n):Qh.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?dr.transform(n):di.transform(n),getAnimatableNone:n=>{const t=Rt.parse(n);return t.alpha=0,Rt.transform(t)}},_S=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NS(n){var t,a;return isNaN(n)&&typeof n=="string"&&(((t=n.match($f))==null?void 0:t.length)||0)+(((a=n.match(_S))==null?void 0:a.length)||0)>0}const lv="number",ov="color",SS="var",TS="var(",T0="${}",ES=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zl(n){const t=n.toString(),a=[],i={color:[],number:[],var:[]},c=[];let u=0;const p=t.replace(ES,m=>(Rt.test(m)?(i.color.push(u),c.push(ov),a.push(Rt.parse(m))):m.startsWith(TS)?(i.var.push(u),c.push(SS),a.push(m)):(i.number.push(u),c.push(lv),a.push(parseFloat(m))),++u,T0)).split(T0);return{values:a,split:p,indexes:i,types:c}}function cv(n){return Zl(n).values}function uv(n){const{split:t,types:a}=Zl(n),i=t.length;return c=>{let u="";for(let d=0;d<i;d++)if(u+=t[d],c[d]!==void 0){const p=a[d];p===lv?u+=ql(c[d]):p===ov?u+=Rt.transform(c[d]):u+=c[d]}return u}}const kS=n=>typeof n=="number"?0:Rt.test(n)?Rt.getAnimatableNone(n):n;function AS(n){const t=cv(n);return uv(n)(t.map(kS))}const Ca={test:NS,parse:cv,createTransformer:uv,getAnimatableNone:AS};function vh(n,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?n+(t-n)*6*a:a<1/2?t:a<2/3?n+(t-n)*(2/3-a)*6:n}function CS({hue:n,saturation:t,lightness:a,alpha:i}){n/=360,t/=100,a/=100;let c=0,u=0,d=0;if(!t)c=u=d=a;else{const p=a<.5?a*(1+t):a+t-a*t,m=2*a-p;c=vh(m,p,n+1/3),u=vh(m,p,n),d=vh(m,p,n-1/3)}return{red:Math.round(c*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:i}}function Ic(n,t){return a=>a>0?t:n}const pt=(n,t,a)=>n+(t-n)*a,wh=(n,t,a)=>{const i=n*n,c=a*(t*t-i)+i;return c<0?0:Math.sqrt(c)},OS=[Qh,dr,di],RS=n=>OS.find(t=>t.test(n));function E0(n){const t=RS(n);if(!t)return!1;let a=t.parse(n);return t===di&&(a=CS(a)),a}const k0=(n,t)=>{const a=E0(n),i=E0(t);if(!a||!i)return Ic(n,t);const c={...a};return u=>(c.red=wh(a.red,i.red,u),c.green=wh(a.green,i.green,u),c.blue=wh(a.blue,i.blue,u),c.alpha=pt(a.alpha,i.alpha,u),dr.transform(c))},Fh=new Set(["none","hidden"]);function MS(n,t){return Fh.has(n)?a=>a<=0?n:t:a=>a>=1?t:n}function DS(n,t){return a=>pt(n,t,a)}function Gf(n){return typeof n=="number"?DS:typeof n=="string"?Hf(n)?Ic:Rt.test(n)?k0:BS:Array.isArray(n)?dv:typeof n=="object"?Rt.test(n)?k0:US:Ic}function dv(n,t){const a=[...n],i=a.length,c=n.map((u,d)=>Gf(u)(u,t[d]));return u=>{for(let d=0;d<i;d++)a[d]=c[d](u);return a}}function US(n,t){const a={...n,...t},i={};for(const c in a)n[c]!==void 0&&t[c]!==void 0&&(i[c]=Gf(n[c])(n[c],t[c]));return c=>{for(const u in i)a[u]=i[u](c);return a}}function zS(n,t){const a=[],i={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const u=t.types[c],d=n.indexes[u][i[u]],p=n.values[d]??0;a[c]=p,i[u]++}return a}const BS=(n,t)=>{const a=Ca.createTransformer(t),i=Zl(n),c=Zl(t);return i.indexes.var.length===c.indexes.var.length&&i.indexes.color.length===c.indexes.color.length&&i.indexes.number.length>=c.indexes.number.length?Fh.has(n)&&!c.values.length||Fh.has(t)&&!i.values.length?MS(n,t):no(dv(zS(i,c),c.values),a):Ic(n,t)};function hv(n,t,a){return typeof n=="number"&&typeof t=="number"&&typeof a=="number"?pt(n,t,a):Gf(n)(n,t)}const LS=n=>{const t=({timestamp:a})=>n(a);return{start:(a=!0)=>dt.update(t,a),stop:()=>Aa(t),now:()=>Ft.isProcessing?Ft.timestamp:ys.now()}},fv=(n,t,a=10)=>{let i="";const c=Math.max(Math.round(t/a),2);for(let u=0;u<c;u++)i+=Math.round(n(u/(c-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Gc=2e4;function Kf(n){let t=0;const a=50;let i=n.next(t);for(;!i.done&&t<Gc;)t+=a,i=n.next(t);return t>=Gc?1/0:t}function VS(n,t=100,a){const i=a({...n,keyframes:[0,t]}),c=Math.min(Kf(i),Gc);return{type:"keyframes",ease:u=>i.next(c*u).value/t,duration:Ys(c)}}const PS=5;function mv(n,t,a){const i=Math.max(t-PS,0);return Yy(a-n(i),t-i)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jh=.001;function qS({duration:n=vt.duration,bounce:t=vt.bounce,velocity:a=vt.velocity,mass:i=vt.mass}){let c,u,d=1-t;d=$n(vt.minDamping,vt.maxDamping,d),n=$n(vt.minDuration,vt.maxDuration,Ys(n)),d<1?(c=g=>{const x=g*d,y=x*n,v=x-a,j=Zh(g,d),N=Math.exp(-y);return jh-v/j*N},u=g=>{const y=g*d*n,v=y*a+a,j=Math.pow(d,2)*Math.pow(g,2)*n,N=Math.exp(-y),S=Zh(Math.pow(g,2),d);return(-c(g)+jh>0?-1:1)*((v-j)*N)/S}):(c=g=>{const x=Math.exp(-g*n),y=(g-a)*n+1;return-jh+x*y},u=g=>{const x=Math.exp(-g*n),y=(a-g)*(n*n);return x*y});const p=5/n,m=$S(c,u,p);if(n=bn(n),isNaN(m))return{stiffness:vt.stiffness,damping:vt.damping,duration:n};{const g=Math.pow(m,2)*i;return{stiffness:g,damping:d*2*Math.sqrt(i*g),duration:n}}}const HS=12;function $S(n,t,a){let i=a;for(let c=1;c<HS;c++)i=i-n(i)/t(i);return i}function Zh(n,t){return n*Math.sqrt(1-t*t)}const IS=["duration","bounce"],GS=["stiffness","damping","mass"];function A0(n,t){return t.some(a=>n[a]!==void 0)}function KS(n){let t={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...n};if(!A0(n,GS)&&A0(n,IS))if(n.visualDuration){const a=n.visualDuration,i=2*Math.PI/(a*1.2),c=i*i,u=2*$n(.05,1,1-(n.bounce||0))*Math.sqrt(c);t={...t,mass:vt.mass,stiffness:c,damping:u}}else{const a=qS(n);t={...t,...a,mass:vt.mass},t.isResolvedFromDuration=!0}return t}function Kc(n=vt.visualDuration,t=vt.bounce){const a=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:c}=a;const u=a.keyframes[0],d=a.keyframes[a.keyframes.length-1],p={done:!1,value:u},{stiffness:m,damping:g,mass:x,duration:y,velocity:v,isResolvedFromDuration:j}=KS({...a,velocity:-Ys(a.velocity||0)}),N=v||0,S=g/(2*Math.sqrt(m*x)),k=d-u,O=Ys(Math.sqrt(m/x)),U=Math.abs(k)<5;i||(i=U?vt.restSpeed.granular:vt.restSpeed.default),c||(c=U?vt.restDelta.granular:vt.restDelta.default);let R;if(S<1){const F=Zh(O,S);R=te=>{const H=Math.exp(-S*O*te);return d-H*((N+S*O*k)/F*Math.sin(F*te)+k*Math.cos(F*te))}}else if(S===1)R=F=>d-Math.exp(-O*F)*(k+(N+O*k)*F);else{const F=O*Math.sqrt(S*S-1);R=te=>{const H=Math.exp(-S*O*te),M=Math.min(F*te,300);return d-H*((N+S*O*k)*Math.sinh(M)+F*k*Math.cosh(M))/F}}const Q={calculatedDuration:j&&y||null,next:F=>{const te=R(F);if(j)p.done=F>=y;else{let H=F===0?N:0;S<1&&(H=F===0?bn(N):mv(R,F,te));const M=Math.abs(H)<=i,re=Math.abs(d-te)<=c;p.done=M&&re}return p.value=p.done?d:te,p},toString:()=>{const F=Math.min(Kf(Q),Gc),te=fv(H=>Q.next(F*H).value,F,30);return F+"ms "+te},toTransition:()=>{}};return Q}Kc.applyToOptions=n=>{const t=VS(n,100,Kc);return n.ease=t.ease,n.duration=bn(t.duration),n.type="keyframes",n};function Jh({keyframes:n,velocity:t=0,power:a=.8,timeConstant:i=325,bounceDamping:c=10,bounceStiffness:u=500,modifyTarget:d,min:p,max:m,restDelta:g=.5,restSpeed:x}){const y=n[0],v={done:!1,value:y},j=M=>p!==void 0&&M<p||m!==void 0&&M>m,N=M=>p===void 0?m:m===void 0||Math.abs(p-M)<Math.abs(m-M)?p:m;let S=a*t;const k=y+S,O=d===void 0?k:d(k);O!==k&&(S=O-y);const U=M=>-S*Math.exp(-M/i),R=M=>O+U(M),Q=M=>{const re=U(M),je=R(M);v.done=Math.abs(re)<=g,v.value=v.done?O:je};let F,te;const H=M=>{j(v.value)&&(F=M,te=Kc({keyframes:[v.value,N(v.value)],velocity:mv(R,M,v.value),damping:c,stiffness:u,restDelta:g,restSpeed:x}))};return H(0),{calculatedDuration:null,next:M=>{let re=!1;return!te&&F===void 0&&(re=!0,Q(M),H(M)),F!==void 0&&M>=F?te.next(M-F):(!re&&Q(M),v)}}}function YS(n,t,a){const i=[],c=a||In.mix||hv,u=n.length-1;for(let d=0;d<u;d++){let p=c(n[d],n[d+1]);if(t){const m=Array.isArray(t)?t[d]||Xs:t;p=no(m,p)}i.push(p)}return i}function XS(n,t,{clamp:a=!0,ease:i,mixer:c}={}){const u=n.length;if(zf(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const d=n[0]===n[1];n[0]>n[u-1]&&(n=[...n].reverse(),t=[...t].reverse());const p=YS(t,i,c),m=p.length,g=x=>{if(d&&x<n[0])return t[0];let y=0;if(m>1)for(;y<n.length-2&&!(x<n[y+1]);y++);const v=Ql(n[y],n[y+1],x);return p[y](v)};return a?x=>g($n(n[0],n[u-1],x)):g}function QS(n,t){const a=n[n.length-1];for(let i=1;i<=t;i++){const c=Ql(0,t,i);n.push(pt(a,1,c))}}function FS(n){const t=[0];return QS(t,n.length-1),t}function ZS(n,t){return n.map(a=>a*t)}function JS(n,t){return n.map(()=>t||sv).splice(0,n.length-1)}function Hl({duration:n=300,keyframes:t,times:a,ease:i="easeInOut"}){const c=cS(i)?i.map(N0):N0(i),u={done:!1,value:t[0]},d=ZS(a&&a.length===t.length?a:FS(t),n),p=XS(d,t,{ease:Array.isArray(c)?c:JS(t,c)});return{calculatedDuration:n,next:m=>(u.value=p(m),u.done=m>=n,u)}}const WS=n=>n!==null;function Yf(n,{repeat:t,repeatType:a="loop"},i,c=1){const u=n.filter(WS),p=c<0||t&&a!=="loop"&&t%2===1?0:u.length-1;return!p||i===void 0?u[p]:i}const eT={decay:Jh,inertia:Jh,tween:Hl,keyframes:Hl,spring:Kc};function pv(n){typeof n.type=="string"&&(n.type=eT[n.type])}class Xf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const tT=n=>n/100;class Qf extends Xf{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,c;const{motionValue:a}=this.options;a&&a.updatedAt!==ys.now()&&this.tick(ys.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(c=(i=this.options).onStop)==null||c.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;pv(t);const{type:a=Hl,repeat:i=0,repeatDelay:c=0,repeatType:u,velocity:d=0}=t;let{keyframes:p}=t;const m=a||Hl;m!==Hl&&typeof p[0]!="number"&&(this.mixKeyframes=no(tT,hv(p[0],p[1])),p=[0,100]);const g=m({...t,keyframes:p});u==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...p].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=Kf(g));const{calculatedDuration:x}=g;this.calculatedDuration=x,this.resolvedDuration=x+c,this.totalDuration=this.resolvedDuration*(i+1)-c,this.generator=g}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:i,totalDuration:c,mixKeyframes:u,mirroredGenerator:d,resolvedDuration:p,calculatedDuration:m}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:x,repeat:y,repeatType:v,repeatDelay:j,type:N,onUpdate:S,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const O=this.currentTime-g*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?O<0:O>c;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let R=this.currentTime,Q=i;if(y){const M=Math.min(this.currentTime,c)/p;let re=Math.floor(M),je=M%1;!je&&M>=1&&(je=1),je===1&&re--,re=Math.min(re,y+1),!!(re%2)&&(v==="reverse"?(je=1-je,j&&(je-=j/p)):v==="mirror"&&(Q=d)),R=$n(0,1,je)*p}const F=U?{done:!1,value:x[0]}:Q.next(R);u&&(F.value=u(F.value));let{done:te}=F;!U&&m!==null&&(te=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return H&&N!==Jh&&(F.value=Yf(x,this.options,k,this.speed)),S&&S(F.value),H&&this.finish(),F}then(t,a){return this.finished.then(t,a)}get duration(){return Ys(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ys(t)}get time(){return Ys(this.currentTime)}set time(t){var a;t=bn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ys.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=Ys(this.currentTime))}play(){var c,u;if(this.isStopped)return;const{driver:t=LS,startTime:a}=this.options;this.driver||(this.driver=t(d=>this.tick(d))),(u=(c=this.options).onPlay)==null||u.call(c);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=a??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ys.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(t=this.options).onComplete)==null||a.call(t)}cancel(){var t,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(t=this.options).onCancel)==null||a.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),t.observe(this)}}function sT(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const hr=n=>n*180/Math.PI,Wh=n=>{const t=hr(Math.atan2(n[1],n[0]));return ef(t)},nT={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Wh,rotateZ:Wh,skewX:n=>hr(Math.atan(n[1])),skewY:n=>hr(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ef=n=>(n=n%360,n<0&&(n+=360),n),C0=Wh,O0=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),R0=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),aT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:O0,scaleY:R0,scale:n=>(O0(n)+R0(n))/2,rotateX:n=>ef(hr(Math.atan2(n[6],n[5]))),rotateY:n=>ef(hr(Math.atan2(-n[2],n[0]))),rotateZ:C0,rotate:C0,skewX:n=>hr(Math.atan(n[4])),skewY:n=>hr(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function tf(n){return n.includes("scale")?1:0}function sf(n,t){if(!n||n==="none")return tf(t);const a=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,c;if(a)i=aT,c=a;else{const p=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=nT,c=p}if(!c)return tf(t);const u=i[t],d=c[1].split(",").map(iT);return typeof u=="function"?u(d):d[u]}const rT=(n,t)=>{const{transform:a="none"}=getComputedStyle(n);return sf(a,t)};function iT(n){return parseFloat(n.trim())}const Ti=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ei=new Set(Ti),M0=n=>n===Si||n===Ee,lT=new Set(["x","y","z"]),oT=Ti.filter(n=>!lT.has(n));function cT(n){const t=[];return oT.forEach(a=>{const i=n.getValue(a);i!==void 0&&(t.push([a,i.get()]),i.set(a.startsWith("scale")?1:0))}),t}const fr={width:({x:n},{paddingLeft:t="0",paddingRight:a="0"})=>n.max-n.min-parseFloat(t)-parseFloat(a),height:({y:n},{paddingTop:t="0",paddingBottom:a="0"})=>n.max-n.min-parseFloat(t)-parseFloat(a),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>sf(t,"x"),y:(n,{transform:t})=>sf(t,"y")};fr.translateX=fr.x;fr.translateY=fr.y;const mr=new Set;let nf=!1,af=!1,rf=!1;function gv(){if(af){const n=Array.from(mr).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),a=new Map;t.forEach(i=>{const c=cT(i);c.length&&(a.set(i,c),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const c=a.get(i);c&&c.forEach(([u,d])=>{var p;(p=i.getValue(u))==null||p.set(d)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}af=!1,nf=!1,mr.forEach(n=>n.complete(rf)),mr.clear()}function xv(){mr.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(af=!0)})}function uT(){rf=!0,xv(),gv(),rf=!1}class Ff{constructor(t,a,i,c,u,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=i,this.motionValue=c,this.element=u,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(mr.add(this),nf||(nf=!0,dt.read(xv),dt.resolveKeyframes(gv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:i,motionValue:c}=this;if(t[0]===null){const u=c==null?void 0:c.get(),d=t[t.length-1];if(u!==void 0)t[0]=u;else if(i&&a){const p=i.readValue(a,d);p!=null&&(t[0]=p)}t[0]===void 0&&(t[0]=d),c&&u===void 0&&c.set(t[0])}sT(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),mr.delete(this)}cancel(){this.state==="scheduled"&&(mr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const dT=n=>n.startsWith("--");function hT(n,t,a){dT(t)?n.style.setProperty(t,a):n.style[t]=a}const fT=Bf(()=>window.ScrollTimeline!==void 0),mT={};function pT(n,t){const a=Bf(n);return()=>mT[t]??a()}const bv=pT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ll=([n,t,a,i])=>`cubic-bezier(${n}, ${t}, ${a}, ${i})`,D0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ll([0,.65,.55,1]),circOut:Ll([.55,0,1,.45]),backIn:Ll([.31,.01,.66,-.59]),backOut:Ll([.33,1.53,.69,.99])};function yv(n,t){if(n)return typeof n=="function"?bv()?fv(n,t):"ease-out":nv(n)?Ll(n):Array.isArray(n)?n.map(a=>yv(a,t)||D0.easeOut):D0[n]}function gT(n,t,a,{delay:i=0,duration:c=300,repeat:u=0,repeatType:d="loop",ease:p="easeOut",times:m}={},g=void 0){const x={[t]:a};m&&(x.offset=m);const y=yv(p,c);Array.isArray(y)&&(x.easing=y);const v={delay:i,duration:c,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"};return g&&(v.pseudoElement=g),n.animate(x,v)}function vv(n){return typeof n=="function"&&"applyToOptions"in n}function xT({type:n,...t}){return vv(n)&&bv()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class bT extends Xf{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:i,keyframes:c,pseudoElement:u,allowFlatten:d=!1,finalKeyframe:p,onComplete:m}=t;this.isPseudoElement=!!u,this.allowFlatten=d,this.options=t,zf(typeof t.type!="string");const g=xT(t);this.animation=gT(a,i,c,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const x=Yf(c,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(x):hT(a,i,x),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,a;(a=(t=this.animation).finish)==null||a.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,a;this.isPseudoElement||(a=(t=this.animation).commitStyles)==null||a.call(t)}get duration(){var a,i;const t=((i=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:i.call(a).duration)||0;return Ys(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ys(t)}get time(){return Ys(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=bn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&fT()?(this.animation.timeline=t,Xs):a(this)}}const wv={anticipate:Wy,backInOut:Jy,circInOut:tv};function yT(n){return n in wv}function vT(n){typeof n.ease=="string"&&yT(n.ease)&&(n.ease=wv[n.ease])}const U0=10;class wT extends bT{constructor(t){vT(t),pv(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:i,onComplete:c,element:u,...d}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const p=new Qf({...d,autoplay:!1}),m=bn(this.finishedTime??this.time);a.setWithVelocity(p.sample(m-U0).value,p.sample(m).value,U0),p.stop()}}const z0=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ca.test(n)||n==="0")&&!n.startsWith("url("));function jT(n){const t=n[0];if(n.length===1)return!0;for(let a=0;a<n.length;a++)if(n[a]!==t)return!0}function _T(n,t,a,i){const c=n[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const u=n[n.length-1],d=z0(c,t),p=z0(u,t);return!d||!p?!1:jT(n)||(a==="spring"||vv(a))&&i}function lf(n){n.duration=0,n.type="keyframes"}const NT=new Set(["opacity","clipPath","filter","transform"]),ST=Bf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TT(n){var x;const{motionValue:t,name:a,repeatDelay:i,repeatType:c,damping:u,type:d}=n;if(!(((x=t==null?void 0:t.owner)==null?void 0:x.current)instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=t.owner.getProps();return ST()&&a&&NT.has(a)&&(a!=="transform"||!g)&&!m&&!i&&c!=="mirror"&&u!==0&&d!=="inertia"}const ET=40;class kT extends Xf{constructor({autoplay:t=!0,delay:a=0,type:i="keyframes",repeat:c=0,repeatDelay:u=0,repeatType:d="loop",keyframes:p,name:m,motionValue:g,element:x,...y}){var N;super(),this.stop=()=>{var S,k;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=ys.now();const v={autoplay:t,delay:a,type:i,repeat:c,repeatDelay:u,repeatType:d,name:m,motionValue:g,element:x,...y},j=(x==null?void 0:x.KeyframeResolver)||Ff;this.keyframeResolver=new j(p,(S,k,O)=>this.onKeyframesResolved(S,k,v,!O),m,g,x),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(t,a,i,c){this.keyframeResolver=void 0;const{name:u,type:d,velocity:p,delay:m,isHandoff:g,onUpdate:x}=i;this.resolvedAt=ys.now(),_T(t,u,d,p)||((In.instantAnimations||!m)&&(x==null||x(Yf(t,i,a))),t[0]=t[t.length-1],lf(i),i.repeat=0);const v={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>ET?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...i,keyframes:t},j=!g&&TT(v)?new wT({...v,element:v.motionValue.owner.current}):new Qf(v);j.finished.then(()=>this.notifyFinished()).catch(Xs),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),uT()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const AT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CT(n){const t=AT.exec(n);if(!t)return[,];const[,a,i,c]=t;return[`--${a??i}`,c]}function jv(n,t,a=1){const[i,c]=CT(n);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const d=u.trim();return Iy(d)?parseFloat(d):d}return Hf(c)?jv(c,t,a+1):c}function Zf(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const _v=new Set(["width","height","top","left","right","bottom",...Ti]),OT={test:n=>n==="auto",parse:n=>n},Nv=n=>t=>t.test(n),Sv=[Si,Ee,yn,Ta,jS,wS,OT],B0=n=>Sv.find(Nv(n));function RT(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Ky(n):!0}const MT=new Set(["brightness","contrast","saturate","opacity"]);function DT(n){const[t,a]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=a.match($f)||[];if(!i)return n;const c=a.replace(i,"");let u=MT.has(t)?1:0;return i!==a&&(u*=100),t+"("+u+c+")"}const UT=/\b([a-z-]*)\(.*?\)/gu,of={...Ca,getAnimatableNone:n=>{const t=n.match(UT);return t?t.map(DT).join(" "):n}},L0={...Si,transform:Math.round},zT={rotate:Ta,rotateX:Ta,rotateY:Ta,rotateZ:Ta,scale:Cc,scaleX:Cc,scaleY:Cc,scaleZ:Cc,skew:Ta,skewX:Ta,skewY:Ta,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:Fl,originX:S0,originY:S0,originZ:Ee},Jf={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee,...zT,zIndex:L0,fillOpacity:Fl,strokeOpacity:Fl,numOctaves:L0},BT={...Jf,color:Rt,backgroundColor:Rt,outlineColor:Rt,fill:Rt,stroke:Rt,borderColor:Rt,borderTopColor:Rt,borderRightColor:Rt,borderBottomColor:Rt,borderLeftColor:Rt,filter:of,WebkitFilter:of},Tv=n=>BT[n];function Ev(n,t){let a=Tv(n);return a!==of&&(a=Ca),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const LT=new Set(["auto","none","0"]);function VT(n,t,a){let i=0,c;for(;i<n.length&&!c;){const u=n[i];typeof u=="string"&&!LT.has(u)&&Zl(u).values.length&&(c=n[i]),i++}if(c&&a)for(const u of t)n[u]=Ev(a,c)}class PT extends Ff{constructor(t,a,i,c,u){super(t,a,i,c,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:i}=this;if(!a||!a.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let g=t[m];if(typeof g=="string"&&(g=g.trim(),Hf(g))){const x=jv(g,a.current);x!==void 0&&(t[m]=x),m===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!_v.has(i)||t.length!==2)return;const[c,u]=t,d=B0(c),p=B0(u);if(d!==p)if(M0(d)&&M0(p))for(let m=0;m<t.length;m++){const g=t[m];typeof g=="string"&&(t[m]=parseFloat(g))}else fr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,i=[];for(let c=0;c<t.length;c++)(t[c]===null||RT(t[c]))&&i.push(c);i.length&&VT(t,i,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fr[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const c=a[a.length-1];c!==void 0&&t.getValue(i,c).jump(c,!1)}measureEndState(){var p;const{element:t,name:a,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const c=t.getValue(a);c&&c.jump(this.measuredOrigin,!1);const u=i.length-1,d=i[u];i[u]=fr[a](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),(p=this.removedTransforms)!=null&&p.length&&this.removedTransforms.forEach(([m,g])=>{t.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function qT(n,t,a){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const c=(a==null?void 0:a[n])??i.querySelectorAll(n);return c?Array.from(c):[]}return Array.from(n)}const kv=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Av(n){return Gy(n)&&"offsetHeight"in n}const V0=30,HT=n=>!isNaN(parseFloat(n));class $T{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var u;const c=ys.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=ys.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=HT(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new Lf);const i=this.events[t].add(a);return t==="change"?()=>{i(),dt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,a,i){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ys.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>V0)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,V0);return Yy(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,a;(t=this.dependents)==null||t.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wi(n,t){return new $T(n,t)}const{schedule:Wf}=av(queueMicrotask,!1),nn={x:!1,y:!1};function Cv(){return nn.x||nn.y}function IT(n){return n==="x"||n==="y"?nn[n]?null:(nn[n]=!0,()=>{nn[n]=!1}):nn.x||nn.y?null:(nn.x=nn.y=!0,()=>{nn.x=nn.y=!1})}function Ov(n,t){const a=qT(n),i=new AbortController,c={passive:!0,...t,signal:i.signal};return[a,c,()=>i.abort()]}function P0(n){return!(n.pointerType==="touch"||Cv())}function GT(n,t,a={}){const[i,c,u]=Ov(n,a),d=p=>{if(!P0(p))return;const{target:m}=p,g=t(m,p);if(typeof g!="function"||!m)return;const x=y=>{P0(y)&&(g(y),m.removeEventListener("pointerleave",x))};m.addEventListener("pointerleave",x,c)};return i.forEach(p=>{p.addEventListener("pointerenter",d,c)}),u}const Rv=(n,t)=>t?n===t?!0:Rv(n,t.parentElement):!1,em=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,KT=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YT(n){return KT.has(n.tagName)||n.tabIndex!==-1}const Uc=new WeakSet;function q0(n){return t=>{t.key==="Enter"&&n(t)}}function _h(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const XT=(n,t)=>{const a=n.currentTarget;if(!a)return;const i=q0(()=>{if(Uc.has(a))return;_h(a,"down");const c=q0(()=>{_h(a,"up")}),u=()=>_h(a,"cancel");a.addEventListener("keyup",c,t),a.addEventListener("blur",u,t)});a.addEventListener("keydown",i,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",i),t)};function H0(n){return em(n)&&!Cv()}function QT(n,t,a={}){const[i,c,u]=Ov(n,a),d=p=>{const m=p.currentTarget;if(!H0(p))return;Uc.add(m);const g=t(m,p),x=(j,N)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Uc.has(m)&&Uc.delete(m),H0(j)&&typeof g=="function"&&g(j,{success:N})},y=j=>{x(j,m===window||m===document||a.useGlobalTarget||Rv(m,j.target))},v=j=>{x(j,!1)};window.addEventListener("pointerup",y,c),window.addEventListener("pointercancel",v,c)};return i.forEach(p=>{(a.useGlobalTarget?window:p).addEventListener("pointerdown",d,c),Av(p)&&(p.addEventListener("focus",g=>XT(g,c)),!YT(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),u}function Mv(n){return Gy(n)&&"ownerSVGElement"in n}function FT(n){return Mv(n)&&n.tagName==="svg"}const es=n=>!!(n&&n.getVelocity),ZT=[...Sv,Rt,Ca],JT=n=>ZT.find(Nv(n)),tm=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function $0(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function WT(...n){return t=>{let a=!1;const i=n.map(c=>{const u=$0(c,t);return!a&&typeof u=="function"&&(a=!0),u});if(a)return()=>{for(let c=0;c<i.length;c++){const u=i[c];typeof u=="function"?u():$0(n[c],null)}}}}function eE(...n){return A.useCallback(WT(...n),n)}class tE extends A.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const i=a.offsetParent,c=Av(i)&&i.offsetWidth||0,u=this.props.sizeRef.current;u.height=a.offsetHeight||0,u.width=a.offsetWidth||0,u.top=a.offsetTop,u.left=a.offsetLeft,u.right=c-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sE({children:n,isPresent:t,anchorX:a,root:i}){const c=A.useId(),u=A.useRef(null),d=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=A.useContext(tm),m=eE(u,n==null?void 0:n.ref);return A.useInsertionEffect(()=>{const{width:g,height:x,top:y,left:v,right:j}=d.current;if(t||!u.current||!g||!x)return;const N=a==="left"?`left: ${v}`:`right: ${j}`;u.current.dataset.motionPopId=c;const S=document.createElement("style");p&&(S.nonce=p);const k=i??document.head;return k.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${x}px !important;
            ${N}px !important;
            top: ${y}px !important;
          }
        `),()=>{k.contains(S)&&k.removeChild(S)}},[t]),l.jsx(tE,{isPresent:t,childRef:u,sizeRef:d,children:A.cloneElement(n,{ref:m})})}const nE=({children:n,initial:t,isPresent:a,onExitComplete:i,custom:c,presenceAffectsLayout:u,mode:d,anchorX:p,root:m})=>{const g=Rf(aE),x=A.useId();let y=!0,v=A.useMemo(()=>(y=!1,{id:x,initial:t,isPresent:a,custom:c,onExitComplete:j=>{g.set(j,!0);for(const N of g.values())if(!N)return;i&&i()},register:j=>(g.set(j,!1),()=>g.delete(j))}),[a,g,i]);return u&&y&&(v={...v}),A.useMemo(()=>{g.forEach((j,N)=>g.set(N,!1))},[a]),A.useEffect(()=>{!a&&!g.size&&i&&i()},[a]),d==="popLayout"&&(n=l.jsx(sE,{isPresent:a,anchorX:p,root:m,children:n})),l.jsx(tu.Provider,{value:v,children:n})};function aE(){return new Map}function Dv(n=!0){const t=A.useContext(tu);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:i,register:c}=t,u=A.useId();A.useEffect(()=>{if(n)return c(u)},[n]);const d=A.useCallback(()=>n&&i&&i(u),[u,i,n]);return!a&&i?[!1,d]:[!0]}const Oc=n=>n.key||"";function I0(n){const t=[];return A.Children.forEach(n,a=>{A.isValidElement(a)&&t.push(a)}),t}const Nh=({children:n,custom:t,initial:a=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:p="left",root:m})=>{const[g,x]=Dv(d),y=A.useMemo(()=>I0(n),[n]),v=d&&!g?[]:y.map(Oc),j=A.useRef(!0),N=A.useRef(y),S=Rf(()=>new Map),[k,O]=A.useState(y),[U,R]=A.useState(y);$y(()=>{j.current=!1,N.current=y;for(let te=0;te<U.length;te++){const H=Oc(U[te]);v.includes(H)?S.delete(H):S.get(H)!==!0&&S.set(H,!1)}},[U,v.length,v.join("-")]);const Q=[];if(y!==k){let te=[...y];for(let H=0;H<U.length;H++){const M=U[H],re=Oc(M);v.includes(re)||(te.splice(H,0,M),Q.push(M))}return u==="wait"&&Q.length&&(te=Q),R(I0(te)),O(y),null}const{forceRender:F}=A.useContext(Of);return l.jsx(l.Fragment,{children:U.map(te=>{const H=Oc(te),M=d&&!g?!1:y===U||v.includes(H),re=()=>{if(S.has(H))S.set(H,!0);else return;let je=!0;S.forEach(xe=>{xe||(je=!1)}),je&&(F==null||F(),R(N.current),d&&(x==null||x()),i&&i())};return l.jsx(nE,{isPresent:M,initial:!j.current||a?void 0:!1,custom:t,presenceAffectsLayout:c,mode:u,root:m,onExitComplete:M?void 0:re,anchorX:p,children:te},H)})})},Uv=A.createContext({strict:!1}),G0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ji={};for(const n in G0)ji[n]={isEnabled:t=>G0[n].some(a=>!!t[a])};function rE(n){for(const t in n)ji[t]={...ji[t],...n[t]}}const iE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yc(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||iE.has(n)}let zv=n=>!Yc(n);function lE(n){typeof n=="function"&&(zv=t=>t.startsWith("on")?!Yc(t):n(t))}try{lE(require("@emotion/is-prop-valid").default)}catch{}function oE(n,t,a){const i={};for(const c in n)c==="values"&&typeof n.values=="object"||(zv(c)||a===!0&&Yc(c)||!t&&!Yc(c)||n.draggable&&c.startsWith("onDrag"))&&(i[c]=n[c]);return i}const su=A.createContext({});function nu(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Jl(n){return typeof n=="string"||Array.isArray(n)}const sm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nm=["initial",...sm];function au(n){return nu(n.animate)||nm.some(t=>Jl(n[t]))}function Bv(n){return!!(au(n)||n.variants)}function cE(n,t){if(au(n)){const{initial:a,animate:i}=n;return{initial:a===!1||Jl(a)?a:void 0,animate:Jl(i)?i:void 0}}return n.inherit!==!1?t:{}}function uE(n){const{initial:t,animate:a}=cE(n,A.useContext(su));return A.useMemo(()=>({initial:t,animate:a}),[K0(t),K0(a)])}function K0(n){return Array.isArray(n)?n.join(" "):n}const Wl={};function dE(n){for(const t in n)Wl[t]=n[t],qf(t)&&(Wl[t].isCSSVariable=!0)}function Lv(n,{layout:t,layoutId:a}){return Ei.has(n)||n.startsWith("origin")||(t||a!==void 0)&&(!!Wl[n]||n==="opacity")}const hE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fE=Ti.length;function mE(n,t,a){let i="",c=!0;for(let u=0;u<fE;u++){const d=Ti[u],p=n[d];if(p===void 0)continue;let m=!0;if(typeof p=="number"?m=p===(d.startsWith("scale")?1:0):m=parseFloat(p)===0,!m||a){const g=kv(p,Jf[d]);if(!m){c=!1;const x=hE[d]||d;i+=`${x}(${g}) `}a&&(t[d]=g)}}return i=i.trim(),a?i=a(t,c?"":i):c&&(i="none"),i}function am(n,t,a){const{style:i,vars:c,transformOrigin:u}=n;let d=!1,p=!1;for(const m in t){const g=t[m];if(Ei.has(m)){d=!0;continue}else if(qf(m)){c[m]=g;continue}else{const x=kv(g,Jf[m]);m.startsWith("origin")?(p=!0,u[m]=x):i[m]=x}}if(t.transform||(d||a?i.transform=mE(t,n.transform,a):i.transform&&(i.transform="none")),p){const{originX:m="50%",originY:g="50%",originZ:x=0}=u;i.transformOrigin=`${m} ${g} ${x}`}}const rm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Vv(n,t,a){for(const i in t)!es(t[i])&&!Lv(i,a)&&(n[i]=t[i])}function pE({transformTemplate:n},t){return A.useMemo(()=>{const a=rm();return am(a,t,n),Object.assign({},a.vars,a.style)},[t])}function gE(n,t){const a=n.style||{},i={};return Vv(i,a,n),Object.assign(i,pE(n,t)),i}function xE(n,t){const a={},i=gE(n,t);return n.drag&&n.dragListener!==!1&&(a.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(a.tabIndex=0),a.style=i,a}const bE={offset:"stroke-dashoffset",array:"stroke-dasharray"},yE={offset:"strokeDashoffset",array:"strokeDasharray"};function vE(n,t,a=1,i=0,c=!0){n.pathLength=1;const u=c?bE:yE;n[u.offset]=Ee.transform(-i);const d=Ee.transform(t),p=Ee.transform(a);n[u.array]=`${d} ${p}`}function Pv(n,{attrX:t,attrY:a,attrScale:i,pathLength:c,pathSpacing:u=1,pathOffset:d=0,...p},m,g,x){if(am(n,p,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(x==null?void 0:x.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),a!==void 0&&(y.y=a),i!==void 0&&(y.scale=i),c!==void 0&&vE(y,c,u,d,!1)}const qv=()=>({...rm(),attrs:{}}),Hv=n=>typeof n=="string"&&n.toLowerCase()==="svg";function wE(n,t,a,i){const c=A.useMemo(()=>{const u=qv();return Pv(u,t,Hv(i),n.transformTemplate,n.style),{...u.attrs,style:{...u.style}}},[t]);if(n.style){const u={};Vv(u,n.style,n),c.style={...u,...c.style}}return c}const jE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function im(n){return typeof n!="string"||n.includes("-")?!1:!!(jE.indexOf(n)>-1||/[A-Z]/u.test(n))}function _E(n,t,a,{latestValues:i},c,u=!1){const p=(im(n)?wE:xE)(t,i,c,n),m=oE(t,typeof n=="string",u),g=n!==A.Fragment?{...m,...p,ref:a}:{},{children:x}=t,y=A.useMemo(()=>es(x)?x.get():x,[x]);return A.createElement(n,{...g,children:y})}function Y0(n){const t=[{},{}];return n==null||n.values.forEach((a,i)=>{t[0][i]=a.get(),t[1][i]=a.getVelocity()}),t}function lm(n,t,a,i){if(typeof t=="function"){const[c,u]=Y0(i);t=t(a!==void 0?a:n.custom,c,u)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[c,u]=Y0(i);t=t(a!==void 0?a:n.custom,c,u)}return t}function zc(n){return es(n)?n.get():n}function NE({scrapeMotionValuesFromProps:n,createRenderState:t},a,i,c){return{latestValues:SE(a,i,c,n),renderState:t()}}function SE(n,t,a,i){const c={},u=i(n,{});for(const v in u)c[v]=zc(u[v]);let{initial:d,animate:p}=n;const m=au(n),g=Bv(n);t&&g&&!m&&n.inherit!==!1&&(d===void 0&&(d=t.initial),p===void 0&&(p=t.animate));let x=a?a.initial===!1:!1;x=x||d===!1;const y=x?p:d;if(y&&typeof y!="boolean"&&!nu(y)){const v=Array.isArray(y)?y:[y];for(let j=0;j<v.length;j++){const N=lm(n,v[j]);if(N){const{transitionEnd:S,transition:k,...O}=N;for(const U in O){let R=O[U];if(Array.isArray(R)){const Q=x?R.length-1:0;R=R[Q]}R!==null&&(c[U]=R)}for(const U in S)c[U]=S[U]}}}return c}const $v=n=>(t,a)=>{const i=A.useContext(su),c=A.useContext(tu),u=()=>NE(n,t,i,c);return a?u():Rf(u)};function om(n,t,a){var u;const{style:i}=n,c={};for(const d in i)(es(i[d])||t.style&&es(t.style[d])||Lv(d,n)||((u=a==null?void 0:a.getValue(d))==null?void 0:u.liveStyle)!==void 0)&&(c[d]=i[d]);return c}const TE=$v({scrapeMotionValuesFromProps:om,createRenderState:rm});function Iv(n,t,a){const i=om(n,t,a);for(const c in n)if(es(n[c])||es(t[c])){const u=Ti.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;i[u]=n[c]}return i}const EE=$v({scrapeMotionValuesFromProps:Iv,createRenderState:qv}),kE=Symbol.for("motionComponentSymbol");function hi(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function AE(n,t,a){return A.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),a&&(typeof a=="function"?a(i):hi(a)&&(a.current=i))},[t])}const cm=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),CE="framerAppearId",Gv="data-"+cm(CE),Kv=A.createContext({});function OE(n,t,a,i,c){var S,k;const{visualElement:u}=A.useContext(su),d=A.useContext(Uv),p=A.useContext(tu),m=A.useContext(tm).reducedMotion,g=A.useRef(null);i=i||d.renderer,!g.current&&i&&(g.current=i(n,{visualState:t,parent:u,props:a,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:m}));const x=g.current,y=A.useContext(Kv);x&&!x.projection&&c&&(x.type==="html"||x.type==="svg")&&RE(g.current,a,c,y);const v=A.useRef(!1);A.useInsertionEffect(()=>{x&&v.current&&x.update(a,p)});const j=a[Gv],N=A.useRef(!!j&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,j))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,j)));return $y(()=>{x&&(v.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),N.current&&x.animationState&&x.animationState.animateChanges())}),A.useEffect(()=>{x&&(!N.current&&x.animationState&&x.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)==null||O.call(window,j)}),N.current=!1),x.enteringChildren=void 0)}),x}function RE(n,t,a,i){const{layoutId:c,layout:u,drag:d,dragConstraints:p,layoutScroll:m,layoutRoot:g,layoutCrossfade:x}=t;n.projection=new a(n.latestValues,t["data-framer-portal-id"]?void 0:Yv(n.parent)),n.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||p&&hi(p),visualElement:n,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:x,layoutScroll:m,layoutRoot:g})}function Yv(n){if(n)return n.options.allowProjection!==!1?n.projection:Yv(n.parent)}function Sh(n,{forwardMotionProps:t=!1}={},a,i){a&&rE(a);const c=im(n)?EE:TE;function u(p,m){let g;const x={...A.useContext(tm),...p,layoutId:ME(p)},{isStatic:y}=x,v=uE(p),j=c(p,y);if(!y&&Mf){DE();const N=UE(x);g=N.MeasureLayout,v.visualElement=OE(n,j,x,i,N.ProjectionNode)}return l.jsxs(su.Provider,{value:v,children:[g&&v.visualElement?l.jsx(g,{visualElement:v.visualElement,...x}):null,_E(n,p,AE(j,v.visualElement,m),j,y,t)]})}u.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=A.forwardRef(u);return d[kE]=n,d}function ME({layoutId:n}){const t=A.useContext(Of).id;return t&&n!==void 0?t+"-"+n:n}function DE(n,t){A.useContext(Uv).strict}function UE(n){const{drag:t,layout:a}=ji;if(!t&&!a)return{};const i={...t,...a};return{MeasureLayout:t!=null&&t.isEnabled(n)||a!=null&&a.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function zE(n,t){if(typeof Proxy>"u")return Sh;const a=new Map,i=(u,d)=>Sh(u,d,n,t),c=(u,d)=>i(u,d);return new Proxy(c,{get:(u,d)=>d==="create"?i:(a.has(d)||a.set(d,Sh(d,void 0,n,t)),a.get(d))})}function Xv({top:n,left:t,right:a,bottom:i}){return{x:{min:t,max:a},y:{min:n,max:i}}}function BE({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function LE(n,t){if(!t)return n;const a=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:a.y,left:a.x,bottom:i.y,right:i.x}}function Th(n){return n===void 0||n===1}function cf({scale:n,scaleX:t,scaleY:a}){return!Th(n)||!Th(t)||!Th(a)}function ir(n){return cf(n)||Qv(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Qv(n){return X0(n.x)||X0(n.y)}function X0(n){return n&&n!=="0%"}function Xc(n,t,a){const i=n-a,c=t*i;return a+c}function Q0(n,t,a,i,c){return c!==void 0&&(n=Xc(n,c,i)),Xc(n,a,i)+t}function uf(n,t=0,a=1,i,c){n.min=Q0(n.min,t,a,i,c),n.max=Q0(n.max,t,a,i,c)}function Fv(n,{x:t,y:a}){uf(n.x,t.translate,t.scale,t.originPoint),uf(n.y,a.translate,a.scale,a.originPoint)}const F0=.999999999999,Z0=1.0000000000001;function VE(n,t,a,i=!1){const c=a.length;if(!c)return;t.x=t.y=1;let u,d;for(let p=0;p<c;p++){u=a[p],d=u.projectionDelta;const{visualElement:m}=u.options;m&&m.props.style&&m.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&mi(n,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,Fv(n,d)),i&&ir(u.latestValues)&&mi(n,u.latestValues))}t.x<Z0&&t.x>F0&&(t.x=1),t.y<Z0&&t.y>F0&&(t.y=1)}function fi(n,t){n.min=n.min+t,n.max=n.max+t}function J0(n,t,a,i,c=.5){const u=pt(n.min,n.max,c);uf(n,t,a,u,i)}function mi(n,t){J0(n.x,t.x,t.scaleX,t.scale,t.originX),J0(n.y,t.y,t.scaleY,t.scale,t.originY)}function Zv(n,t){return Xv(LE(n.getBoundingClientRect(),t))}function PE(n,t,a){const i=Zv(n,a),{scroll:c}=t;return c&&(fi(i.x,c.offset.x),fi(i.y,c.offset.y)),i}const W0=()=>({translate:0,scale:1,origin:0,originPoint:0}),pi=()=>({x:W0(),y:W0()}),eb=()=>({min:0,max:0}),Nt=()=>({x:eb(),y:eb()}),df={current:null},Jv={current:!1};function qE(){if(Jv.current=!0,!!Mf)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>df.current=n.matches;n.addEventListener("change",t),t()}else df.current=!1}const HE=new WeakMap;function $E(n,t,a){for(const i in t){const c=t[i],u=a[i];if(es(c))n.addValue(i,c);else if(es(u))n.addValue(i,wi(c,{owner:n}));else if(u!==c)if(n.hasValue(i)){const d=n.getValue(i);d.liveStyle===!0?d.jump(c):d.hasAnimated||d.set(c)}else{const d=n.getStaticValue(i);n.addValue(i,wi(d!==void 0?d:c,{owner:n}))}}for(const i in a)t[i]===void 0&&n.removeValue(i);return t}const tb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IE{scrapeMotionValuesFromProps(t,a,i){return{}}constructor({parent:t,props:a,presenceContext:i,reducedMotionConfig:c,blockInitialAnimation:u,visualState:d},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ff,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ys.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,dt.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=d;this.latestValues=m,this.baseTarget={...m},this.initialValues=a.initial?{...m}:{},this.renderState=g,this.parent=t,this.props=a,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=p,this.blockInitialAnimation=!!u,this.isControllingVariants=au(a),this.isVariantNode=Bv(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:x,...y}=this.scrapeMotionValuesFromProps(a,{},this);for(const v in y){const j=y[v];m[v]!==void 0&&es(j)&&j.set(m[v])}}mount(t){var a;this.current=t,HE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,c)=>this.bindToMotionValue(c,i)),Jv.current||qE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:df.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const i=this.features[a];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Ei.has(t);i&&this.onBindTransform&&this.onBindTransform();const c=a.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&dt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{c(),u&&u(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ji){const a=ji[t];if(!a)continue;const{isEnabled:i,Feature:c}=a;if(!this.features[t]&&c&&i(this.props)&&(this.features[t]=new c(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let i=0;i<tb.length;i++){const c=tb[i];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const u="on"+c,d=t[u];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=$E(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const i=this.values.get(t);a!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&a!==void 0&&(i=wi(a===null?void 0:a,{owner:this}),this.addValue(t,i)),i}readValue(t,a){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Iy(i)||Ky(i))?i=parseFloat(i):!JT(i)&&Ca.test(a)&&(i=Ev(t,a)),this.setBaseTarget(t,es(i)?i.get():i)),es(i)?i.get():i}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){var u;const{initial:a}=this.props;let i;if(typeof a=="string"||typeof a=="object"){const d=lm(this.props,a,(u=this.presenceContext)==null?void 0:u.custom);d&&(i=d[t])}if(a&&i!==void 0)return i;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!es(c)?c:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new Lf),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}scheduleRenderMicrotask(){Wf.render(this.render)}}class Wv extends IE{constructor(){super(...arguments),this.KeyframeResolver=PT}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:i}){delete a[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;es(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function ew(n,{style:t,vars:a},i,c){const u=n.style;let d;for(d in t)u[d]=t[d];c==null||c.applyProjectionStyles(u,i);for(d in a)u.setProperty(d,a[d])}function GE(n){return window.getComputedStyle(n)}class KE extends Wv{constructor(){super(...arguments),this.type="html",this.renderInstance=ew}readValueFromInstance(t,a){var i;if(Ei.has(a))return(i=this.projection)!=null&&i.isProjecting?tf(a):rT(t,a);{const c=GE(t),u=(qf(a)?c.getPropertyValue(a):c[a])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:a}){return Zv(t,a)}build(t,a,i){am(t,a,i.transformTemplate)}scrapeMotionValuesFromProps(t,a,i){return om(t,a,i)}}const tw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YE(n,t,a,i){ew(n,t,void 0,i);for(const c in t.attrs)n.setAttribute(tw.has(c)?c:cm(c),t.attrs[c])}class XE extends Wv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(Ei.has(a)){const i=Tv(a);return i&&i.default||0}return a=tw.has(a)?a:cm(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,i){return Iv(t,a,i)}build(t,a,i){Pv(t,a,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,a,i,c){YE(t,a,i,c)}mount(t){this.isSVGTag=Hv(t.tagName),super.mount(t)}}const QE=(n,t)=>im(n)?new XE(t):new KE(t,{allowProjection:n!==A.Fragment});function bi(n,t,a){const i=n.getProps();return lm(i,t,a!==void 0?a:i.custom,n)}const hf=n=>Array.isArray(n);function FE(n,t,a){n.hasValue(t)?n.getValue(t).set(a):n.addValue(t,wi(a))}function ZE(n){return hf(n)?n[n.length-1]||0:n}function JE(n,t){const a=bi(n,t);let{transitionEnd:i={},transition:c={},...u}=a||{};u={...u,...i};for(const d in u){const p=ZE(u[d]);FE(n,d,p)}}function WE(n){return!!(es(n)&&n.add)}function ff(n,t){const a=n.getValue("willChange");if(WE(a))return a.add(t);if(!a&&In.WillChange){const i=new In.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function sw(n){return n.props[Gv]}const ek=n=>n!==null;function tk(n,{repeat:t,repeatType:a="loop"},i){const c=n.filter(ek),u=t&&a!=="loop"&&t%2===1?0:c.length-1;return c[u]}const sk={type:"spring",stiffness:500,damping:25,restSpeed:10},nk=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),ak={type:"keyframes",duration:.8},rk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ik=(n,{keyframes:t})=>t.length>2?ak:Ei.has(n)?n.startsWith("scale")?nk(t[1]):sk:rk;function lk({when:n,delay:t,delayChildren:a,staggerChildren:i,staggerDirection:c,repeat:u,repeatType:d,repeatDelay:p,from:m,elapsed:g,...x}){return!!Object.keys(x).length}const um=(n,t,a,i={},c,u)=>d=>{const p=Zf(i,n)||{},m=p.delay||i.delay||0;let{elapsed:g=0}=i;g=g-bn(m);const x={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...p,delay:-g,onUpdate:v=>{t.set(v),p.onUpdate&&p.onUpdate(v)},onComplete:()=>{d(),p.onComplete&&p.onComplete()},name:n,motionValue:t,element:u?void 0:c};lk(p)||Object.assign(x,ik(n,x)),x.duration&&(x.duration=bn(x.duration)),x.repeatDelay&&(x.repeatDelay=bn(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let y=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(lf(x),x.delay===0&&(y=!0)),(In.instantAnimations||In.skipAnimations)&&(y=!0,lf(x),x.delay=0),x.allowFlatten=!p.type&&!p.ease,y&&!u&&t.get()!==void 0){const v=tk(x.keyframes,p);if(v!==void 0){dt.update(()=>{x.onUpdate(v),x.onComplete()});return}}return p.isSync?new Qf(x):new kT(x)};function ok({protectedKeys:n,needsAnimating:t},a){const i=n.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,i}function nw(n,t,{delay:a=0,transitionOverride:i,type:c}={}){let{transition:u=n.getDefaultTransition(),transitionEnd:d,...p}=t;i&&(u=i);const m=[],g=c&&n.animationState&&n.animationState.getState()[c];for(const x in p){const y=n.getValue(x,n.latestValues[x]??null),v=p[x];if(v===void 0||g&&ok(g,x))continue;const j={delay:a,...Zf(u||{},x)},N=y.get();if(N!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===N&&!j.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const O=sw(n);if(O){const U=window.MotionHandoffAnimation(O,x,dt);U!==null&&(j.startTime=U,S=!0)}}ff(n,x),y.start(um(x,y,v,n.shouldReduceMotion&&_v.has(x)?{type:!1}:j,n,S));const k=y.animation;k&&m.push(k)}return d&&Promise.all(m).then(()=>{dt.update(()=>{d&&JE(n,d)})}),m}function aw(n,t,a,i=0,c=1){const u=Array.from(n).sort((g,x)=>g.sortNodePosition(x)).indexOf(t),d=n.size,p=(d-1)*i;return typeof a=="function"?a(u,d):c===1?u*i:p-u*i}function mf(n,t,a={}){var m;const i=bi(n,t,a.type==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);let{transition:c=n.getDefaultTransition()||{}}=i||{};a.transitionOverride&&(c=a.transitionOverride);const u=i?()=>Promise.all(nw(n,i,a)):()=>Promise.resolve(),d=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:v}=c;return ck(n,t,g,x,y,v,a)}:()=>Promise.resolve(),{when:p}=c;if(p){const[g,x]=p==="beforeChildren"?[u,d]:[d,u];return g().then(()=>x())}else return Promise.all([u(),d(a.delay)])}function ck(n,t,a=0,i=0,c=0,u=1,d){const p=[];for(const m of n.variantChildren)m.notify("AnimationStart",t),p.push(mf(m,t,{...d,delay:a+(typeof i=="function"?0:i)+aw(n.variantChildren,m,i,c,u)}).then(()=>m.notify("AnimationComplete",t)));return Promise.all(p)}function uk(n,t,a={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const c=t.map(u=>mf(n,u,a));i=Promise.all(c)}else if(typeof t=="string")i=mf(n,t,a);else{const c=typeof t=="function"?bi(n,t,a.custom):t;i=Promise.all(nw(n,c,a))}return i.then(()=>{n.notify("AnimationComplete",t)})}function rw(n,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==n.length)return!1;for(let i=0;i<a;i++)if(t[i]!==n[i])return!1;return!0}const dk=nm.length;function iw(n){if(!n)return;if(!n.isControllingVariants){const a=n.parent?iw(n.parent)||{}:{};return n.props.initial!==void 0&&(a.initial=n.props.initial),a}const t={};for(let a=0;a<dk;a++){const i=nm[a],c=n.props[i];(Jl(c)||c===!1)&&(t[i]=c)}return t}const hk=[...sm].reverse(),fk=sm.length;function mk(n){return t=>Promise.all(t.map(({animation:a,options:i})=>uk(n,a,i)))}function pk(n){let t=mk(n),a=sb(),i=!0;const c=m=>(g,x)=>{var v;const y=bi(n,x,m==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:j,transitionEnd:N,...S}=y;g={...g,...S,...N}}return g};function u(m){t=m(n)}function d(m){const{props:g}=n,x=iw(n.parent)||{},y=[],v=new Set;let j={},N=1/0;for(let k=0;k<fk;k++){const O=hk[k],U=a[O],R=g[O]!==void 0?g[O]:x[O],Q=Jl(R),F=O===m?U.isActive:null;F===!1&&(N=k);let te=R===x[O]&&R!==g[O]&&Q;if(te&&i&&n.manuallyAnimateOnMount&&(te=!1),U.protectedKeys={...j},!U.isActive&&F===null||!R&&!U.prevProp||nu(R)||typeof R=="boolean")continue;const H=gk(U.prevProp,R);let M=H||O===m&&U.isActive&&!te&&Q||k>N&&Q,re=!1;const je=Array.isArray(R)?R:[R];let xe=je.reduce(c(O),{});F===!1&&(xe={});const{prevResolvedValues:Te={}}=U,Me={...Te,...xe},Ge=X=>{M=!0,v.has(X)&&(re=!0,v.delete(X)),U.needsAnimating[X]=!0;const ie=n.getValue(X);ie&&(ie.liveStyle=!1)};for(const X in Me){const ie=xe[X],ye=Te[X];if(j.hasOwnProperty(X))continue;let Z=!1;hf(ie)&&hf(ye)?Z=!rw(ie,ye):Z=ie!==ye,Z?ie!=null?Ge(X):v.add(X):ie!==void 0&&v.has(X)?Ge(X):U.protectedKeys[X]=!0}U.prevProp=R,U.prevResolvedValues=xe,U.isActive&&(j={...j,...xe}),i&&n.blockInitialAnimation&&(M=!1);const oe=te&&H;M&&(!oe||re)&&y.push(...je.map(X=>{const ie={type:O};if(typeof X=="string"&&i&&!oe&&n.manuallyAnimateOnMount&&n.parent){const{parent:ye}=n,Z=bi(ye,X);if(ye.enteringChildren&&Z){const{delayChildren:T}=Z.transition||{};ie.delay=aw(ye.enteringChildren,n,T)}}return{animation:X,options:ie}}))}if(v.size){const k={};if(typeof g.initial!="boolean"){const O=bi(n,Array.isArray(g.initial)?g.initial[0]:g.initial);O&&O.transition&&(k.transition=O.transition)}v.forEach(O=>{const U=n.getBaseTarget(O),R=n.getValue(O);R&&(R.liveStyle=!0),k[O]=U??null}),y.push({animation:k})}let S=!!y.length;return i&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?t(y):Promise.resolve()}function p(m,g){var y;if(a[m].isActive===g)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(v=>{var j;return(j=v.animationState)==null?void 0:j.setActive(m,g)}),a[m].isActive=g;const x=d(m);for(const v in a)a[v].protectedKeys={};return x}return{animateChanges:d,setActive:p,setAnimateFunction:u,getState:()=>a,reset:()=>{a=sb()}}}function gk(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!rw(t,n):!1}function ar(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sb(){return{animate:ar(!0),whileInView:ar(),whileHover:ar(),whileTap:ar(),whileDrag:ar(),whileFocus:ar(),exit:ar()}}class Ra{constructor(t){this.isMounted=!1,this.node=t}update(){}}class xk extends Ra{constructor(t){super(t),t.animationState||(t.animationState=pk(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();nu(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let bk=0;class yk extends Ra{constructor(){super(...arguments),this.id=bk++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const c=this.node.animationState.setActive("exit",!t);a&&!t&&c.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const vk={animation:{Feature:xk},exit:{Feature:yk}};function eo(n,t,a,i={passive:!0}){return n.addEventListener(t,a,i),()=>n.removeEventListener(t,a)}function io(n){return{point:{x:n.pageX,y:n.pageY}}}const wk=n=>t=>em(t)&&n(t,io(t));function $l(n,t,a,i){return eo(n,t,wk(a),i)}const lw=1e-4,jk=1-lw,_k=1+lw,ow=.01,Nk=0-ow,Sk=0+ow;function cs(n){return n.max-n.min}function Tk(n,t,a){return Math.abs(n-t)<=a}function nb(n,t,a,i=.5){n.origin=i,n.originPoint=pt(t.min,t.max,n.origin),n.scale=cs(a)/cs(t),n.translate=pt(a.min,a.max,n.origin)-n.originPoint,(n.scale>=jk&&n.scale<=_k||isNaN(n.scale))&&(n.scale=1),(n.translate>=Nk&&n.translate<=Sk||isNaN(n.translate))&&(n.translate=0)}function Il(n,t,a,i){nb(n.x,t.x,a.x,i?i.originX:void 0),nb(n.y,t.y,a.y,i?i.originY:void 0)}function ab(n,t,a){n.min=a.min+t.min,n.max=n.min+cs(t)}function Ek(n,t,a){ab(n.x,t.x,a.x),ab(n.y,t.y,a.y)}function rb(n,t,a){n.min=t.min-a.min,n.max=n.min+cs(t)}function Gl(n,t,a){rb(n.x,t.x,a.x),rb(n.y,t.y,a.y)}function Ks(n){return[n("x"),n("y")]}const cw=({current:n})=>n?n.ownerDocument.defaultView:null,ib=(n,t)=>Math.abs(n-t);function kk(n,t){const a=ib(n.x,t.x),i=ib(n.y,t.y);return Math.sqrt(a**2+i**2)}class uw{constructor(t,a,{transformPagePoint:i,contextWindow:c=window,dragSnapToOrigin:u=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=kh(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,N=kk(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!N)return;const{point:S}=v,{timestamp:k}=Ft;this.history.push({...S,timestamp:k});const{onStart:O,onMove:U}=this.handlers;j||(O&&O(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,v)},this.handlePointerMove=(v,j)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Eh(j,this.transformPagePoint),dt.update(this.updatePoint,!0)},this.handlePointerUp=(v,j)=>{this.end();const{onEnd:N,onSessionEnd:S,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=kh(v.type==="pointercancel"?this.lastMoveEventInfo:Eh(j,this.transformPagePoint),this.history);this.startEvent&&N&&N(v,O),S&&S(v,O)},!em(t))return;this.dragSnapToOrigin=u,this.handlers=a,this.transformPagePoint=i,this.distanceThreshold=d,this.contextWindow=c||window;const p=io(t),m=Eh(p,this.transformPagePoint),{point:g}=m,{timestamp:x}=Ft;this.history=[{...g,timestamp:x}];const{onSessionStart:y}=a;y&&y(t,kh(m,this.history)),this.removeListeners=no($l(this.contextWindow,"pointermove",this.handlePointerMove),$l(this.contextWindow,"pointerup",this.handlePointerUp),$l(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function Eh(n,t){return t?{point:t(n.point)}:n}function lb(n,t){return{x:n.x-t.x,y:n.y-t.y}}function kh({point:n},t){return{point:n,delta:lb(n,dw(t)),offset:lb(n,Ak(t)),velocity:Ck(t,.1)}}function Ak(n){return n[0]}function dw(n){return n[n.length-1]}function Ck(n,t){if(n.length<2)return{x:0,y:0};let a=n.length-1,i=null;const c=dw(n);for(;a>=0&&(i=n[a],!(c.timestamp-i.timestamp>bn(t)));)a--;if(!i)return{x:0,y:0};const u=Ys(c.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const d={x:(c.x-i.x)/u,y:(c.y-i.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function Ok(n,{min:t,max:a},i){return t!==void 0&&n<t?n=i?pt(t,n,i.min):Math.max(n,t):a!==void 0&&n>a&&(n=i?pt(a,n,i.max):Math.min(n,a)),n}function ob(n,t,a){return{min:t!==void 0?n.min+t:void 0,max:a!==void 0?n.max+a-(n.max-n.min):void 0}}function Rk(n,{top:t,left:a,bottom:i,right:c}){return{x:ob(n.x,a,c),y:ob(n.y,t,i)}}function cb(n,t){let a=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([a,i]=[i,a]),{min:a,max:i}}function Mk(n,t){return{x:cb(n.x,t.x),y:cb(n.y,t.y)}}function Dk(n,t){let a=.5;const i=cs(n),c=cs(t);return c>i?a=Ql(t.min,t.max-i,n.min):i>c&&(a=Ql(n.min,n.max-c,t.min)),$n(0,1,a)}function Uk(n,t){const a={};return t.min!==void 0&&(a.min=t.min-n.min),t.max!==void 0&&(a.max=t.max-n.min),a}const pf=.35;function zk(n=pf){return n===!1?n=0:n===!0&&(n=pf),{x:ub(n,"left","right"),y:ub(n,"top","bottom")}}function ub(n,t,a){return{min:db(n,t),max:db(n,a)}}function db(n,t){return typeof n=="number"?n:n[t]||0}const Bk=new WeakMap;class Lk{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:a=!1,distanceThreshold:i}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const u=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(io(y).point)},d=(y,v)=>{const{drag:j,dragPropagation:N,onDragStart:S}=this.getProps();if(j&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IT(j),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ks(O=>{let U=this.getAxisMotionValue(O).get()||0;if(yn.test(U)){const{projection:R}=this.visualElement;if(R&&R.layout){const Q=R.layout.layoutBox[O];Q&&(U=cs(Q)*(parseFloat(U)/100))}}this.originPoint[O]=U}),S&&dt.postRender(()=>S(y,v)),ff(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},p=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:j,dragDirectionLock:N,onDirectionLock:S,onDrag:k}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:O}=v;if(N&&this.currentDirection===null){this.currentDirection=Vk(O),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,O),this.updateAxis("y",v.point,O),this.visualElement.render(),k&&k(y,v)},m=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Ks(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:x}=this.getProps();this.panSession=new uw(t,{onSessionStart:u,onStart:d,onMove:p,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,distanceThreshold:i,contextWindow:cw(this.visualElement)})}stop(t,a){const i=t||this.latestPointerEvent,c=a||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!c||!i)return;const{velocity:d}=c;this.startAnimation(d);const{onDragEnd:p}=this.getProps();p&&dt.postRender(()=>p(i,c))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,i){const{drag:c}=this.getProps();if(!i||!Rc(t,c,this.currentDirection))return;const u=this.getAxisMotionValue(t);let d=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(d=Ok(d,this.constraints[t],this.elastic[t])),u.set(d)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:a}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,c=this.constraints;t&&hi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Rk(i.layoutBox,t):this.constraints=!1,this.elastic=zk(a),c!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ks(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=Uk(i.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!hi(t))return!1;const i=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const u=PE(i,c.root,this.visualElement.getTransformPagePoint());let d=Mk(c.layout.layoutBox,u);if(a){const p=a(BE(d));this.hasMutatedConstraints=!!p,p&&(d=Xv(p))}return d}startAnimation(t){const{drag:a,dragMomentum:i,dragElastic:c,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:p}=this.getProps(),m=this.constraints||{},g=Ks(x=>{if(!Rc(x,a,this.currentDirection))return;let y=m&&m[x]||{};d&&(y={min:0,max:0});const v=c?200:1e6,j=c?40:1e7,N={type:"inertia",velocity:i?t[x]:0,bounceStiffness:v,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...u,...y};return this.startAxisValueAnimation(x,N)});return Promise.all(g).then(p)}startAxisValueAnimation(t,a){const i=this.getAxisMotionValue(t);return ff(this.visualElement,t),i.start(um(t,i,0,a,this.visualElement,!1))}stopAnimation(){Ks(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ks(t=>{var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.pause()})}getAnimationState(t){var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),c=i[a];return c||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ks(a=>{const{drag:i}=this.getProps();if(!Rc(a,i,this.currentDirection))return;const{projection:c}=this.visualElement,u=this.getAxisMotionValue(a);if(c&&c.layout){const{min:d,max:p}=c.layout.layoutBox[a];u.set(t[a]-pt(d,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:i}=this.visualElement;if(!hi(a)||!i||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Ks(d=>{const p=this.getAxisMotionValue(d);if(p&&this.constraints!==!1){const m=p.get();c[d]=Dk({min:m,max:m},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ks(d=>{if(!Rc(d,t,null))return;const p=this.getAxisMotionValue(d),{min:m,max:g}=this.constraints[d];p.set(pt(m,g,c[d]))})}addListeners(){if(!this.visualElement.current)return;Bk.set(this.visualElement,this);const t=this.visualElement.current,a=$l(t,"pointerdown",m=>{const{drag:g,dragListener:x=!0}=this.getProps();g&&x&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();hi(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,u=c.addEventListener("measure",i);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),dt.read(i);const d=eo(window,"resize",()=>this.scalePositionWithinConstraints()),p=c.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Ks(x=>{const y=this.getAxisMotionValue(x);y&&(this.originPoint[x]+=m[x].translate,y.set(y.get()+m[x].translate))}),this.visualElement.render())}));return()=>{d(),a(),u(),p&&p()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:i=!1,dragPropagation:c=!1,dragConstraints:u=!1,dragElastic:d=pf,dragMomentum:p=!0}=t;return{...t,drag:a,dragDirectionLock:i,dragPropagation:c,dragConstraints:u,dragElastic:d,dragMomentum:p}}}function Rc(n,t,a){return(t===!0||t===n)&&(a===null||a===n)}function Vk(n,t=10){let a=null;return Math.abs(n.y)>t?a="y":Math.abs(n.x)>t&&(a="x"),a}class Pk extends Ra{constructor(t){super(t),this.removeGroupControls=Xs,this.removeListeners=Xs,this.controls=new Lk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xs}unmount(){this.removeGroupControls(),this.removeListeners()}}const hb=n=>(t,a)=>{n&&dt.postRender(()=>n(t,a))};class qk extends Ra{constructor(){super(...arguments),this.removePointerDownListener=Xs}onPointerDown(t){this.session=new uw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:i,onPanEnd:c}=this.node.getProps();return{onSessionStart:hb(t),onStart:hb(a),onMove:i,onEnd:(u,d)=>{delete this.session,c&&dt.postRender(()=>c(u,d))}}}mount(){this.removePointerDownListener=$l(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fb(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ul={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Ee.test(n))n=parseFloat(n);else return n;const a=fb(n,t.target.x),i=fb(n,t.target.y);return`${a}% ${i}%`}},Hk={correct:(n,{treeScale:t,projectionDelta:a})=>{const i=n,c=Ca.parse(n);if(c.length>5)return i;const u=Ca.createTransformer(n),d=typeof c[0]!="number"?1:0,p=a.x.scale*t.x,m=a.y.scale*t.y;c[0+d]/=p,c[1+d]/=m;const g=pt(p,m,.5);return typeof c[2+d]=="number"&&(c[2+d]/=g),typeof c[3+d]=="number"&&(c[3+d]/=g),u(c)}};let Ah=!1;class $k extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:i,layoutId:c}=this.props,{projection:u}=t;dE(Ik),u&&(a.group&&a.group.add(u),i&&i.register&&c&&i.register(u),Ah&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Bc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:i,drag:c,isPresent:u}=this.props,{projection:d}=i;return d&&(d.isPresent=u,Ah=!0,c||t.layoutDependency!==a||a===void 0||t.isPresent!==u?d.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?d.promote():d.relegate()||dt.postRender(()=>{const p=d.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Wf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:i}=this.props,{projection:c}=t;Ah=!0,c&&(c.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(c),i&&i.deregister&&i.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function hw(n){const[t,a]=Dv(),i=A.useContext(Of);return l.jsx($k,{...n,layoutGroup:i,switchLayoutGroup:A.useContext(Kv),isPresent:t,safeToRemove:a})}const Ik={borderRadius:{...Ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ul,borderTopRightRadius:Ul,borderBottomLeftRadius:Ul,borderBottomRightRadius:Ul,boxShadow:Hk};function Gk(n,t,a){const i=es(n)?n:wi(n);return i.start(um("",i,t,a)),i.animation}const Kk=(n,t)=>n.depth-t.depth;class Yk{constructor(){this.children=[],this.isDirty=!1}add(t){Df(this.children,t),this.isDirty=!0}remove(t){Uf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Kk),this.isDirty=!1,this.children.forEach(t)}}function Xk(n,t){const a=ys.now(),i=({timestamp:c})=>{const u=c-a;u>=t&&(Aa(i),n(u-t))};return dt.setup(i,!0),()=>Aa(i)}const fw=["TopLeft","TopRight","BottomLeft","BottomRight"],Qk=fw.length,mb=n=>typeof n=="string"?parseFloat(n):n,pb=n=>typeof n=="number"||Ee.test(n);function Fk(n,t,a,i,c,u){c?(n.opacity=pt(0,a.opacity??1,Zk(i)),n.opacityExit=pt(t.opacity??1,0,Jk(i))):u&&(n.opacity=pt(t.opacity??1,a.opacity??1,i));for(let d=0;d<Qk;d++){const p=`border${fw[d]}Radius`;let m=gb(t,p),g=gb(a,p);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||pb(m)===pb(g)?(n[p]=Math.max(pt(mb(m),mb(g),i),0),(yn.test(g)||yn.test(m))&&(n[p]+="%")):n[p]=g}(t.rotate||a.rotate)&&(n.rotate=pt(t.rotate||0,a.rotate||0,i))}function gb(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const Zk=mw(0,.5,ev),Jk=mw(.5,.95,Xs);function mw(n,t,a){return i=>i<n?0:i>t?1:a(Ql(n,t,i))}function xb(n,t){n.min=t.min,n.max=t.max}function Gs(n,t){xb(n.x,t.x),xb(n.y,t.y)}function bb(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function yb(n,t,a,i,c){return n-=t,n=Xc(n,1/a,i),c!==void 0&&(n=Xc(n,1/c,i)),n}function Wk(n,t=0,a=1,i=.5,c,u=n,d=n){if(yn.test(t)&&(t=parseFloat(t),t=pt(d.min,d.max,t/100)-d.min),typeof t!="number")return;let p=pt(u.min,u.max,i);n===u&&(p-=t),n.min=yb(n.min,t,a,p,c),n.max=yb(n.max,t,a,p,c)}function vb(n,t,[a,i,c],u,d){Wk(n,t[a],t[i],t[c],t.scale,u,d)}const e3=["x","scaleX","originX"],t3=["y","scaleY","originY"];function wb(n,t,a,i){vb(n.x,t,e3,a?a.x:void 0,i?i.x:void 0),vb(n.y,t,t3,a?a.y:void 0,i?i.y:void 0)}function jb(n){return n.translate===0&&n.scale===1}function pw(n){return jb(n.x)&&jb(n.y)}function _b(n,t){return n.min===t.min&&n.max===t.max}function s3(n,t){return _b(n.x,t.x)&&_b(n.y,t.y)}function Nb(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function gw(n,t){return Nb(n.x,t.x)&&Nb(n.y,t.y)}function Sb(n){return cs(n.x)/cs(n.y)}function Tb(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class n3{constructor(){this.members=[]}add(t){Df(this.members,t),t.scheduleRender()}remove(t){if(Uf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(c=>t===c);if(a===0)return!1;let i;for(let c=a;c>=0;c--){const u=this.members[c];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,a){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,a&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:i}=t;a.onExitComplete&&a.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function a3(n,t,a){let i="";const c=n.x.translate/t.x,u=n.y.translate/t.y,d=(a==null?void 0:a.z)||0;if((c||u||d)&&(i=`translate3d(${c}px, ${u}px, ${d}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:g,rotate:x,rotateX:y,rotateY:v,skewX:j,skewY:N}=a;g&&(i=`perspective(${g}px) ${i}`),x&&(i+=`rotate(${x}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),j&&(i+=`skewX(${j}deg) `),N&&(i+=`skewY(${N}deg) `)}const p=n.x.scale*t.x,m=n.y.scale*t.y;return(p!==1||m!==1)&&(i+=`scale(${p}, ${m})`),i||"none"}const Ch=["","X","Y","Z"],r3=1e3;let i3=0;function Oh(n,t,a,i){const{latestValues:c}=t;c[n]&&(a[n]=c[n],t.setStaticValue(n,0),i&&(i[n]=0))}function xw(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const a=sw(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:c,layoutId:u}=n.options;window.MotionCancelOptimisedAnimation(a,"transform",dt,!(c||u))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&xw(i)}function bw({attachResizeListener:n,defaultParent:t,measureScroll:a,checkIsScrollRoot:i,resetTransform:c}){return class{constructor(d={},p=t==null?void 0:t()){this.id=i3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(c3),this.nodes.forEach(f3),this.nodes.forEach(m3),this.nodes.forEach(u3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new Yk)}addEventListener(d,p){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new Lf),this.eventHandlers.get(d).add(p)}notifyListeners(d,...p){const m=this.eventHandlers.get(d);m&&m.notify(...p)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=Mv(d)&&!FT(d),this.instance=d;const{layoutId:p,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||p)&&(this.isLayoutDirty=!0),n){let x,y=0;const v=()=>this.root.updateBlockedByResize=!1;dt.read(()=>{y=window.innerWidth}),n(d,()=>{const j=window.innerWidth;j!==y&&(y=j,this.root.updateBlockedByResize=!0,x&&x(),x=Xk(v,250),Bc.hasAnimatedSinceResize&&(Bc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ab)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&g&&(p||m)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||g.getDefaultTransition()||y3,{onLayoutAnimationStart:S,onLayoutAnimationComplete:k}=g.getProps(),O=!this.targetLayout||!gw(this.targetLayout,j),U=!y&&v;if(this.options.layoutRoot||this.resumeFrom||U||y&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Zf(N,"layout"),onPlay:S,onComplete:k};(g.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(x,U)}else y||Ab(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(p3),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const y=this.path[x];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:p,layout:m}=this.options;if(p===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Eb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(h3),this.nodes.forEach(l3),this.nodes.forEach(o3)):this.nodes.forEach(kb),this.clearAllSnapshots();const p=ys.now();Ft.delta=$n(0,1e3/60,p-Ft.timestamp),Ft.timestamp=p,Ft.isProcessing=!0,bh.update.process(Ft),bh.preRender.process(Ft),bh.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d3),this.sharedNodes.forEach(g3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cs(this.snapshot.measuredBox.x)&&!cs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(p=!1),p&&this.instance){const m=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:m,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!c)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!pw(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,x=g!==this.prevTransformTemplateValue;d&&this.instance&&(p||ir(this.latestValues)||x)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const p=this.measurePageBox();let m=this.removeElementScroll(p);return d&&(m=this.removeTransform(m)),v3(m),{animationId:this.root.animationId,measuredBox:p,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:d}=this.options;if(!d)return Nt();const p=d.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(w3))){const{scroll:x}=this.root;x&&(fi(p.x,x.offset.x),fi(p.y,x.offset.y))}return p}removeElementScroll(d){var m;const p=Nt();if(Gs(p,d),(m=this.scroll)!=null&&m.wasRoot)return p;for(let g=0;g<this.path.length;g++){const x=this.path[g],{scroll:y,options:v}=x;x!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Gs(p,d),fi(p.x,y.offset.x),fi(p.y,y.offset.y))}return p}applyTransform(d,p=!1){const m=Nt();Gs(m,d);for(let g=0;g<this.path.length;g++){const x=this.path[g];!p&&x.options.layoutScroll&&x.scroll&&x!==x.root&&mi(m,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),ir(x.latestValues)&&mi(m,x.latestValues)}return ir(this.latestValues)&&mi(m,this.latestValues),m}removeTransform(d){const p=Nt();Gs(p,d);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!ir(g.latestValues))continue;cf(g.latestValues)&&g.updateSnapshot();const x=Nt(),y=g.measurePageBox();Gs(x,y),wb(p,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,x)}return ir(this.latestValues)&&wb(p,this.latestValues),p}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var v;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(d||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:y}=this.options;if(!(!this.layout||!(x||y))){if(this.resolvedRelativeTargetAt=Ft.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Gl(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),Gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ek(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gs(this.target,this.layout.layoutBox),Fv(this.target,this.targetDelta)):Gs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Gl(this.relativeTargetOrigin,this.target,j.target),Gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||cf(this.parent.latestValues)||Qv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var N;const d=this.getLead(),p=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(m=!1),m)return;const{layout:g,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||x))return;Gs(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;VE(this.layoutCorrected,this.treeScale,this.path,p),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Nt());const{target:j}=d;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bb(this.prevProjectionDelta.x,this.projectionDelta.x),bb(this.prevProjectionDelta.y,this.projectionDelta.y)),Il(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Tb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Tb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var p;if((p=this.options.visualElement)==null||p.scheduleRender(),d){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pi(),this.projectionDelta=pi(),this.projectionDeltaWithTransform=pi()}setAnimationOrigin(d,p=!1){const m=this.snapshot,g=m?m.latestValues:{},x={...this.latestValues},y=pi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const v=Nt(),j=m?m.source:void 0,N=this.layout?this.layout.source:void 0,S=j!==N,k=this.getStack(),O=!k||k.members.length<=1,U=!!(S&&!O&&this.options.crossfade===!0&&!this.path.some(b3));this.animationProgress=0;let R;this.mixTargetDelta=Q=>{const F=Q/1e3;Cb(y.x,d.x,F),Cb(y.y,d.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x3(this.relativeTarget,this.relativeTargetOrigin,v,F),R&&s3(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Nt()),Gs(R,this.relativeTarget)),S&&(this.animationValues=x,Fk(x,g,this.latestValues,F,U,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){var p,m,g;this.notifyListeners("animationStart"),(p=this.currentAnimation)==null||p.stop(),(g=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||g.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dt.update(()=>{Bc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wi(0)),this.currentAnimation=Gk(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:x=>{this.mixTargetDelta(x),d.onUpdate&&d.onUpdate(x)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:p,target:m,layout:g,latestValues:x}=d;if(!(!p||!m||!g)){if(this!==d&&this.layout&&g&&yw(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Nt();const y=cs(this.layout.layoutBox.x);m.x.min=d.target.x.min,m.x.max=m.x.min+y;const v=cs(this.layout.layoutBox.y);m.y.min=d.target.y.min,m.y.max=m.y.min+v}Gs(p,m),mi(p,x),Il(this.projectionDeltaWithTransform,this.layoutCorrected,p,x)}}registerSharedNode(d,p){this.sharedNodes.has(d)||this.sharedNodes.set(d,new n3),this.sharedNodes.get(d).add(p);const g=p.options.initialPromotionConfig;p.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(p):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var p;const{layoutId:d}=this.options;return d?((p=this.getStack())==null?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:d}=this.options;return d?(p=this.getStack())==null?void 0:p.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:p,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),d&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let p=!1;const{latestValues:m}=d;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(p=!0),!p)return;const g={};m.z&&Oh("z",d,g,this.animationValues);for(let x=0;x<Ch.length;x++)Oh(`rotate${Ch[x]}`,d,g,this.animationValues),Oh(`skew${Ch[x]}`,d,g,this.animationValues);d.render();for(const x in g)d.setStaticValue(x,g[x]),this.animationValues&&(this.animationValues[x]=g[x]);d.scheduleRender()}applyProjectionStyles(d,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=zc(p==null?void 0:p.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=zc(p==null?void 0:p.pointerEvents)||""),this.hasProjected&&!ir(this.latestValues)&&(d.transform=m?m({},""):"none",this.hasProjected=!1);return}d.visibility="";const x=g.animationValues||g.latestValues;this.applyTransformsToTarget();let y=a3(this.projectionDeltaWithTransform,this.treeScale,x);m&&(y=m(x,y)),d.transform=y;const{x:v,y:j}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${j.origin*100}% 0`,g.animationValues?d.opacity=g===this?x.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:d.opacity=g===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const N in Wl){if(x[N]===void 0)continue;const{correct:S,applyTo:k,isCSSVariable:O}=Wl[N],U=y==="none"?x[N]:S(x[N],g);if(k){const R=k.length;for(let Q=0;Q<R;Q++)d[k[Q]]=U}else O?this.options.visualElement.renderState.vars[N]=U:d[N]=U}this.options.layoutId&&(d.pointerEvents=g===this?zc(p==null?void 0:p.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var p;return(p=d.currentAnimation)==null?void 0:p.stop()}),this.root.nodes.forEach(Eb),this.root.sharedNodes.clear()}}}function l3(n){n.updateLayout()}function o3(n){var a;const t=((a=n.resumeFrom)==null?void 0:a.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:c}=n.layout,{animationType:u}=n.options,d=t.source!==n.layout.source;u==="size"?Ks(y=>{const v=d?t.measuredBox[y]:t.layoutBox[y],j=cs(v);v.min=i[y].min,v.max=v.min+j}):yw(u,t.layoutBox,i)&&Ks(y=>{const v=d?t.measuredBox[y]:t.layoutBox[y],j=cs(i[y]);v.max=v.min+j,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+j)});const p=pi();Il(p,i,t.layoutBox);const m=pi();d?Il(m,n.applyTransform(c,!0),t.measuredBox):Il(m,i,t.layoutBox);const g=!pw(p);let x=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:j}=y;if(v&&j){const N=Nt();Gl(N,t.layoutBox,v.layoutBox);const S=Nt();Gl(S,i,j.layoutBox),gw(N,S)||(x=!0),y.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=N,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:m,layoutDelta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:x})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function c3(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function u3(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function d3(n){n.clearSnapshot()}function Eb(n){n.clearMeasurements()}function kb(n){n.isLayoutDirty=!1}function h3(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Ab(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function f3(n){n.resolveTargetDelta()}function m3(n){n.calcProjection()}function p3(n){n.resetSkewAndRotation()}function g3(n){n.removeLeadSnapshot()}function Cb(n,t,a){n.translate=pt(t.translate,0,a),n.scale=pt(t.scale,1,a),n.origin=t.origin,n.originPoint=t.originPoint}function Ob(n,t,a,i){n.min=pt(t.min,a.min,i),n.max=pt(t.max,a.max,i)}function x3(n,t,a,i){Ob(n.x,t.x,a.x,i),Ob(n.y,t.y,a.y,i)}function b3(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const y3={duration:.45,ease:[.4,0,.1,1]},Rb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Mb=Rb("applewebkit/")&&!Rb("chrome/")?Math.round:Xs;function Db(n){n.min=Mb(n.min),n.max=Mb(n.max)}function v3(n){Db(n.x),Db(n.y)}function yw(n,t,a){return n==="position"||n==="preserve-aspect"&&!Tk(Sb(t),Sb(a),.2)}function w3(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const j3=bw({attachResizeListener:(n,t)=>eo(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rh={current:void 0},vw=bw({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Rh.current){const n=new j3({});n.mount(window),n.setOptions({layoutScroll:!0}),Rh.current=n}return Rh.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),_3={pan:{Feature:qk},drag:{Feature:Pk,ProjectionNode:vw,MeasureLayout:hw}};function Ub(n,t,a){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",a==="Start");const c="onHover"+a,u=i[c];u&&dt.postRender(()=>u(t,io(t)))}class N3 extends Ra{mount(){const{current:t}=this.node;t&&(this.unmount=GT(t,(a,i)=>(Ub(this.node,i,"Start"),c=>Ub(this.node,c,"End"))))}unmount(){}}class S3 extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=no(eo(this.node.current,"focus",()=>this.onFocus()),eo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zb(n,t,a){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",a==="Start");const c="onTap"+(a==="End"?"":a),u=i[c];u&&dt.postRender(()=>u(t,io(t)))}class T3 extends Ra{mount(){const{current:t}=this.node;t&&(this.unmount=QT(t,(a,i)=>(zb(this.node,i,"Start"),(c,{success:u})=>zb(this.node,c,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gf=new WeakMap,Mh=new WeakMap,E3=n=>{const t=gf.get(n.target);t&&t(n)},k3=n=>{n.forEach(E3)};function A3({root:n,...t}){const a=n||document;Mh.has(a)||Mh.set(a,{});const i=Mh.get(a),c=JSON.stringify(t);return i[c]||(i[c]=new IntersectionObserver(k3,{root:n,...t})),i[c]}function C3(n,t,a){const i=A3(t);return gf.set(n,a),i.observe(n),()=>{gf.delete(n),i.unobserve(n)}}const O3={some:0,all:1};class R3 extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:i,amount:c="some",once:u}=t,d={root:a?a.current:void 0,rootMargin:i,threshold:typeof c=="number"?c:O3[c]},p=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:x,onViewportLeave:y}=this.node.getProps(),v=g?x:y;v&&v(m)};return C3(this.node.current,d,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(M3(t,a))&&this.startObserver()}unmount(){}}function M3({viewport:n={}},{viewport:t={}}={}){return a=>n[a]!==t[a]}const D3={inView:{Feature:R3},tap:{Feature:T3},focus:{Feature:S3},hover:{Feature:N3}},U3={layout:{ProjectionNode:vw,MeasureLayout:hw}},z3={...vk,...D3,..._3,...U3},St=zE(z3,QE);function B3({onBack:n,onLogoHome:t,analytics:a=[],analyticsFilter:i="all",onChangeAnalyticsFilter:c,onOpenDetail:u,detailQuestAnalytics:d,detailLoading:p}){const m=g=>g!=null?`${g} `:"";return l.jsx("section",{className:"min-h-screen bg-white",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-10 py-6 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:n,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-1",children:"< "}),l.jsx("div",{className:"flex items-center gap-2 text-xs",children:["all","30d","7d"].map(g=>l.jsx("button",{onClick:()=>c==null?void 0:c(g),className:`px-3 py-1 rounded-full border text-sm ${i===g?"bg-brand-gold text-white border-brand-gold":"bg-white text-stone-600 border-stone-200 hover:border-brand-gold hover:text-brand-dark"}`,children:g==="all"?"":g==="30d"?"30":"7"},g))})]}),l.jsxs("div",{className:"bg-white/90 border border-stone-200 rounded-3xl p-6 shadow-sm",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:""}),l.jsx("span",{className:"text-xs text-stone-500",children:""})]})}),a&&a.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-stone-500",children:[l.jsx("th",{className:"py-2 pr-3",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""})]})}),l.jsx("tbody",{children:a.map(g=>l.jsxs("tr",{className:"border-t border-stone-100 hover:bg-amber-50/40",children:[l.jsx("td",{className:"py-2 pr-3 font-semibold text-brand-dark",children:g.title}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.playCount}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.uniquePlayers}),l.jsxs("td",{className:"py-2 pr-3 text-right",children:[g.clearRate,"%"]}),l.jsx("td",{className:"py-2 pr-3 text-right",children:m(g.avgDurationMin)}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.avgHints!=null?g.avgHints:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.avgWrongs!=null?g.avgWrongs:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.avgRating!=null?`${g.avgRating}`:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:g.reviewCount||""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:l.jsx("button",{onClick:()=>{d&&d.questId===g.questId?u==null||u("",""):u==null||u(g.questId,g.title)},className:"text-amber-700 hover:underline text-sm",children:d&&d.questId===g.questId?"":""})})]},g.questId))})]})}),l.jsx("p",{className:"text-[11px] text-stone-500 mt-2",children:"==/"})]}):l.jsx("div",{className:"text-sm text-stone-500 bg-stone-50 border border-dashed border-stone-200 rounded-2xl px-4 py-6 text-center",children:""}),d&&l.jsxs("div",{className:"mt-6 border-t border-stone-100 pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:d.title||""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[p&&l.jsx("span",{className:"text-xs text-stone-500",children:"..."}),l.jsx("button",{onClick:()=>{u==null||u("","")},className:"text-xs text-stone-600 hover:underline",children:""})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"p-3 rounded-2xl bg-amber-50 border border-amber-100",children:[l.jsx("p",{className:"text-xs text-amber-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:d.summary.playCount})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-emerald-50 border border-emerald-100",children:[l.jsx("p",{className:"text-xs text-emerald-700",children:""}),l.jsxs("p",{className:"text-lg font-bold text-brand-dark",children:[d.summary.clearRate,"%"]})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-sky-50 border border-sky-100",children:[l.jsx("p",{className:"text-xs text-sky-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:m(d.summary.avgDurationMin)})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-stone-50 border border-stone-200",children:[l.jsx("p",{className:"text-xs text-stone-600",children:" / "}),l.jsxs("p",{className:"text-lg font-bold text-brand-dark",children:[d.summary.avgHints??"","/",d.summary.avgWrongs??""]})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-rose-50 border border-rose-100",children:[l.jsx("p",{className:"text-xs text-rose-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:d.reviews.avgRating!=null?`${d.reviews.avgRating} (${d.reviews.count})`:""})]})]}),l.jsx("div",{className:"overflow-x-auto rounded-2xl border border-stone-100",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-stone-50 text-stone-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"py-2 px-3 text-left",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""})]})}),l.jsx("tbody",{children:d.steps.map(g=>l.jsxs("tr",{className:"border-t border-stone-100",children:[l.jsxs("td",{className:"py-2 px-3",children:[l.jsxs("div",{className:"font-semibold text-brand-dark",children:[g.step,". ",g.name]}),l.jsx("div",{className:"mt-1 h-2 bg-stone-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.min(100,Math.max(0,g.completed/Math.max(1,g.reached)*100))}%`}})})]}),l.jsx("td",{className:"py-2 px-3 text-right",children:g.reached}),l.jsx("td",{className:"py-2 px-3 text-right",children:g.completed}),l.jsxs("td",{className:"py-2 px-3 text-right",children:[Math.round(g.dropRate*100),"%"]}),l.jsx("td",{className:"py-2 px-3 text-right",children:g.avgHints??""}),l.jsx("td",{className:"py-2 px-3 text-right",children:g.avgWrongs??""})]},g.step))})]})})]})]})]})]})})}const yi="CAI4T7uO84K4nuLMXMVQ",ww=`https://api.maptiler.com/maps/streets-v2/style.json?key=${yi}`,L3="",Bb="",V3="http://localhost:4176/";let Mc=null;const jw=()=>window.maplibregl?Promise.resolve(window.maplibregl):Mc||(Mc=new Promise((n,t)=>{const a=document.createElement("link");a.rel="stylesheet",a.href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css",document.head.appendChild(a);const i=document.createElement("script");i.src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js",i.async=!0,i.onload=()=>n(window.maplibregl),i.onerror=()=>t(new Error("MapLibre failed to load")),document.head.appendChild(i)}),Mc),Lb=[{label:"",href:"#features"},{label:"",href:"#how-it-works"},{label:"",href:"#scenes"},{label:"",href:"#creators"},{label:"FAQ",href:"#faq"},{label:"",href:"#contact"}],P3=[{label:"",value:"Coming Soon"},{label:"",value:"50+"},{label:"",value:"10,000+"}],q3=[{label:"",icon:ln},{label:"",icon:Xb},{label:"",icon:Jc},{label:"",icon:to}],H3=[{title:"",description:"",icon:pr},{title:"",description:"",icon:qb},{title:"",description:"",icon:Fc},{title:"",description:"",icon:Jc}],$3=[{step:1,title:"",description:""},{step:2,title:"",description:""},{step:3,title:"",description:""},{step:4,title:"",description:""}],I3=[{title:"",target:"Couples",description:"",icon:Ib,image:"https://picsum.photos/600/400?random=1"},{title:"",target:"Family",description:"",icon:to,image:"https://picsum.photos/600/400?random=2"},{title:"",target:"Group",description:"",icon:$j,image:"https://picsum.photos/600/400?random=3"}],G3=[{question:"1",answer:""},{question:"",answer:"1.52.5"},{question:"",answer:"18001,500"},{question:"",answer:""},{question:"",answer:""}],K3=[{key:"all",label:"",desc:""},{key:"date",label:"",desc:"2"},{key:"family",label:"",desc:"OK"},{key:"night",label:"",desc:""},{key:"history",label:"",desc:""},{key:"beginner",label:"",desc:""}],Y3=[{title:"Earn Money",description:"70%",icon:Hb,badge:"Revenue Share"},{title:"Build Your Portfolio",description:"",icon:Zc,badge:""},{title:"Create Impact",description:"",icon:$b,badge:""}],X3=[{title:"",description:"Questo",icon:pr},{title:"Social Action Integration",description:"",icon:zl,highlight:""},{title:"",description:"",icon:vf}],Q3=[{step:1,title:"Create",description:""},{step:2,title:"Set Spot",description:""},{step:3,title:"Add Action (Option)",description:""},{step:4,title:"Publish",description:""}],Dh=[{key:"welcome",title:"Welcome",caption:"",icon:Hn,description:"TOMOSHIBI3"},{key:"concept",title:"Concept",caption:"",icon:Ib,description:""},{key:"how",title:"How to Build",caption:"",icon:Kb,description:"Questo"},{key:"start",title:"Let's Start",caption:"",icon:vf,description:""}],Gn=({className:n="h-8",color:t="#484132"})=>l.jsxs("svg",{viewBox:"0 0 220 40",className:n,fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"TOMOSHIBI Logo",children:[l.jsx("text",{x:"0",y:"30",fontSize:"28",fontWeight:"bold",fontFamily:"'Noto Sans JP', sans-serif",fill:t,letterSpacing:"0.05em",children:"TOMOSHIBI"}),l.jsxs("g",{transform:"translate(175, 4)",children:[l.jsx("path",{d:"M16 0C7.2 0 0 7.2 0 16C0 22.1 3.4 27.3 8.3 30V36H23.7V30C28.6 27.3 32 22.1 32 16C32 7.2 24.8 0 16 0Z",fill:t}),l.jsx("path",{d:"M16 26C16 26 21 20 21 14C21 11 19 9 16 6C13 9 11 11 11 14C11 20 16 26 16 26Z",fill:"#fbbf24"}),l.jsx("path",{d:"M16 3V5",stroke:"#fbbf24",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("path",{d:"M9 6L10.5 7.5",stroke:"#fbbf24",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("path",{d:"M23 6L21.5 7.5",stroke:"#fbbf24",strokeWidth:"2",strokeLinecap:"round"})]})]}),ka=({children:n,subtitle:t})=>l.jsxs("div",{className:"text-center mb-16 px-4",children:[l.jsx(St.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-3xl md:text-4xl font-serif font-bold text-brand-dark mb-4",children:n}),t&&l.jsx(St.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-stone-500 max-w-2xl mx-auto text-sm md:text-base leading-relaxed",children:t}),l.jsx("div",{className:"w-16 h-1 bg-brand-gold mx-auto mt-6 rounded-full"})]}),F3=({onPrimary:n,onSecondary:t,onScrollNotify:a,hasStoreLink:i,comingSoon:c})=>l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsxs("button",{onClick:c?a:n,className:"flex-1 bg-brand-dark text-white px-6 py-3 rounded-full font-bold text-sm md:text-base hover:bg-brand-gold hover:text-white transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[c?"":"",c?l.jsx(pr,{size:18}):l.jsx(Yj,{size:18})]}),l.jsx("button",{onClick:t,className:"flex-1 border border-stone-300 text-brand-dark px-6 py-3 rounded-full font-bold text-sm md:text-base hover:border-brand-gold hover:text-brand-gold transition-colors",children:""}),i&&l.jsx("div",{className:"flex items-center gap-2 justify-center text-[11px] text-stone-500",children:l.jsx("span",{className:"px-2 py-1 rounded-full bg-brand-base text-brand-dark border border-stone-200",children:"App Store / Google Play "})})]}),Z3=()=>l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-6",children:q3.map((n,t)=>l.jsxs(St.div,{initial:{opacity:0,y:12},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.05},className:"flex items-center gap-3 bg-white/70 border border-stone-200 rounded-2xl px-4 py-3 shadow-sm",children:[l.jsx("div",{className:"p-2 rounded-xl bg-brand-base text-brand-gold",children:l.jsx(n.icon,{size:18})}),l.jsx("span",{className:"text-sm font-bold text-brand-dark",children:n.label})]},n.label))}),_w=({onPrimary:n,comingSoon:t,onScrollNotify:a})=>l.jsxs("div",{className:"rounded-2xl border border-brand-dark/10 bg-white shadow-sm p-4 md:p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-brand-base text-brand-gold shadow-inner",children:l.jsx(pr,{size:18})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("p",{className:"text-xs text-stone-600",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[t&&l.jsx("span",{className:"px-3 py-1 rounded-full bg-stone-100 text-stone-600 text-xs font-bold border border-stone-200",children:"PWA"}),l.jsx("button",{onClick:t?a:n,className:"px-4 py-2 rounded-full bg-brand-dark text-white text-xs md:text-sm font-bold hover:bg-brand-gold transition-colors shadow-sm",children:t?"":""})]})]}),J3=({visible:n,onPrimary:t,onDismiss:a,comingSoon:i,onScrollNotify:c})=>n?l.jsx(St.div,{initial:{y:80,opacity:0},animate:{y:0,opacity:1},exit:{y:80,opacity:0},className:"fixed bottom-0 left-0 right-0 z-40 px-4 pb-4",children:l.jsxs("div",{className:"bg-white/95 backdrop-blur border border-stone-200 shadow-xl rounded-2xl px-4 py-3 flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-brand-base border border-stone-200 flex items-center justify-center text-brand-gold font-bold",children:"T"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:"TOMOSHIBI "}),l.jsx("p",{className:"text-xs text-stone-500 truncate",children:" "})]}),l.jsx("button",{onClick:i?c:t,className:"px-4 py-2 rounded-full bg-brand-dark text-white text-xs font-bold hover:bg-brand-gold transition-colors",children:i?"":""}),l.jsx("button",{onClick:a,className:"text-stone-400 hover:text-brand-dark",children:l.jsx(Lc,{size:16})})]})}):null,W3=()=>l.jsxs("div",{className:"relative mx-auto w-[280px] h-[580px] bg-brand-dark rounded-[3rem] border-4 border-brand-dark shadow-2xl overflow-hidden flex flex-col z-10",children:[l.jsx("div",{className:"h-6 bg-brand-dark w-full absolute top-0 z-20 flex justify-center items-center",children:l.jsx("div",{className:"w-24 h-4 bg-black/30 rounded-b-xl"})}),l.jsxs("div",{className:"pt-10 pb-4 px-4 bg-gradient-to-b from-slate-900 to-slate-800",children:[l.jsxs("div",{className:"flex justify-between items-center text-white mb-4",children:[l.jsx(Yb,{size:20,className:"text-slate-400"}),l.jsx("span",{className:"font-serif font-bold text-amber-400 tracking-widest",children:"TOMOSHIBI"}),l.jsx("div",{className:"w-5"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{disabled:!0,type:"text",placeholder:"...",className:"w-full bg-slate-700/50 text-sm rounded-full py-2 px-4 text-slate-300 border border-slate-600"}),l.jsx(ln,{size:14,className:"absolute right-3 top-2.5 text-slate-400"})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden bg-slate-900 relative",children:[l.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(#4b5563_1px,transparent_1px)] [background-size:16px_16px]"}),l.jsxs("div",{className:"p-4 space-y-4 relative z-10",children:[l.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-wide",children:"Featured Quests"}),l.jsxs("div",{className:"bg-slate-800/80 backdrop-blur border border-slate-700 rounded-xl overflow-hidden shadow-lg transform hover:scale-[1.02] transition-transform duration-300",children:[l.jsxs("div",{className:"h-24 bg-indigo-900/50 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent opacity-80"}),l.jsx("img",{src:"https://picsum.photos/300/150?random=10",alt:"Quest",className:"w-full h-full object-cover opacity-60"}),l.jsxs("div",{className:"absolute bottom-2 left-3 text-white",children:[l.jsxs("div",{className:"text-xs text-amber-400 mb-0.5 flex items-center gap-1",children:[l.jsx(to,{size:10,fill:"currentColor"})," Popular"]}),l.jsx("div",{className:"font-bold text-sm",children:""})]})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-2",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(qb,{size:10})," 90 min"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(ln,{size:10})," 2.5 km"]})]}),l.jsx("div",{className:"w-full h-1.5 bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"w-2/3 h-full bg-amber-500 rounded-full"})}),l.jsxs("div",{className:"flex justify-between text-[8px] text-slate-500 mt-1",children:[l.jsx("span",{children:"Difficulty"}),l.jsx("span",{className:"text-amber-400",children:"Normal"})]})]})]}),l.jsx("div",{className:"bg-slate-800/80 backdrop-blur border border-slate-700 rounded-xl overflow-hidden shadow-lg opacity-80 scale-95 translate-y-[-10px]",children:l.jsxs("div",{className:"h-20 bg-purple-900/50 relative overflow-hidden",children:[l.jsx("img",{src:"https://picsum.photos/300/150?random=11",alt:"Quest",className:"w-full h-full object-cover opacity-50"}),l.jsx("div",{className:"absolute bottom-2 left-3 text-white font-bold text-sm",children:""})]})})]})]}),l.jsxs("div",{className:"h-16 bg-slate-800 border-t border-slate-700 flex justify-around items-center px-2 z-20",children:[l.jsx("div",{className:"flex flex-col items-center gap-1 text-amber-400",children:l.jsx(Fc,{size:20})}),l.jsx("div",{className:"flex flex-col items-center gap-1 text-slate-500",children:l.jsx(ln,{size:20})}),l.jsx("div",{className:"flex flex-col items-center gap-1 text-slate-500",children:l.jsx(Jc,{size:20})})]}),l.jsx("div",{className:"h-1 bg-white/20 w-1/3 mx-auto absolute bottom-2 left-1/3 rounded-full z-30"})]}),Nw=({level:n})=>{const t={:"bg-green-100 text-green-700 border-green-200",:"bg-amber-100 text-amber-700 border-amber-200",:"bg-red-100 text-red-700 border-red-200"};return l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold border ${t[n]}`,children:[l.jsx(Fc,{size:12}),n]})},eA=({steps:n,activeIndex:t,onClose:a,onNext:i})=>{const c=n[t],u=t===n.length-1;return l.jsxs("div",{className:"fixed inset-0 z-[999] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),l.jsxs(St.div,{initial:{opacity:0,y:20,scale:.97},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.97},className:"relative w-[88%] max-w-5xl max-h-[82vh] bg-white rounded-3xl shadow-2xl overflow-y-auto md:overflow-hidden grid md:grid-cols-[320px,1fr] border border-white/70",children:[l.jsxs("div",{className:"bg-brand-base/80 border-r border-stone-200/70 p-6 md:p-8 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Tutorial"}),l.jsx("p",{className:"text-brand-dark font-serif text-xl",children:""})]}),l.jsx("button",{onClick:a,className:"text-stone-500 hover:text-brand-dark",children:l.jsx(Lc,{size:20})})]}),l.jsxs("div",{className:"relative mt-4",children:[l.jsx("div",{className:"absolute left-5 top-3 bottom-3 w-[2px] bg-gradient-to-b from-brand-gold/60 via-brand-dark/30 to-transparent"}),l.jsx("div",{className:"space-y-6 relative",children:n.map((d,p)=>{const m=p===t,g=p<t;return l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center ${m?"border-brand-gold bg-white text-brand-gold shadow":"border-stone-300 bg-white text-stone-400"}`,children:g?l.jsx(gi,{size:18}):l.jsx(d.icon,{size:18})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-stone-500",children:d.title}),l.jsx("p",{className:`font-bold ${m?"text-brand-dark":"text-stone-500"}`,children:d.caption})]})]},d.key)})})]})]}),l.jsxs("div",{className:"p-6 md:p-8 relative overflow-y-auto flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold mb-2",children:c.title}),l.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold text-brand-dark leading-tight",children:"Let's light up the town with your story"}),l.jsx("p",{className:"text-stone-600 mt-3",children:c.description})]}),l.jsx("button",{onClick:a,className:"text-stone-400 hover:text-brand-dark md:hidden",children:l.jsx(Lc,{size:20})})]}),l.jsxs("div",{className:"flex-1 min-h-0 space-y-3",children:[l.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-brand-base/80 p-5 shadow-inner",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-dark text-white flex items-center justify-center",children:l.jsx(Qc,{size:20})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Quick Guide"}),l.jsx("p",{className:"text-brand-dark font-bold",children:"3"})]})]}),l.jsxs("ul",{className:"text-sm text-stone-700 space-y-2 list-disc list-inside",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed",children:"Next"})]}),l.jsxs("div",{className:"flex justify-between items-center pt-2",children:[l.jsxs("div",{className:"text-xs text-stone-500",children:[t+1," / ",n.length]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:a,className:"text-sm font-bold text-stone-500 hover:text-brand-dark",children:""}),l.jsx("button",{onClick:i,className:"px-5 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors",children:u?"":"Next"})]})]})]})]})]})},tA=({email:n,onLogout:t,onBackHome:a,onGoCreators:i,onGoQuests:c,onOpenOnboarding:u,onGoCreatorStart:d,quests:p,onOpenWorkspace:m,onOpenAnalytics:g})=>{const x=n.charAt(0).toUpperCase();return l.jsxs("section",{className:"pt-28 pb-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/70 via-transparent to-brand-base/80"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-600 mb-6",children:[l.jsx("button",{onClick:a,className:"hover:text-brand-dark underline underline-offset-4",children:"LP"}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("span",{className:"text-brand-dark font-bold",children:""})]}),l.jsxs("div",{className:"bg-white/90 backdrop-blur border border-white/80 rounded-3xl p-8 md:p-10 shadow-2xl",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 rounded-full bg-brand-dark text-white flex items-center justify-center text-xl font-bold",children:x}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-stone-500",children:""}),l.jsx("h1",{className:"text-2xl font-serif font-bold text-brand-dark",children:n})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:c,className:"px-4 py-2 rounded-full border border-stone-300 text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:i,className:"px-4 py-2 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:u,className:"px-4 py-2 rounded-full bg-brand-gold text-brand-dark text-sm font-bold hover:bg-white transition-colors",children:""}),l.jsx("button",{onClick:d,className:"px-4 py-2 rounded-full border border-stone-300 text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:t,className:"px-4 py-2 rounded-full border border-stone-300 text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-colors",children:""})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-8",children:[l.jsxs("div",{className:"bg-brand-base border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold mb-2",children:"Status"}),l.jsx("p",{className:"text-brand-dark font-serif text-xl mb-1",children:"Explorer"}),l.jsx("p",{className:"text-stone-600 text-sm",children:""})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold mb-2",children:"Activity"}),l.jsx("p",{className:"text-brand-dark font-bold text-lg",children:" /  / "}),l.jsx("p",{className:"text-stone-600 text-sm",children:""})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold mb-2",children:"Security"}),l.jsx("p",{className:"text-brand-dark font-bold text-lg",children:""}),l.jsx("p",{className:"text-stone-600 text-sm",children:"2FA"})]})]}),l.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h3",{className:"text-brand-dark font-bold text-lg mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-600 mb-3",children:""}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-brand-gold accent-brand-gold"}),l.jsx("span",{className:"text-brand-dark font-bold",children:""})]})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h3",{className:"text-brand-dark font-bold text-lg mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-600 mb-3",children:""}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:u,className:"flex-1 px-4 py-3 rounded-full border border-brand-gold text-brand-dark text-sm font-bold hover:bg-brand-gold hover:text-white transition-colors",children:""}),l.jsx("button",{onClick:d,className:"flex-1 px-4 py-3 rounded-full border border-stone-300 text-brand-dark text-sm font-bold hover:border-brand-gold hover:text-brand-gold transition-colors",children:""})]})]})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h3",{className:"text-brand-dark font-bold text-lg mb-3",children:""}),l.jsxs("div",{className:"space-y-3",children:[p.length===0&&l.jsx("div",{className:"text-sm text-stone-500 bg-brand-base border border-dashed border-stone-300 rounded-2xl px-4 py-6 text-center",children:""}),p.map(y=>l.jsxs("div",{className:"border border-stone-200 rounded-2xl p-4 bg-white shadow-sm flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:y.title||""}),l.jsx("p",{className:"text-xs text-stone-500",children:y.area_name||""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>m(y),className:"px-4 py-2 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:()=>g(y),className:"px-4 py-2 rounded-full border border-amber-200 bg-amber-50 text-amber-700 text-sm font-bold hover:border-amber-300 hover:text-amber-800 transition-colors",children:""})]})]},y.id))]})]})]})]})]})};function sA({onBack:n,onPreview:t,activeStep:a,setActiveStep:i,onGoStep2:c,onGoStep3:u,onGoStep4:d,onPublish:p,onLogoHome:m,onGoStep1:g,showAnalytics:x=!0,analytics:y=[],analyticsFilter:v="all",onChangeAnalyticsFilter:j,onOpenDetail:N,detailQuestAnalytics:S,detailLoading:k}){var H;const O={basic:{activeBar:"bg-emerald-600 text-white",idleBar:"bg-emerald-50 text-emerald-800",pill:"bg-emerald-100 text-emerald-800",iconBg:"from-emerald-50 via-white to-emerald-100"},spots:{activeBar:"bg-amber-500 text-white",idleBar:"bg-amber-50 text-amber-800",pill:"bg-amber-100 text-amber-800",iconBg:"from-amber-50 via-white to-amber-100"},story:{activeBar:"bg-sky-500 text-white",idleBar:"bg-sky-50 text-sky-800",pill:"bg-sky-100 text-sky-800",iconBg:"from-sky-50 via-white to-sky-100"},test:{activeBar:"bg-indigo-500 text-white",idleBar:"bg-indigo-50 text-indigo-800",pill:"bg-indigo-100 text-indigo-800",iconBg:"from-indigo-50 via-white to-indigo-100"},publish:{activeBar:"bg-brand-dark text-white",idleBar:"bg-stone-100 text-brand-dark",pill:"bg-stone-200 text-brand-dark",iconBg:"from-stone-50 via-white to-stone-100"}},U=[{step:1,key:"basic",title:"Basic Info",subtitle:"",description:"",ribbon:"  (Completed!)",icon:gi,editable:!0,emoji:""},{step:2,key:"spots",title:"Spots & Puzzles",subtitle:"",description:"",icon:Kb,todoLink:!0,emoji:""},{step:3,key:"story",title:"Storytelling",subtitle:"",description:"",icon:Qc,emoji:""},{step:4,key:"test",title:"",subtitle:"",description:"",icon:pr,emoji:""},{step:5,key:"publish",title:"Publish",subtitle:"",description:"TOMOSHIBI",icon:vf,lockedUntil:4,emoji:""}],R=M=>M.step===1?"done":M.lockedUntil&&a<M.lockedUntil?"locked":M.step<a?"done":M.step===a?"active":"idle",Q=U.filter(M=>R(M)==="done").length,F=Math.round(Q/U.length*100),te=M=>M!=null?`${M} `:"";return l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:m,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"container mx-auto px-4 md:px-10 py-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:n,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-1",children:"< "}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("button",{onClick:t,className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-colors shadow-sm",children:"Preview Game"})})]}),l.jsxs("div",{className:"bg-white/80 backdrop-blur border border-stone-200 rounded-3xl p-6 md:p-8 shadow-md mb-8",children:[l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark mb-2",children:"Workspace: "}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed",children:""}),l.jsxs("div",{className:"mt-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs text-stone-600",children:[l.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-stone-200 shadow-sm",children:[l.jsx(gi,{size:14,className:"text-emerald-600"}),l.jsxs("span",{className:"font-bold text-brand-dark",children:[Q," / ",U.length," "]})]}),l.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-stone-200 shadow-sm",children:[l.jsx(Hn,{size:14,className:"text-brand-gold"}),l.jsxs("span",{className:"text-brand-dark",children:[": Step ",a]})]})]}),l.jsxs("div",{className:"bg-white/90 border border-stone-200 rounded-2xl px-4 py-3 shadow-inner w-full md:w-72",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-500",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{className:"font-bold text-brand-dark",children:[F,"%"]})]}),l.jsx("div",{className:"mt-2 h-2 bg-stone-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 via-amber-500 to-brand-gold rounded-full transition-all",style:{width:`${F}%`}})}),l.jsxs("div",{className:"mt-2 text-[11px] text-stone-500",children:["Step ",a," / ",U.length,": ",((H=U.find(M=>M.step===a))==null?void 0:H.title)||"Next up"]})]})]})]}),x&&l.jsxs("div",{id:"creator-analytics",className:"bg-white/90 border border-stone-200 rounded-3xl p-6 shadow-sm mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:""}),l.jsx("span",{className:"text-xs text-stone-500",children:""})]}),l.jsx("div",{className:"flex items-center gap-2 text-xs",children:["all","30d","7d"].map(M=>l.jsx("button",{onClick:()=>j==null?void 0:j(M),className:`px-3 py-1 rounded-full border text-sm ${v===M?"bg-brand-gold text-white border-brand-gold":"bg-white text-stone-600 border-stone-200 hover:border-brand-gold hover:text-brand-dark"}`,children:M==="all"?"":M==="30d"?"30":"7"},M))})]}),y.length===0?l.jsx("div",{className:"text-sm text-stone-500 bg-stone-50 border border-dashed border-stone-200 rounded-2xl px-4 py-6 text-center",children:""}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-stone-500",children:[l.jsx("th",{className:"py-2 pr-3",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""}),l.jsx("th",{className:"py-2 pr-3 text-right",children:""})]})}),l.jsx("tbody",{children:y.map(M=>l.jsxs("tr",{className:"border-t border-stone-100 hover:bg-amber-50/40",children:[l.jsx("td",{className:"py-2 pr-3 font-semibold text-brand-dark",children:M.title}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.playCount}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.uniquePlayers}),l.jsxs("td",{className:"py-2 pr-3 text-right",children:[M.clearRate,"%"]}),l.jsx("td",{className:"py-2 pr-3 text-right",children:te(M.avgDurationMin)}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.avgHints!=null?M.avgHints:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.avgWrongs!=null?M.avgWrongs:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.avgRating!=null?`${M.avgRating}`:""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:M.reviewCount||""}),l.jsx("td",{className:"py-2 pr-3 text-right",children:l.jsx("button",{onClick:()=>{S&&S.questId===M.questId?N==null||N("",""):N==null||N(M.questId,M.title)},className:"text-amber-700 hover:underline text-sm",children:S&&S.questId===M.questId?"":""})})]},M.questId))})]})}),l.jsx("p",{className:"text-[11px] text-stone-500 mt-2",children:"==/"})]}),S&&l.jsxs("div",{className:"mt-6 border-t border-stone-100 pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:S.title||""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[k&&l.jsx("span",{className:"text-xs text-stone-500",children:"..."}),l.jsx("button",{onClick:()=>{N==null||N("","")},className:"text-xs text-stone-600 hover:underline",children:""})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"p-3 rounded-2xl bg-amber-50 border border-amber-100",children:[l.jsx("p",{className:"text-xs text-amber-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:S.summary.playCount})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-emerald-50 border border-emerald-100",children:[l.jsx("p",{className:"text-xs text-emerald-700",children:""}),l.jsxs("p",{className:"text-lg font-bold text-brand-dark",children:[S.summary.clearRate,"%"]})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-sky-50 border border-sky-100",children:[l.jsx("p",{className:"text-xs text-sky-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:te(S.summary.avgDurationMin)})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-stone-50 border border-stone-200",children:[l.jsx("p",{className:"text-xs text-stone-600",children:" / "}),l.jsxs("p",{className:"text-lg font-bold text-brand-dark",children:[S.summary.avgHints??"","/",S.summary.avgWrongs??""]})]}),l.jsxs("div",{className:"p-3 rounded-2xl bg-rose-50 border border-rose-100",children:[l.jsx("p",{className:"text-xs text-rose-700",children:""}),l.jsx("p",{className:"text-lg font-bold text-brand-dark",children:S.reviews.avgRating!=null?`${S.reviews.avgRating} (${S.reviews.count})`:""})]})]}),l.jsx("div",{className:"overflow-x-auto rounded-2xl border border-stone-100",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-stone-50 text-stone-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"py-2 px-3 text-left",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""}),l.jsx("th",{className:"py-2 px-3 text-right",children:""})]})}),l.jsx("tbody",{children:S.steps.map(M=>l.jsxs("tr",{className:"border-t border-stone-100",children:[l.jsxs("td",{className:"py-2 px-3",children:[l.jsxs("div",{className:"font-semibold text-brand-dark",children:[M.step,". ",M.name]}),l.jsx("div",{className:"mt-1 h-2 bg-stone-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.min(100,Math.max(0,M.completed/Math.max(1,M.reached)*100))}%`}})})]}),l.jsx("td",{className:"py-2 px-3 text-right",children:M.reached}),l.jsx("td",{className:"py-2 px-3 text-right",children:M.completed}),l.jsxs("td",{className:"py-2 px-3 text-right",children:[Math.round(M.dropRate*100),"%"]}),l.jsx("td",{className:"py-2 px-3 text-right",children:M.avgHints??""}),l.jsx("td",{className:"py-2 px-3 text-right",children:M.avgWrongs??""})]},M.step))})]})}),l.jsx("p",{className:"text-[11px] text-stone-500",children:"/"}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-stone-100 bg-stone-50/60 p-3 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h4",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("span",{className:"text-xs text-stone-500",children:S.reviews.avgRating!=null?` ${S.reviews.avgRating} / ${S.reviews.count} `:""})]}),S.reviews.count>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-5 gap-2 text-xs",children:S.reviews.distribution.slice().sort((M,re)=>re.score-M.score).map(M=>l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between text-stone-600",children:[l.jsxs("span",{children:["",M.score]}),l.jsx("span",{children:M.count})]}),l.jsx("div",{className:"h-2 bg-white border border-stone-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${S.reviews.count?Math.min(100,M.count/S.reviews.count*100):0}%`}})})]},M.score))}),l.jsxs("div",{className:"space-y-2 text-sm",children:[S.reviews.latest.map((M,re)=>l.jsxs("div",{className:"rounded-xl bg-white border border-stone-200 px-3 py-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-600",children:[l.jsx("span",{className:"font-semibold text-amber-700",children:"".repeat(M.rating)}),l.jsx("span",{children:M.created_at?new Date(M.created_at).toLocaleDateString("ja-JP"):""})]}),M.comment&&l.jsx("p",{className:"text-sm text-stone-700 mt-1 whitespace-pre-wrap",children:M.comment})]},re)),S.reviews.latest.length===0&&l.jsx("p",{className:"text-xs text-stone-500",children:""})]})]})]})]})]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(M=>{const re=R(M),je=O[M.key],xe=re==="done"?"bg-emerald-600 text-white":re==="locked"?"bg-stone-200 text-stone-500":re==="active"?je.activeBar:je.idleBar,Te=re==="active"?"bg-brand-dark text-white hover:bg-brand-gold":"border border-stone-300 text-brand-dark hover:border-brand-gold hover:text-brand-gold",Me=re==="locked",Ge=()=>{if(!Me){if(M.step===2){c();return}if(M.step===3){i(3),u();return}if(M.step===4){i(4),d();return}if(M.step===5){i(5),p();return}if(M.step===1){i(1),g();return}i(M.step)}};return l.jsxs("div",{className:"rounded-3xl overflow-hidden border border-stone-200 bg-white shadow-md flex flex-col",children:[l.jsxs("div",{className:`px-4 py-3 flex items-center justify-between ${xe}`,children:[l.jsxs("div",{className:"flex items-center gap-3 font-bold",children:[l.jsxs("span",{className:"text-[11px] bg-white/20 px-2 py-1 rounded-full uppercase tracking-wide",children:["Step ",M.step]}),l.jsxs("div",{className:"flex items-center gap-2",children:[M.sparkle&&l.jsx(Hn,{size:16,className:"text-white drop-shadow-sm"}),l.jsx("span",{children:M.title})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[M.optional&&re!=="done"&&l.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full border ${je.pill}`,children:""}),re==="active"&&l.jsx("span",{className:"text-xs uppercase tracking-widest",children:"Next"}),re==="done"&&l.jsxs(l.Fragment,{children:[l.jsx(gi,{size:18,className:"text-white"}),M.editable&&l.jsx("button",{onClick:()=>{i(M.step),M.step===1&&g()},className:"text-[11px] underline underline-offset-2 text-white/90 hover:text-white",children:""})]})]})]}),l.jsxs("div",{className:"flex-1 p-5 space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-stone-500 font-bold",children:M.subtitle}),l.jsx("p",{className:"text-sm text-brand-dark font-bold",children:M.description})]}),l.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br shadow-inner flex items-center justify-center text-2xl",children:l.jsxs("div",{className:`w-full h-full rounded-2xl bg-gradient-to-br ${je.iconBg} flex items-center justify-center relative overflow-hidden`,children:[l.jsx("span",{className:`${re==="locked"?"text-stone-400":"text-brand-dark"} text-2xl`,children:M.emoji}),l.jsx(M.icon,{className:"absolute bottom-2 right-2 w-4 h-4 text-brand-dark/40"})]})})]}),M.optional&&l.jsx("div",{className:"inline-flex items-center gap-2 text-xs font-bold text-emerald-700 bg-emerald-50 border border-emerald-100 px-3 py-1 rounded-full",children:" TOMOSHIBI "})]}),l.jsx("div",{className:"px-5 pb-5 flex items-center justify-between",children:re==="done"&&M.ribbon?l.jsxs("div",{className:"w-full text-center text-sm font-bold text-green-700 bg-green-100 px-3 py-2 rounded-full flex items-center justify-center gap-3",children:[l.jsx("span",{children:M.ribbon}),M.step===1&&l.jsx("button",{onClick:()=>{i(1),g()},className:"text-xs underline text-emerald-800 hover:text-emerald-900",children:""})]}):l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:Ge,disabled:Me,className:`${Te} px-4 py-2 rounded-full text-sm font-bold transition-colors shadow-sm ${Me?"opacity-60 cursor-not-allowed":"hover:shadow-md"}`,children:"Start"}),M.todoLink&&re==="active"&&l.jsx("button",{className:"text-xs text-stone-500 hover:text-brand-dark underline",children:"To-do list"}),Me&&l.jsx("span",{className:"text-[11px] text-stone-500",children:""}),M.optional&&re!=="active"&&!Me&&l.jsx("span",{className:"text-[11px] text-emerald-700 font-bold",children:""})]})})]},M.step)})})]})]})}function nA({spot:n,onLogoHome:t,onBackList:a,onSaveBack:i,onSaveNext:c,nextSpot:u,questId:d,setRouteSpots:p}){const m={directions:"",directionsImage:"",storyImage:"",storyText:"",challengeText:"",challengeImage:"",hints:[{id:"hint-1",label:"1",text:""},{id:"hint-2",label:"2",text:""},{id:"answer",label:"",text:""}],answerText:"",answerType:"text",choiceOptions:[],acceptableAnswers:[],successMessage:"",...n.details||{}},[g,x]=A.useState(m.directions),[y,v]=A.useState(m.directionsImage||""),[j,N]=A.useState(m.storyImage||""),[S,k]=A.useState(m.storyText),[O,U]=A.useState(m.challengeText),[R,Q]=A.useState(m.challengeImage||""),[F,te]=A.useState(m.hints),[H,M]=A.useState(m.answerText),[re,je]=A.useState(m.answerType||"text"),[xe,Te]=A.useState(m.choiceOptions||[]),[Me,Ge]=A.useState(m.acceptableAnswers||[]),[oe,P]=A.useState(m.successMessage),[X,ie]=A.useState(!1),[ye,Z]=A.useState(null),T=g.trim().length>0&&S.trim().length>0&&O.trim().length>0&&(re==="choice"?xe.length>0:H.trim().length>0)&&oe.trim().length>0&&F.every(se=>se.text.trim().length>0),K=(se,$)=>{te(W=>W.map(ae=>ae.id===se?{...ae,text:$}:ae))},ne=()=>{const se=F.length+1;te([...F,{id:`hint-${se}`,label:`${se}`,text:""}])};A.useEffect(()=>{n.id&&Ne.from("spot_details").select("nav_text, story_text, question_text, answer_text, hint_text, explanation_text, answer_type, choice_options, acceptable_answers, completion_message").eq("spot_id",n.id).single().then(({data:se})=>{if(se){if(x(se.nav_text||""),k(se.story_text||""),U(se.question_text||""),M(se.answer_text||""),je(se.answer_type||"text"),Te(Array.isArray(se.choice_options)?se.choice_options:[]),Ge(Array.isArray(se.acceptable_answers)?se.acceptable_answers:[]),se.hint_text){const $=se.hint_text.split(/\n+/).map(W=>W.trim()).filter(W=>W.length>0);te($.length?$.map((W,ae)=>({id:`hint-${ae+1}`,label:`${ae+1}`,text:W})):m.hints)}else te(m.hints);P(se.explanation_text||se.completion_message||"")}}).catch(()=>{})},[n.id]);const I=()=>({...n,details:{directions:g,directionsImage:y,storyImage:j,storyText:S,challengeText:O,challengeImage:R,hints:F,answerText:H,answerType:re,choiceOptions:xe,acceptableAnswers:Me,successMessage:oe},status:T?"complete":"draft"}),ce=()=>{const se=I();ke(se,()=>i(se,T))},ge=()=>{const se=I();ke(se,()=>c(se,T))},ke=async(se,$)=>{if(n.id){ie(!0),Z(null);try{await Ne.from("spot_details").upsert({spot_id:n.id,nav_text:g,story_text:S,question_text:O,answer_text:H,hint_text:F.map(W=>{var ae,ve;return((ve=(ae=W.text)==null?void 0:ae.trim)==null?void 0:ve.call(ae))||""}).filter(W=>W.length>0).join(`
`),explanation_text:oe,completion_message:oe,answer_type:re,choice_options:xe,acceptable_answers:Me}),p(W=>W.map(ae=>ae.id===n.id?{...ae,status:T?"complete":ae.status}:ae)),$()}catch(W){Z((W==null?void 0:W.message)||"")}finally{ie(!1)}}};return l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:t,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"grid lg:grid-cols-2 min-h-[calc(100vh-64px)]",children:[l.jsxs("div",{className:"px-4 md:px-12 py-12 space-y-8 overflow-y-auto h-[calc(100vh-96px)] bg-brand-base/60",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:a,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-2",children:"< "}),l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step 2 / Spot Detail"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Spot Detail"}),l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark",children:n.name||""}),l.jsx("p",{className:"text-sm text-stone-700",children:""})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ln,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Directions)"})]}),l.jsx("textarea",{value:g,onChange:se=>x(se.target.value),rows:3,placeholder:"...",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Qc,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Story & Narrative)"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]}),l.jsx("textarea",{value:S,onChange:se=>k(se.target.value),rows:6,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(d_,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Challenge & Clues)"})]}),l.jsx("textarea",{value:O,onChange:se=>U(se.target.value),rows:5,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]}),l.jsxs("div",{className:"space-y-2 border-t border-stone-200 pt-4",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsxs("select",{value:re,onChange:se=>je(se.target.value),className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50 text-sm",children:[l.jsx("option",{value:"text",children:""}),l.jsx("option",{value:"choice",children:""}),l.jsx("option",{value:"number",children:""})]}),re==="choice"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"text-xs font-bold text-brand-dark border border-dashed border-stone-300 px-3 py-1 rounded-full hover:border-brand-gold hover:text-brand-gold",onClick:()=>Te([...xe,""]),children:"+ "})]}),xe.map((se,$)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:se,onChange:W=>{const ae=[...xe];ae[$]=W.target.value,Te(ae)},className:"flex-1 px-3 py-2 rounded-xl border border-stone-300 text-sm",placeholder:` ${$+1}`}),l.jsxs("label",{className:"text-xs flex items-center gap-1 text-brand-dark",children:[l.jsx("input",{type:"radio",name:"choice-answer",checked:H===se,onChange:()=>M(se)}),""]}),l.jsx("button",{className:"text-xs text-stone-500 hover:text-red-500",onClick:()=>{const W=xe.filter((ae,ve)=>ve!==$);Te(W),H===se&&M("")},children:""})]},$)),xe.length===0&&l.jsx("p",{className:"text-[11px] text-amber-600",children:"1"})]})]}),l.jsxs("div",{className:"border-t border-stone-200 pt-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(yf,{size:16,className:"text-brand-gold"}),l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:" (Hints)"})]}),l.jsx("div",{className:"space-y-3",children:F.map(se=>l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-stone-600",children:se.label}),l.jsx("textarea",{value:se.text,onChange:$=>K(se.id,$.target.value),rows:2,className:"w-full px-3 py-2 rounded-xl border border-stone-200 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/40 text-sm"})]},se.id))}),l.jsx("button",{onClick:ne,className:"text-sm font-bold text-brand-dark border border-dashed border-stone-300 px-4 py-2 rounded-full hover:border-brand-gold hover:text-brand-gold",children:""})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zc,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Answer & Completion)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" / "}),l.jsx("input",{value:H,onChange:se=>M(se.target.value),placeholder:re==="choice"?"":" / 1985",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),re!=="choice"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{value:Me.join(", "),onChange:se=>Ge(se.target.value.split(",").map($=>$.trim()).filter($=>$.length>0)),placeholder:", , tanuki",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("textarea",{value:oe,onChange:se=>P(se.target.value),rows:3,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[l.jsx("button",{onClick:ce,disabled:X,className:"px-5 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors shadow-lg disabled:opacity-60",children:X?"...":""}),l.jsx("button",{onClick:ge,className:"px-5 py-3 rounded-full border border-brand-dark text-brand-dark text-sm font-bold hover:bg-brand-gold hover:text-white transition-colors shadow-lg disabled:opacity-60",disabled:!u||X,children:X?"...":""})]}),ye&&l.jsx("div",{className:"text-sm text-red-600",children:ye})]}),l.jsx("div",{className:"relative bg-white border-l border-stone-200 h-[calc(100vh-64px)] lg:sticky lg:top-0 px-4 md:px-8 py-12",children:l.jsxs("div",{className:"mx-auto max-w-xs bg-stone-900 rounded-[2.5rem] shadow-2xl overflow-hidden border-8 border-stone-900 h-full flex flex-col",children:[l.jsx("div",{className:"bg-white text-brand-dark text-sm font-bold text-center py-3 border-b border-stone-200",children:n.name||""}),l.jsxs("div",{className:"flex-1 overflow-y-auto bg-white p-4 space-y-4",children:[l.jsx("div",{className:"text-xs text-brand-gold font-bold uppercase tracking-widest",children:"Directions"}),l.jsx("p",{className:"text-sm text-stone-700",children:g||""}),l.jsx("div",{className:"w-full h-36 bg-brand-base border border-stone-200 rounded-xl flex items-center justify-center text-xs text-stone-500",children:j?"":""}),l.jsx("div",{className:"text-xs text-brand-gold font-bold uppercase tracking-widest",children:"Story"}),l.jsx("p",{className:"text-sm text-stone-800 whitespace-pre-line",children:S||""}),l.jsx("div",{className:"text-xs text-brand-gold font-bold uppercase tracking-widest",children:"Challenge"}),l.jsx("p",{className:"text-sm text-stone-800 whitespace-pre-line",children:O||""}),l.jsx("div",{className:"bg-brand-base rounded-2xl p-3 border border-stone-200 space-y-2",children:F.map(se=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-bold text-brand-dark",children:[se.label,":"]})," ",l.jsx("span",{className:"text-stone-700",children:se.text||""})]},se.id))}),l.jsx("div",{className:"text-xs text-brand-gold font-bold uppercase tracking-widest",children:"Answer"}),l.jsxs("div",{className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm text-stone-700 space-y-1",children:[l.jsxs("div",{className:"text-xs text-stone-500",children:[": ",re==="choice"?"":re]}),re==="choice"?l.jsxs("div",{className:"space-y-1",children:[(xe||[]).map((se,$)=>l.jsxs("div",{className:"text-sm",children:["",se||"---"," ",H===se?"()":""]},$)),xe.length===0&&l.jsx("div",{className:"text-sm text-stone-500",children:""})]}):l.jsxs("div",{children:[": ",H||"---",Me.length>0&&l.jsxs("div",{className:"text-xs text-stone-500",children:[": ",Me.join(", ")]})]})]}),l.jsx("div",{className:"bg-brand-gold/10 border border-brand-gold/30 text-brand-dark rounded-xl px-3 py-2 text-sm",children:oe||""})]})]})})]})]})}function aA({onLogoHome:n,onBack:t,onSaveComplete:a,storySettings:i,spots:c,isSocialQuest:u,questId:d}){const[p,m]=A.useState(i.castName||""),[g,x]=A.useState(i.castTone||""),[y,v]=A.useState(i.castIcon||""),[j,N]=A.useState(i.prologueTitle||""),[S,k]=A.useState(i.prologueBody||""),[O,U]=A.useState(i.prologueImage||""),[R,Q]=A.useState(i.epilogueBody||""),[F,te]=A.useState(i.socialMessage||""),[H,M]=A.useState(i.epilogueImage||""),[re,je]=A.useState("chat"),[xe,Te]=A.useState(i.characters||[]),[Me,Ge]=A.useState(!1),[oe,P]=A.useState(null),[X,ie]=A.useState([]),[ye,Z]=A.useState([]),[T,K]=A.useState(!1),[ne,I]=A.useState(i.scenario.length?i.scenario:[{type:"prologue",id:"prologue",content:i.prologueBody||""},...c.map(G=>({type:"spot",id:`spot-${G.id}`,spotId:G.id,name:G.name})),{type:"epilogue",id:"epilogue",content:i.epilogueBody||"",social:i.socialMessage||""}]);A.useEffect(()=>{I(G=>G.map(le=>{if(le.type==="prologue")return{...le,content:S};if(le.type==="epilogue")return{...le,content:R,social:F};if(le.type==="spot"){const ue=c.find(de=>de.id===le.spotId);return ue?{...le,name:ue.name}:le}return le}))},[S,R,F,c]);const ce=G=>{const le=G==="prologue"?ie:Z,ue=G==="prologue"?X:ye;le([...ue,{id:`${G}-${Date.now()}`,stage:G,orderIndex:ue.length+1,speakerType:"narrator",speakerName:"Narrator",text:""}])},ge=(G,le,ue)=>{(G==="prologue"?ie:Z)(Ae=>Ae.map(ze=>ze.id===le?{...ze,...ue,orderIndex:ue.orderIndex??ze.orderIndex}:ze).sort((ze,Ye)=>ze.orderIndex-Ye.orderIndex))},ke=(G,le)=>{(G==="prologue"?ie:Z)(de=>de.filter(Ae=>Ae.id!==le).map((Ae,ze)=>({...Ae,orderIndex:ze+1})))},se=(G,le,ue)=>{const de=G==="prologue"?X:ye,Ae=de.findIndex(Da=>Da.id===le);if(Ae<0)return;const ze=Ae+ue;if(ze<0||ze>=de.length)return;const Ye=[...de],[Mt]=Ye.splice(Ae,1);Ye.splice(ze,0,Mt),(G==="prologue"?ie:Z)(Ye.map((Da,Ua)=>({...Da,orderIndex:Ua+1})))};A.useEffect(()=>{d&&Ne.from("story_timelines").select("prologue, epilogue, characters, timeline_data, timeline_json, cast_name, cast_tone, cast_icon, prologue_title, prologue_image, epilogue_image, social_message").eq("quest_id",d).single().then(({data:G})=>{if(G)if(m(G.cast_name||i.castName||""),x(G.cast_tone||i.castTone||""),v(G.cast_icon||i.castIcon||""),N(G.prologue_title||i.prologueTitle||""),k(G.prologue||i.prologueBody||""),U(G.prologue_image||i.prologueImage||""),M(G.epilogue_image||i.epilogueImage||""),Q(G.epilogue||i.epilogueBody||""),te(G.social_message||i.socialMessage||""),Te(G.characters||i.characters||[]),I(G.timeline_data||i.scenario||[]),G.timeline_json){const le=G.timeline_json;ie(le.filter(ue=>ue.stage==="prologue").sort((ue,de)=>(ue.orderIndex||0)-(de.orderIndex||0))),Z(le.filter(ue=>ue.stage==="epilogue").sort((ue,de)=>(ue.orderIndex||0)-(de.orderIndex||0)))}else G.prologue&&ie([{id:"prologue-1",stage:"prologue",orderIndex:1,speakerType:"narrator",speakerName:"Narrator",text:G.prologue}]),G.epilogue&&Z([{id:"epilogue-1",stage:"epilogue",orderIndex:1,speakerType:"narrator",speakerName:"Narrator",text:G.epilogue}]);K(!0)}).catch(()=>K(!0))},[d]);const $=async()=>{if(!d){P("IDStep1");return}Ge(!0),P(null);try{const G=[...X].sort((Ye,Mt)=>Ye.orderIndex-Mt.orderIndex).map((Ye,Mt)=>({...Ye,orderIndex:Mt+1})),le=[...ye].sort((Ye,Mt)=>Ye.orderIndex-Mt.orderIndex).map((Ye,Mt)=>({...Ye,orderIndex:Mt+1})),ue=[...G,...le],de=G.map(Ye=>Ye.text).filter(Ye=>Ye&&Ye.length).join(`
`),Ae=le.map(Ye=>Ye.text).filter(Ye=>Ye&&Ye.length).join(`
`);await Ne.from("story_timelines").upsert({quest_id:d,cast_name:p,cast_tone:g,cast_icon:y,prologue_title:j,characters:xe,prologue_image:O,prologue:de||S,epilogue_image:H,social_message:F,epilogue:Ae||R,timeline_data:ne,timeline_json:ue}),a({castName:p,castTone:g,castIcon:y,prologueTitle:j,prologueBody:S,prologueImage:O,epilogueBody:R,socialMessage:F,epilogueImage:H,characters:xe,scenario:ne})}catch(G){P((G==null?void 0:G.message)||"")}finally{Ge(!1)}},W=[{id:"cast-main",name:p||"",tone:g},...xe.map(G=>({id:G.id,name:G.name||"",tone:G.tone}))],ae=G=>{var Ae;const le=ne.findIndex(ze=>ze.id===G);if(le===-1)return;const ue={type:"dialogue",id:`dialogue-${Date.now()}`,characterId:((Ae=W[0])==null?void 0:Ae.id)||"cast-main",text:"",position:"left"},de=[...ne];de.splice(le+1,0,ue),I(de)},ve=(G,le)=>{I(ue=>ue.map(de=>de.id===G&&de.type==="dialogue"?{...de,...le}:de))};return l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:n,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"grid lg:grid-cols-2 min-h-[calc(100vh-64px)]",children:[l.jsxs("div",{className:"px-4 md:px-12 py-12 space-y-8 overflow-y-auto h-[calc(100vh-96px)] bg-brand-base/60",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:t,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-2",children:"< Workspace"}),l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step 3 / 5"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Storytelling"}),l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark",children:""}),l.jsx("p",{className:"text-sm text-stone-700",children:""})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(C_,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Cast & Narrator)"})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{value:p,onChange:G=>m(G.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{value:g,onChange:G=>x(G.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jc,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:""})]}),l.jsxs("button",{onClick:()=>Te([...xe,{id:crypto.randomUUID?crypto.randomUUID():`${Date.now()}`,name:"",role:"",tone:"",icon:""}]),className:"flex items-center gap-1 text-sm font-bold text-brand-dark border border-stone-300 px-3 py-1.5 rounded-full hover:border-brand-gold hover:text-brand-gold",children:[l.jsx(Qx,{size:16})," "]})]}),l.jsxs("div",{className:"space-y-3",children:[xe.length===0&&l.jsx("div",{className:"text-sm text-stone-500 bg-brand-base border border-dashed border-stone-300 rounded-2xl px-4 py-4 text-center",children:""}),xe.map((G,le)=>l.jsxs("div",{className:"rounded-2xl border border-stone-200 p-4 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("p",{className:"text-sm font-bold text-brand-dark",children:[" ",le+1]}),l.jsx("div",{className:"flex items-center gap-2 text-stone-400",children:l.jsx("button",{onClick:()=>Te(xe.filter(ue=>ue.id!==G.id)),className:"hover:text-rose-500 text-xs font-bold",children:""})})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[l.jsx("input",{value:G.name,onChange:ue=>Te(xe.map(de=>de.id===G.id?{...de,name:ue.target.value}:de)),placeholder:"",className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm"}),l.jsx("input",{value:G.role,onChange:ue=>Te(xe.map(de=>de.id===G.id?{...de,role:ue.target.value}:de)),placeholder:"",className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm"}),l.jsx("input",{value:G.tone,onChange:ue=>Te(xe.map(de=>de.id===G.id?{...de,tone:ue.target.value}:de)),placeholder:"",className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm"})]}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-3 py-2 rounded-full border border-stone-300 bg-white text-xs font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]})]},G.id))]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oh,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" / "})]}),!T&&l.jsx("p",{className:"text-sm text-stone-500",children:"..."}),T&&l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["prologue","epilogue"].map(G=>{const le=G==="prologue"?X:ye,ue=G==="prologue"?"":"";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:ue}),l.jsx("button",{className:"text-xs font-bold text-brand-dark border border-dashed border-stone-300 px-3 py-1 rounded-full hover:border-brand-gold hover:text-brand-gold",onClick:()=>ce(G),children:"+ "})]}),l.jsxs("div",{className:"space-y-3",children:[le.length===0&&l.jsx("div",{className:"text-xs text-stone-500 bg-brand-base border border-stone-200 rounded-xl px-3 py-2",children:""}),le.map((de,Ae)=>l.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white shadow-sm p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-500",children:[l.jsxs("span",{children:["#",Ae+1]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>se(G,de.id,-1),className:"hover:text-brand-gold",children:""}),l.jsx("button",{onClick:()=>se(G,de.id,1),className:"hover:text-brand-gold",children:""}),l.jsx("button",{onClick:()=>ke(G,de.id),className:"hover:text-rose-500",children:""})]})]}),l.jsxs("select",{value:de.speakerType,onChange:ze=>ge(G,de.id,{speakerType:ze.target.value}),className:"w-full text-sm border border-stone-300 rounded-xl px-3 py-2",children:[l.jsx("option",{value:"narrator",children:""}),l.jsx("option",{value:"character",children:""}),l.jsx("option",{value:"system",children:""})]}),l.jsx("input",{value:de.speakerName||"",onChange:ze=>ge(G,de.id,{speakerName:ze.target.value}),className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm",placeholder:""}),l.jsx("textarea",{value:de.text,onChange:ze=>ge(G,de.id,{text:ze.target.value}),rows:3,className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm",placeholder:""})]},de.id))]})]},G)})})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oh,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Timeline)"})]}),l.jsx("p",{className:"text-xs text-stone-600",children:""}),l.jsx("div",{className:"space-y-3",children:ne.map((G,le)=>l.jsxs("div",{className:"relative",children:[G.type==="prologue"&&l.jsxs("div",{className:"rounded-2xl border border-brand-gold/40 bg-brand-gold/10 px-4 py-3 text-sm text-brand-dark",children:[" ",j||""]}),G.type==="spot"&&l.jsxs("div",{className:"rounded-2xl border border-stone-300 bg-stone-100 px-4 py-3 flex items-center gap-3 text-sm text-brand-dark",children:[l.jsx(ln,{size:16,className:"text-brand-dark"}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold",children:[": ",G.name]}),l.jsx("p",{className:"text-xs text-stone-500",children:"Step2"})]})]}),G.type==="dialogue"&&l.jsxs("div",{className:"rounded-2xl border border-brand-gold/30 bg-white px-4 py-3 space-y-2 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-xs font-bold text-stone-500",children:""}),l.jsx("select",{value:G.characterId,onChange:ue=>ve(G.id,{characterId:ue.target.value}),className:"text-sm border border-stone-300 rounded-full px-3 py-1",children:W.map(ue=>l.jsx("option",{value:ue.id,children:ue.name||""},ue.id))}),l.jsxs("select",{value:G.position,onChange:ue=>ve(G.id,{position:ue.target.value}),className:"text-xs border border-stone-300 rounded-full px-2 py-1 text-stone-600",children:[l.jsx("option",{value:"left",children:""}),l.jsx("option",{value:"right",children:""})]})]}),l.jsx("textarea",{value:G.text,onChange:ue=>ve(G.id,{text:ue.target.value}),rows:2,placeholder:"",className:"w-full px-3 py-2 rounded-xl border border-stone-300 text-sm"})]}),G.type==="epilogue"&&l.jsx("div",{className:"rounded-2xl border border-brand-gold/40 bg-brand-gold/10 px-4 py-3 text-sm text-brand-dark",children:" "}),le<ne.length-1&&l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:()=>ae(G.id),className:"mt-2 mb-2 inline-flex items-center gap-2 text-xs font-bold text-brand-dark border border-dashed border-brand-gold px-3 py-1.5 rounded-full hover:border-brand-dark",children:[l.jsx(Qx,{size:14})," "]})})]},G.id))})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Qc,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Prologue)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{value:j,onChange:G=>N(G.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("span",{className:"text-xs text-stone-500",children:""})]}),l.jsx("textarea",{value:S,onChange:G=>k(G.target.value),rows:6,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hn,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Epilogue)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("textarea",{value:R,onChange:G=>Q(G.target.value),rows:6,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),u&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("textarea",{value:F,onChange:G=>te(G.target.value),rows:3,placeholder:"...",className:"w-full px-4 py-3 rounded-2xl border border-emerald-200 bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm text-emerald-800"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-stone-500",children:""}),l.jsx("button",{className:"px-4 py-2 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold",children:""})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oh,{size:18,className:"text-brand-gold"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:" (Script Flow Review)"})]}),l.jsx("p",{className:"text-xs text-stone-600",children:""}),l.jsxs("div",{className:"space-y-3",children:[c.length===0&&l.jsx("div",{className:"text-sm text-stone-500 bg-brand-base border border-dashed border-stone-300 rounded-2xl px-4 py-6 text-center",children:"Step2"}),c.map((G,le)=>{var ue;return l.jsxs("div",{className:"p-4 rounded-2xl border border-stone-200 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-9 h-9 rounded-full bg-brand-dark text-white flex items-center justify-center text-sm font-bold",children:le+1}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:G.name||`Spot ${le+1}`}),l.jsx("p",{className:"text-xs text-stone-500",children:""})]})]}),l.jsx("button",{onClick:()=>window.location.href="/creator/route-spots",className:"text-xs text-brand-gold font-bold hover:underline",children:"Step2"})]}),l.jsx("p",{className:"text-sm text-stone-700 mt-3 line-clamp-3",children:((ue=G.details)==null?void 0:ue.storyText)||""})]},G.id)})]})]}),l.jsx("div",{className:"flex justify-end gap-3",children:l.jsx("button",{onClick:$,disabled:Me,className:"px-6 py-3 rounded-full text-sm font-bold shadow-lg bg-brand-dark text-white hover:bg-brand-gold",children:Me?"...":""})}),oe&&l.jsx("div",{className:"text-sm text-red-600",children:oe})]}),l.jsxs("div",{className:"relative bg-white border-l border-stone-200 h-[calc(100vh-64px)] lg:sticky lg:top-0 px-4 md:px-8 py-12",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{onClick:()=>je("chat"),className:`px-3 py-1 rounded-full text-xs font-bold border ${re==="chat"?"bg-brand-dark text-white border-brand-dark":"border-stone-300 text-stone-600"}`,children:""}),l.jsx("button",{onClick:()=>je("novel"),className:`px-3 py-1 rounded-full text-xs font-bold border ${re==="novel"?"bg-brand-dark text-white border-brand-dark":"border-stone-300 text-stone-600"}`,children:""})]}),l.jsxs("div",{className:"mx-auto max-w-xs bg-stone-900 rounded-[2.5rem] shadow-2xl overflow-hidden border-8 border-stone-900 h-full flex flex-col",children:[l.jsx("div",{className:"bg-white text-brand-dark text-sm font-bold text-center py-3 border-b border-stone-200",children:p||""}),l.jsxs("div",{className:"flex-1 overflow-y-auto bg-white relative",children:[re==="chat"&&l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-dark text-white flex items-center justify-center text-xs font-bold",children:p?p[0]:"A"}),l.jsxs("div",{className:"bg-brand-base rounded-2xl px-3 py-2 border border-stone-200 text-sm text-stone-800 max-w-[80%]",children:[l.jsx("p",{className:"text-xs text-brand-gold mb-1",children:j||""}),l.jsx("p",{className:"whitespace-pre-line",children:S||""})]})]}),l.jsx("div",{className:"flex items-start gap-2 justify-end",children:l.jsx("div",{className:"bg-brand-gold text-white rounded-2xl px-3 py-2 text-sm max-w-[80%] shadow",children:""})}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-dark text-white flex items-center justify-center text-xs font-bold",children:p?p[0]:"A"}),l.jsxs("div",{className:"bg-brand-base rounded-2xl px-3 py-2 border border-stone-200 text-sm text-stone-800 max-w-[80%]",children:[l.jsx("p",{className:"text-xs text-brand-gold mb-1",children:""}),l.jsx("p",{className:"whitespace-pre-line",children:R||""}),u&&l.jsx("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-xl px-2 py-1",children:F||""})]})]})]}),re==="novel"&&l.jsxs("div",{className:"relative h-full",children:[l.jsx("div",{className:"absolute inset-0",children:l.jsx("div",{className:"w-full h-full bg-gradient-to-b from-brand-base via-white to-brand-base"})}),l.jsxs("div",{className:"relative p-4 space-y-3",children:[l.jsx("div",{className:"w-full h-36 rounded-2xl bg-stone-200 flex items-center justify-center text-xs text-stone-500",children:O?"":""}),l.jsxs("div",{className:"bg-white/90 rounded-2xl border border-stone-200 p-3 shadow-sm text-sm text-stone-800",children:[l.jsx("p",{className:"text-xs text-brand-gold mb-1",children:j||""}),l.jsx("p",{className:"whitespace-pre-line leading-relaxed",children:S||""})]}),l.jsxs("div",{className:"bg-white/90 rounded-2xl border border-stone-200 p-3 shadow-sm text-sm text-stone-800",children:[l.jsx("p",{className:"text-xs text-brand-gold mb-1",children:""}),l.jsx("p",{className:"whitespace-pre-line leading-relaxed",children:R||""}),u&&l.jsx("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-xl px-2 py-1",children:F||""})]})]})]})]})]})]})]})]})}function rA({onBack:n,onComplete:t,onLogoHome:a,routeSpots:i,setRouteSpots:c,onOpenSpotDetail:u,questId:d}){const p=A.useRef(null),m=A.useRef(null),g=A.useRef([]),x=A.useRef(null),y="route-line",v="route-line-layer",[j,N]=A.useState(""),[S,k]=A.useState(""),[O,U]=A.useState(null),[R,Q]=A.useState([]),[F,te]=A.useState(!1),[H,M]=A.useState(null),[re,je]=A.useState(!1),xe=.5,Te=($,W)=>{const ae=Ye=>Ye*Math.PI/180,G=ae(W.lat-$.lat),le=ae(W.lng-$.lng),ue=ae($.lat),de=ae(W.lat),Ae=Math.sin(G/2)*Math.sin(G/2)+Math.cos(ue)*Math.cos(de)*Math.sin(le/2)*Math.sin(le/2);return 6371*(2*Math.atan2(Math.sqrt(Ae),Math.sqrt(1-Ae)))},Me=($,W)=>{M($),W.dataTransfer.effectAllowed="move"},Ge=($,W)=>{W.preventDefault(),W.dataTransfer.dropEffect="move"},oe=($,W)=>{W.preventDefault(),H&&H!==$&&ne(H,$),M(null)},P=i.reduce(($,W,ae)=>ae===0?0:$+Te(i[ae-1],W),0),X=i.reduce(($,W,ae)=>ae===0?0:Math.max($,Te(i[ae-1],W)),0),ie={minSpots:!0,notTooFar:!0,withinRange:!0},ye=$=>{const W=($==null?void 0:$.place_type)||[];return $!=null&&$.bbox?null:W.includes("country")?6:W.includes("region")?9:W.includes("place")?12:W.includes("locality")?13:W.includes("neighborhood")?14:15},Z=async()=>{if(!d)return;je(!0);const{data:$,error:W}=await Ne.from("spots").select("*, spot_details (*)").eq("quest_id",d).order("order_index",{ascending:!0});!W&&$&&c($.map(ae=>{var de;const ve=((de=ae.spot_details)==null?void 0:de[0])||ae.spot_details||null,G=ve!=null&&ve.hint_text?String(ve.hint_text).split(/\n+/).map(Ae=>Ae.trim()).filter(Ae=>Ae.length>0):[],le=ve?{directions:ve.nav_text||"",directionsImage:"",storyImage:"",storyText:ve.story_text||"",challengeText:ve.question_text||"",challengeImage:"",hints:G.length>0?G.map((Ae,ze)=>({id:`hint-${ze+1}`,label:`${ze+1}`,text:Ae})):[{id:"hint-1",label:"1",text:""},{id:"hint-2",label:"2",text:""},{id:"answer",label:"",text:""}],answerText:ve.answer_text||"",answerType:ve.answer_type||"text",choiceOptions:Array.isArray(ve.choice_options)?ve.choice_options:[],acceptableAnswers:Array.isArray(ve.acceptable_answers)?ve.acceptable_answers:[],successMessage:ve.explanation_text||ve.completion_message||""}:void 0,ue=((le==null?void 0:le.challengeText)||"").trim().length>0&&(((le==null?void 0:le.answerType)==="choice"?(le.choiceOptions||[]).length>0:((le==null?void 0:le.answerText)||"").trim().length>0)||!1);return{id:ae.id,name:ae.name,address:ae.address||"",lat:ae.lat,lng:ae.lng,orderIndex:ae.order_index,status:ue?"complete":ae.status,details:le}})),je(!1)};A.useEffect(()=>{Z()},[d]);const T=()=>{if(!j.trim()||!S.trim()||!O||!d)return;const $=i.length+1;Ne.from("spots").insert({quest_id:d,name:j.trim(),address:S.trim(),lat:O.lat,lng:O.lng,order_index:$}).select().single().then(({data:W,error:ae})=>{!ae&&W&&(N(""),k(""),U(null),Q([]),c(ve=>[...ve,{id:W.id,name:W.name,address:W.address||"",lat:W.lat,lng:W.lng,orderIndex:W.order_index}]))}).catch(()=>{})},K=$=>{c(i.filter(W=>W.id!==$)),Ne.from("spots").delete().eq("id",$).then(()=>Z()).catch(()=>{})},ne=async($,W)=>{if($===W)return;const ae=[...i],ve=ae.findIndex(de=>de.id===$),G=ae.findIndex(de=>de.id===W);if(ve===-1||G===-1)return;const[le]=ae.splice(ve,1);ae.splice(G,0,le);const ue=ae.map((de,Ae)=>({...de,orderIndex:Ae+1}));if(c(ue),d){const de=ue.map(Ae=>({id:Ae.id,quest_id:d,name:Ae.name,address:Ae.address,lat:Ae.lat,lng:Ae.lng,order_index:Ae.orderIndex||0}));await Ne.from("spots").upsert(de,{onConflict:"id"})}},I=$=>{p.current&&(m.current=new $.Map({container:p.current,style:ww,center:i[0]?[i[0].lng,i[0].lat]:[139.769,35.6804],zoom:i.length?12:10}))},ce=()=>{g.current.forEach($=>$.marker.remove()),g.current=[]},ge=($,W)=>{if(!m.current)return;x.current&&x.current.remove();const ae=document.createElement("div");ae.className="w-8 h-8 rounded-full bg-white text-brand-dark text-sm font-bold flex items-center justify-center shadow-lg border-2 border-brand-dark",ae.textContent="+",x.current=new window.maplibregl.Marker({element:ae}).setLngLat([$,W]).addTo(m.current)},ke=()=>{if(m.current&&(ce(),i.forEach(($,W)=>{const ae=document.createElement("div");ae.className="w-8 h-8 rounded-full bg-brand-dark text-white text-sm font-bold flex items-center justify-center shadow-lg border-2 border-white",ae.textContent=`${W+1}`;const ve=new window.maplibregl.Marker({element:ae}).setLngLat([$.lng,$.lat]).addTo(m.current);g.current.push({id:$.id,marker:ve,el:ae})}),m.current.getSource(y)&&(m.current.removeLayer(v),m.current.removeSource(y)),i.length>1&&(m.current.addSource(y,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:i.map($=>[$.lng,$.lat])}}}),m.current.addLayer({id:v,type:"line",source:y,paint:{"line-color":"#2563eb","line-width":4,"line-opacity":.75}})),i.length)){const $=new window.maplibregl.LngLatBounds;i.forEach(W=>$.extend([W.lng,W.lat])),m.current.fitBounds($,{padding:80,maxZoom:16})}};A.useEffect(()=>{jw().then($=>{var W;p.current&&(I($),(W=m.current)==null||W.on("click",ae=>{const{lng:ve,lat:G}=ae.lngLat||{};ve==null||G==null||(U({lat:G,lng:ve}),ge(ve,G),fetch(`https://api.maptiler.com/geocoding/${ve},${G}.json?key=${yi}&language=ja&limit=1`).then(le=>le.json()).then(le=>{var ze;const ue=(ze=le==null?void 0:le.features)==null?void 0:ze[0],de=ue==null?void 0:ue.place_name,Ae=ue==null?void 0:ue.text;de&&k(de),Ae&&N(Ae)}).catch(()=>{}))}))}).catch(()=>{})},[]),A.useEffect(()=>{m.current&&ke()},[i]);const se=$=>{g.current.forEach(W=>{W.id===$?(W.el.classList.add("bg-brand-gold","scale-105"),W.el.classList.remove("bg-brand-dark")):(W.el.classList.remove("bg-brand-gold","scale-105"),W.el.classList.add("bg-brand-dark"))})};return A.useEffect(()=>{const $=new AbortController,W=S.trim();if(W.length<2){Q([]);return}return te(!0),fetch(`https://api.maptiler.com/geocoding/${encodeURIComponent(W)}.json?key=${yi}&language=ja&limit=5`,{signal:$.signal}).then(ae=>ae.json()).then(ae=>Q((ae==null?void 0:ae.features)||[])).catch(()=>Q([])).finally(()=>te(!1)),()=>$.abort()},[S]),l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:a,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"grid lg:grid-cols-2 min-h-[calc(100vh-64px)]",children:[l.jsxs("div",{className:"px-4 md:px-12 py-12 space-y-8 overflow-y-auto h-[calc(100vh-96px)] bg-brand-base/60",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:n,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-2",children:"< Workspace"}),l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step 2 / 5"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark",children:" (Route Info)"}),l.jsx("p",{className:"text-sm text-stone-700 leading-relaxed",children:""})]}),l.jsxs("div",{className:"space-y-6 max-w-2xl",children:[l.jsxs("div",{className:"rounded-3xl bg-white border border-stone-200 p-5 shadow-sm space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold mb-1",children:"Add New Spot"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-extrabold text-brand-dark block mb-1",children:" (Place Name)"}),l.jsx("input",{value:j,onChange:$=>N($.target.value),placeholder:" ",className:"w-full px-4 py-3 rounded-xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-sm font-extrabold text-brand-dark block mb-1",children:" (Address)"}),l.jsx("input",{value:S,onChange:$=>k($.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"}),R.length>0&&l.jsxs("div",{className:"mt-2 rounded-2xl border border-stone-200 bg-white shadow-lg max-h-56 overflow-auto z-10",children:[R.map($=>l.jsx("button",{onMouseDown:W=>{var ue,de,Ae;W.preventDefault();const[ae,ve]=($==null?void 0:$.center)||[],G=($==null?void 0:$.place_name)||"";G&&k(G),ve&&ae&&(U({lat:ve,lng:ae}),ge(ae,ve)),$!=null&&$.text&&N($.text);const le=ye($);(Ae=m.current)==null||Ae.jumpTo({center:[ae,ve],zoom:le??((de=(ue=m.current)==null?void 0:ue.getZoom)==null?void 0:de.call(ue))??12}),Q([])},className:"w-full text-left px-4 py-2 text-sm text-brand-dark hover:bg-brand-base",children:$==null?void 0:$.place_name},$.id)),F&&l.jsx("div",{className:"px-4 py-2 text-xs text-stone-500",children:"..."})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:T,className:"px-5 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors shadow-lg disabled:opacity-60",disabled:!j.trim()||!S.trim()||!O,children:" (Add Spot)"})})]})]}),l.jsxs("div",{className:"rounded-3xl bg-white border border-stone-200 p-5 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Saved Spots"}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:""})]}),l.jsx("p",{className:"text-xs text-stone-500",children:""})]}),l.jsxs("div",{className:"space-y-3 relative",children:[i.length===0&&l.jsx("div",{className:"text-sm text-stone-500 bg-brand-base border border-dashed border-stone-300 rounded-2xl px-4 py-6 text-center",children:""}),i.map(($,W)=>{const ae=W>0?i[W-1]:null,ve=ae?Te(ae,$):0,G=ae?ve>xe:!1;return l.jsxs("div",{draggable:!0,onDragStart:le=>Me($.id,le),onDragOver:le=>Ge($.id,le),onDrop:le=>oe($.id,le),onDragEnd:()=>M(null),onMouseEnter:()=>se($.id),onMouseLeave:()=>se(null),className:"relative pl-6 cursor-move",children:[W<i.length-1&&l.jsx("div",{className:"absolute left-4 top-12 bottom-0 flex flex-col items-center pointer-events-none",children:l.jsx("div",{className:"flex-1 border-l border-dashed border-stone-300 w-px"})}),ae&&l.jsxs("div",{className:"absolute left-8 -top-3 text-[11px] text-stone-500",children:[": ",ve.toFixed(2)," km",G&&l.jsx("span",{className:"ml-2 text-rose-600 font-bold",children:"500m"})]}),l.jsxs("div",{className:`flex items-start gap-3 bg-white rounded-2xl border ${G?"border-rose-300":"border-stone-200"} px-4 py-3 shadow-sm`,children:[l.jsx("button",{className:"mt-2 text-stone-400 hover:text-brand-gold transition-colors",title:"",children:l.jsx(e_,{size:18})}),l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-dark text-white flex items-center justify-center font-bold text-lg",children:W+1})}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("p",{className:"text-sm font-bold text-brand-dark flex items-center gap-2",children:[$.name,$.status==="complete"&&l.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200",children:" "})]}),l.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[l.jsx("button",{className:"hover:text-brand-gold",title:"",onClick:()=>u($.id),children:l.jsx(j_,{size:16})}),l.jsx("button",{onClick:()=>K($.id),className:"hover:text-rose-500",title:"",children:l.jsx(k_,{size:16})})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-16 h-16 rounded-xl bg-brand-base border border-stone-200 overflow-hidden flex items-center justify-center text-[10px] text-stone-500",children:""}),l.jsx("p",{className:"text-xs text-stone-500 leading-relaxed",children:$.address})]})]})]})]},$.id)})]})]}),l.jsxs("div",{className:"rounded-3xl bg-white border border-dashed border-stone-300 p-6 text-center shadow-inner",children:[l.jsx("p",{className:"text-sm font-bold text-brand-dark mb-2",children:" (Cover Photo)"}),l.jsx("p",{className:"text-xs text-stone-500 mb-4",children:""}),l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx("div",{className:"px-5 py-3 rounded-full border border-stone-300 bg-white text-sm font-bold text-brand-dark shadow-sm cursor-pointer",children:""}),l.jsx("div",{className:"text-xs text-stone-400",children:""})]})]}),l.jsxs("div",{className:"bg-brand-dark text-white border-brand-dark rounded-3xl border p-5 shadow-inner space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Gb,{size:18,className:"text-white"}),l.jsx("p",{className:"text-sm font-bold",children:""})]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",readOnly:!0,checked:ie.minSpots,className:"accent-brand-gold"}),"1015"]}),l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",readOnly:!0,checked:ie.notTooFar,className:"accent-brand-gold"}),""]}),l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",readOnly:!0,checked:ie.withinRange,className:"accent-brand-gold"}),"1km5km"]}),l.jsxs("div",{className:"text-xs",children:[":  ",P.toFixed(2),"km /  ",X.toFixed(2),"km"]})]}),l.jsx("div",{className:"flex justify-end pt-1",children:l.jsx("button",{onClick:t,disabled:!1,className:"px-5 py-3 rounded-full text-sm font-bold transition-colors shadow-lg bg-white text-brand-dark hover:bg-brand-gold hover:text-white",children:""})})]})]})]}),l.jsxs("div",{className:"relative bg-white border-l border-stone-200 h-[calc(100vh-64px)] lg:sticky lg:top-0",children:[l.jsx("div",{ref:p,className:"absolute inset-0 w-full h-full"}),!yi]})]})]})}const iA=({quest:n,onSelect:t})=>{const a=n.rating&&n.rating>0,i=n.reviews?Math.min(999,n.reviews*5):null,c=n.rating>=4.5&&(n.reviews||0)>=10?"":i?"":"",u=()=>t(n),d=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),u())};return l.jsxs(St.div,{whileHover:{y:-6},onClick:u,onKeyDown:d,role:"button",tabIndex:0,className:"bg-white/80 backdrop-blur border border-white/60 rounded-2xl overflow-hidden shadow-xl flex flex-col cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-gold/50",children:[l.jsxs("div",{className:"relative h-48 overflow-hidden",children:[l.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-dark/85 via-brand-dark/20 to-transparent"}),l.jsxs("div",{className:"absolute top-3 left-3 flex gap-2 flex-wrap",children:[l.jsx("span",{className:"bg-white/80 text-brand-dark text-xs font-bold px-3 py-1 rounded-full shadow",children:n.area}),l.jsx(Nw,{level:n.difficulty}),l.jsx("span",{className:"bg-amber-100 text-amber-800 text-[11px] font-bold px-2.5 py-1 rounded-full border border-amber-200 shadow",children:c}),n.owned&&l.jsx("span",{className:"bg-emerald-500/90 text-white text-[11px] font-bold px-2.5 py-1 rounded-full border border-white/40 shadow",children:"OWNED"})]}),l.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex items-center justify-between text-white",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(to,{size:16,fill:"currentColor",className:"text-amber-400"}),l.jsx("span",{className:"font-bold",children:a?n.rating.toFixed(1):""}),l.jsxs("span",{className:"text-white/70 text-xs",children:["(",n.reviews||0,")"]})]}),l.jsx("div",{className:"text-xs bg-white/20 px-3 py-1 rounded-full border border-white/20",children:n.timeWindow})]})]}),l.jsxs("div",{className:"p-5 flex-1 flex flex-col gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500",children:[l.jsx(ln,{size:14,className:"text-brand-gold"}),l.jsx("span",{children:n.teaser})]}),l.jsx("h3",{className:"text-xl font-serif font-bold text-brand-dark",children:n.title}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed flex-1 line-clamp-3",children:n.description}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-stone-500",children:[l.jsxs("span",{className:"bg-brand-base text-brand-dark px-2.5 py-1 rounded-full border border-stone-200",children:[" ",n.distanceKm.toFixed(1)," km"]}),l.jsxs("span",{className:"bg-brand-base text-brand-dark px-2.5 py-1 rounded-full border border-stone-200",children:[" ",Math.round(n.durationMin/5)*5," "]}),l.jsxs("span",{className:"bg-brand-base text-brand-dark px-2.5 py-1 rounded-full border border-stone-200",children:[" ",n.mood]}),n.owned&&l.jsx("span",{className:"text-[11px] text-emerald-700 bg-emerald-50 border border-emerald-100 px-2 py-1 rounded-full font-bold",children:""})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2",children:[l.jsxs("div",{className:"flex gap-2",children:[n.tags.slice(0,3).map(p=>l.jsxs("span",{className:"text-xs text-brand-gold bg-brand-gold/10 border border-brand-gold/30 px-2 py-1 rounded-full",children:["#",p]},p)),l.jsx("span",{className:"text-[11px] text-emerald-700 bg-emerald-50 border border-emerald-100 px-2 py-1 rounded-full font-bold",children:i?` ${i}`:""})]}),l.jsxs("button",{onClick:p=>{p.stopPropagation(),t(n)},className:"flex items-center gap-2 text-sm font-bold text-brand-dark hover:text-brand-gold transition-colors",children:[" ",l.jsx(Pb,{size:16})]})]})]})]})},lA=({onSelectQuest:n,onBackHome:t,activeFilter:a,setActiveFilter:i,sortKey:c,setSortKey:u,onOpenApp:d,comingSoon:p,onScrollNotify:m,ownedQuestIds:g})=>{const[x,y]=A.useState([]),[v,j]=A.useState(!1);A.useEffect(()=>{(async()=>{j(!0);const{data:U,error:R}=await Ne.from("quests").select("*, profiles!quests_creator_id_fkey(username)").eq("status","published").order("created_at",{ascending:!1});if(!R&&U){const Q=U.map(H=>H.id);let F=[];if(Q.length){const{data:H,error:M}=await Ne.from("quest_reviews").select("quest_id,rating").in("quest_id",Q);!M&&H&&(F=H)}const te=U.map(H=>{var xe;const M=F.filter(Te=>Te.quest_id===H.id&&Te.rating!=null),re=M.length>0?parseFloat((M.reduce((Te,Me)=>Te+(Me.rating||0),0)/M.length).toFixed(1)):0,je=M.length;return{id:H.id,title:H.title||"",area:H.area_name||"",distanceKm:H.distance_km||2,durationMin:H.duration_min||60,difficulty:"",tags:H.tags||[""],rating:re,reviews:je,cover:H.cover_image_url||"https://images.unsplash.com/photo-1505761671935-60b3a7427bad?auto=format&fit=crop&w=1200&q=80",description:H.description||"",teaser:H.area_name||"",startingPoint:"",reward:"",timeWindow:"",mood:"",stops:[],creatorName:((xe=H.profiles)==null?void 0:xe.username)||"TOMOSHIBI Creator",creatorId:H.creator_id,owned:(g==null?void 0:g.includes(H.id))||!1}});y(te)}else y([]);j(!1)})()},[g]),A.useEffect(()=>{g&&y(O=>O.map(U=>({...U,owned:g.includes(U.id)})))},[g]);const N={date:["date",""],family:["family",""],night:["night",""],history:["history",""],beginner:["beginner",""]},k=[...x.filter(O=>{if(a==="all")return!0;const R=(Array.isArray(O.tags)?O.tags:[]).map(F=>typeof F=="string"?F.replace(/^#/,""):"").filter(Boolean),Q=N[a]||[a];return R.some(F=>Q.includes(F))})].sort((O,U)=>c==="short"?O.durationMin-U.durationMin:c==="distance"?O.distanceKm-U.distanceKm:U.rating-O.rating);return l.jsxs("section",{className:"pt-28 pb-16 relative",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative",children:[l.jsxs("div",{className:"flex flex-col gap-6 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"inline-block px-3 py-1 bg-brand-gold/10 border border-brand-gold/30 rounded-full text-brand-gold text-xs font-bold tracking-widest mb-3",children:"QUESTS CURATED LIKE QUESTO"}),l.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold text-brand-dark",children:""}),l.jsx("p",{className:"text-stone-600 text-sm md:text-base",children:"Questo"})]}),l.jsxs("div",{className:"flex items-center gap-2 self-start",children:[l.jsx("button",{onClick:t,className:"text-sm text-stone-600 hover:text-brand-dark underline underline-offset-4",children:"LP"}),l.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"bg-brand-dark text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-brand-gold transition-colors",children:""})]})]}),l.jsx(_w,{onPrimary:d,comingSoon:p,onScrollNotify:m}),l.jsx("div",{className:"bg-white/80 backdrop-blur border border-stone-200/60 rounded-2xl p-4 md:p-6 shadow-lg",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:gap-4",children:[K3.map(O=>l.jsxs("button",{onClick:()=>i(O.key),className:`px-4 py-3 rounded-xl text-sm font-bold border transition-all duration-200 ${a===O.key?"bg-brand-dark text-white border-brand-dark shadow-md":"bg-brand-base text-brand-dark border-stone-200 hover:border-brand-gold/60"}`,children:[l.jsx("div",{children:O.label}),l.jsx("div",{className:`text-[11px] font-medium ${a===O.key?"text-white/80":"text-stone-500"}`,children:O.desc})]},O.key)),l.jsxs("div",{className:"ml-auto flex items-center gap-2 text-sm text-stone-600",children:[l.jsx("span",{className:"text-xs uppercase tracking-widest text-stone-400",children:"Sort"}),l.jsx("button",{onClick:()=>u("popular"),className:`px-3 py-2 rounded-full border ${c==="popular"?"border-brand-gold text-brand-dark":"border-stone-200 text-stone-500"}`,children:""}),l.jsx("button",{onClick:()=>u("short"),className:`px-3 py-2 rounded-full border ${c==="short"?"border-brand-gold text-brand-dark":"border-stone-200 text-stone-500"}`,children:""}),l.jsx("button",{onClick:()=>u("distance"),className:`px-3 py-2 rounded-full border ${c==="distance"?"border-brand-gold text-brand-dark":"border-stone-200 text-stone-500"}`,children:""})]})]})})]}),l.jsx("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-6",children:k.map(O=>l.jsx(iA,{quest:O,onSelect:n},O.id))})]})]})},oA=({quest:n,onBackToList:t,onBackHome:a,onOpenApp:i,comingSoon:c,onScrollNotify:u,purchased:d,onPurchase:p,purchasing:m})=>l.jsxs("section",{className:"pt-28 pb-16 relative",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-600 mb-4",children:[l.jsx("button",{onClick:a,className:"hover:text-brand-dark underline underline-offset-4",children:"LP"}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("button",{onClick:t,className:"hover:text-brand-dark underline underline-offset-4",children:""}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("span",{className:"text-brand-dark font-bold",children:n.title})]}),l.jsxs("div",{className:"bg-white/80 backdrop-blur border border-stone-200/60 rounded-3xl overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"relative h-[340px]",children:[l.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-dark via-brand-dark/40 to-transparent"}),l.jsxs("div",{className:"absolute top-6 left-6 flex items-center gap-3 flex-wrap",children:[l.jsx("span",{className:"bg-white/80 px-4 py-2 rounded-full text-sm font-bold text-brand-dark shadow",children:n.area}),l.jsx(Nw,{level:n.difficulty}),l.jsx("span",{className:"bg-white/60 px-3 py-1 rounded-full text-xs text-brand-dark border border-white/70",children:n.mood})]}),l.jsxs("div",{className:"absolute bottom-6 left-6 right-6 flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{className:"text-white",children:[l.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Quest File"}),l.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold",children:n.title}),l.jsx("p",{className:"text-sm text-white/80 max-w-2xl",children:n.teaser}),n.creatorName&&l.jsxs("p",{className:"text-xs text-white/70 mt-1",children:[": ",n.creatorName]}),d&&l.jsx("p",{className:"inline-flex items-center gap-2 mt-2 px-3 py-1 rounded-full bg-emerald-500/80 text-white text-xs font-bold border border-white/30",children:" /mobile "})]}),l.jsxs("div",{className:"flex items-center gap-4 bg-white/10 border border-white/20 px-4 py-3 rounded-2xl backdrop-blur",children:[l.jsxs("div",{className:"flex items-center gap-2 text-white",children:[l.jsx(to,{size:18,fill:"currentColor",className:"text-amber-400"}),l.jsx("span",{className:"font-bold text-lg",children:n.rating.toFixed(1)}),l.jsxs("span",{className:"text-white/70 text-sm",children:["(",n.reviews," reviews)"]})]}),l.jsxs("div",{className:"text-xs text-white/70",children:[n.clearRate!=null?` ${n.clearRate}%`:""," /  ",n.playCount??0," "]})]})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-10 p-6 md:p-10",children:[l.jsxs("div",{className:"lg:col-span-3 grid md:grid-cols-3 gap-3 mb-2",children:[l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsxs("p",{className:"text-2xl font-serif font-bold text-brand-dark",children:[n.playCount??0,l.jsx("span",{className:"text-sm text-stone-500 ml-1",children:""})]})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsx("p",{className:"text-2xl font-serif font-bold text-brand-dark",children:n.clearRate!=null?`${n.clearRate}%`:""})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsx("p",{className:"text-2xl font-serif font-bold text-brand-dark",children:n.avgDurationMin!=null?`${n.avgDurationMin}`:`${Math.round(n.durationMin/5)*5}`})]})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx(_w,{onPrimary:i,comingSoon:c,onScrollNotify:u}),l.jsx("p",{className:"text-xs text-stone-500 mt-2",children:" "})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:""}),l.jsx("p",{className:"text-stone-600 leading-relaxed whitespace-pre-line",children:n.storyPrologue||n.description||""})]}),l.jsxs("div",{className:"bg-brand-base/70 border border-stone-200 rounded-2xl p-6 shadow-inner",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(yf,{size:18,className:"text-brand-gold"}),l.jsx("h4",{className:"text-brand-dark font-bold",children:""})]}),l.jsx("div",{className:"space-y-4",children:n.stops&&n.stops.length>0?n.stops.map((g,x)=>l.jsxs("div",{className:"bg-white/80 border border-white/60 rounded-xl p-4 flex gap-4 items-start",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-dark text-white flex items-center justify-center font-bold",children:x+1}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ln,{size:16,className:"text-brand-gold"}),l.jsx("p",{className:"font-bold text-brand-dark",children:g.name||` ${x+1}`})]}),l.jsx("p",{className:"text-stone-600 text-sm mt-1",children:g.clue||"/"}),g.action&&l.jsxs("p",{className:"text-xs text-brand-dark mt-1 font-semibold uppercase tracking-wide",children:["Action: ",g.action]})]})]},`${g.name}-${x}`)):l.jsx("p",{className:"text-sm text-stone-600",children:""})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-brand-dark text-white rounded-2xl p-6 shadow-xl space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-300 text-sm",children:[l.jsx(ln,{size:16}),l.jsx("span",{children:""})]}),l.jsx("p",{className:"font-serif text-xl",children:n.startingPoint}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-xl p-3 border border-white/10",children:[l.jsx("p",{className:"text-white/60 text-xs",children:""}),l.jsxs("p",{className:"text-lg font-bold",children:[n.distanceKm.toFixed(1)," km"]})]}),l.jsxs("div",{className:"bg-white/10 rounded-xl p-3 border border-white/10",children:[l.jsx("p",{className:"text-white/60 text-xs",children:""}),l.jsxs("p",{className:"text-lg font-bold",children:[Math.round(n.durationMin/5)*5," "]})]}),l.jsxs("div",{className:"bg-white/10 rounded-xl p-3 border border-white/10",children:[l.jsx("p",{className:"text-white/60 text-xs",children:""}),l.jsx("p",{className:"text-sm font-bold leading-tight",children:n.timeWindow})]}),l.jsxs("div",{className:"bg-white/10 rounded-xl p-3 border border-white/10",children:[l.jsx("p",{className:"text-white/60 text-xs",children:""}),l.jsx("p",{className:"text-sm font-bold leading-tight",children:n.reward})]})]}),l.jsxs("button",{className:`w-full font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2 ${d?"bg-emerald-500 text-white hover:bg-emerald-500":"bg-brand-gold text-brand-dark hover:bg-white"}`,onClick:()=>d?i():p(n.id),disabled:m,children:[m?"...":d?"  /mobile ":" /mobile ",!d&&!m&&l.jsx(Pb,{size:16})]}),l.jsx("p",{className:"text-xs text-white/70 leading-relaxed",children:d?"/mobile  Cases GamePlay ":" / "})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-brand-dark font-bold",children:[l.jsx(pr,{size:16}),""]}),l.jsx("p",{className:"text-sm text-stone-600",children:"QuestoAR"}),l.jsxs("ul",{className:"text-sm text-stone-600 space-y-1 list-disc list-inside",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]})]})]})]})]})]}),cA=({mode:n,setMode:t,status:a,onSubmit:i,onBackHome:c,error:u})=>{const[d,p]=A.useState(""),[m,g]=A.useState(""),[x,y]=A.useState(""),v={login:"",signup:"",forgot:""},j={login:"",signup:"TOMOSHIBI/",forgot:""},N=S=>{S.preventDefault(),i({email:d,password:m,confirmPassword:x})};return l.jsxs("section",{className:"pt-28 pb-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/70 via-transparent to-brand-base/80"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-600 mb-6",children:[l.jsx("button",{onClick:c,className:"hover:text-brand-dark underline underline-offset-4",children:"LP"}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("span",{className:"text-brand-dark font-bold",children:v[n]})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-10 items-center",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-brand-gold/10 text-brand-gold border border-brand-gold/30 rounded-full text-xs font-bold tracking-widest",children:["ACCOUNT",l.jsx(Hn,{size:14})]}),l.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold text-brand-dark leading-tight",children:v[n]}),l.jsx("p",{className:"text-stone-600 text-base leading-relaxed max-w-xl",children:j[n]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-600",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx(Xb,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx(Uh,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx(Zc,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"bg-white/90 backdrop-blur border border-white/80 rounded-3xl p-8 shadow-2xl space-y-6",children:[l.jsxs("div",{className:"flex gap-2 text-sm",children:[l.jsx("button",{onClick:()=>t("login"),className:`flex-1 py-2 rounded-full border font-bold ${n==="login"?"bg-brand-dark text-white border-brand-dark":"bg-brand-base text-brand-dark border-stone-200"}`,children:""}),l.jsx("button",{onClick:()=>t("signup"),className:`flex-1 py-2 rounded-full border font-bold ${n==="signup"?"bg-brand-dark text-white border-brand-dark":"bg-brand-base text-brand-dark border-stone-200"}`,children:""}),l.jsx("button",{onClick:()=>t("forgot"),className:`flex-1 py-2 rounded-full border font-bold ${n==="forgot"?"bg-brand-dark text-white border-brand-dark":"bg-brand-base text-brand-dark border-stone-200"}`,children:""})]}),a==="success"?l.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl flex items-center gap-2",children:[l.jsx(gi,{size:18}),l.jsx("span",{children:n==="forgot"?"":""})]}):l.jsxs("form",{onSubmit:N,className:"space-y-4",children:[u&&l.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:u}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{type:"email",required:!0,value:d,onChange:S=>p(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),n!=="forgot"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{type:"password",required:!0,value:m,onChange:S=>g(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),n==="signup"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),l.jsx("input",{type:"password",required:!0,value:x,onChange:S=>y(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsx("button",{type:"submit",disabled:a==="submitting",className:"w-full bg-brand-dark text-white py-3 rounded-full font-bold hover:bg-brand-gold transition-colors flex items-center justify-center gap-2 disabled:opacity-70",children:a==="submitting"?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):v[n]})]}),n!=="login"&&l.jsx("button",{onClick:()=>t("login"),className:"text-sm text-brand-gold font-bold underline",children:""}),n==="login"&&l.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-600",children:[l.jsx("button",{onClick:()=>t("forgot"),className:"underline hover:text-brand-dark",children:""}),l.jsx("button",{onClick:()=>t("signup"),className:"underline hover:text-brand-dark",children:""})]})]})]})]})]})},uA=({onBackHome:n,onGoAuth:t,onOpenOnboarding:a})=>l.jsxs("section",{className:"pt-28 pb-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/70 via-transparent to-brand-base/80"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-600 mb-6",children:[l.jsx("button",{onClick:n,className:"hover:text-brand-dark underline underline-offset-4",children:"LP"}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("span",{className:"text-brand-dark font-bold",children:""})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-10 items-center mb-16",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-brand-gold/10 text-brand-gold border border-brand-gold/30 rounded-full text-xs font-bold tracking-widest",children:["FOR CREATORS",l.jsx(Hn,{size:14})]}),l.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-serif font-bold text-brand-dark leading-tight",children:["",l.jsx("br",{}),""]}),l.jsxs("p",{className:"text-stone-600 text-base md:text-lg leading-relaxed max-w-xl",children:["",l.jsx("br",{}),"Questo"]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{onClick:a,className:"border border-stone-300 text-brand-dark px-6 py-3 rounded-full font-bold text-sm hover:border-brand-gold hover:text-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:n,className:"border border-stone-300 text-brand-dark px-6 py-3 rounded-full font-bold text-sm hover:border-brand-gold hover:text-brand-gold transition-colors",children:"LP"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-stone-600",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx(Hb,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:"70%"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx(Zc,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-white/80 border border-stone-200 rounded-xl px-3 py-2 shadow-sm",children:[l.jsx($b,{size:16,className:"text-brand-gold"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute -right-8 -top-8 w-40 h-40 bg-brand-gold/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute -left-10 -bottom-10 w-48 h-48 bg-brand-dark/10 rounded-full blur-3xl"}),l.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border-4 border-white shadow-2xl",children:[l.jsx("img",{src:"https://images.unsplash.com/photo-1522199755839-a2bacb67c546?auto=format&fit=crop&w=1400&q=80",alt:"",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-brand-dark/50 via-transparent to-transparent"}),l.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/85 backdrop-blur rounded-2xl border border-white/70 p-4 shadow-lg max-w-[240px]",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Hn,{size:16,className:"text-brand-gold"}),l.jsx("span",{className:"text-xs font-bold text-brand-dark",children:"Quest Draft"})]}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed",children:""})]})]})]})]}),l.jsxs("div",{className:"mb-14",children:[l.jsx(ka,{subtitle:"TOMOSHIBI3",children:"Why Create with TOMOSHIBI?"}),l.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Y3.map((i,c)=>l.jsxs(St.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:c*.1},className:"bg-white/80 backdrop-blur border border-white/70 rounded-2xl p-6 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-base flex items-center justify-center border border-stone-200",children:l.jsx(i.icon,{className:"text-brand-gold",size:24})}),l.jsx("span",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:i.badge})]}),l.jsx("h3",{className:"text-xl font-serif font-bold text-brand-dark mb-2",children:i.title}),l.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:i.description})]},i.title))})]}),l.jsxs("div",{className:"mb-14",children:[l.jsx(ka,{subtitle:"",children:""}),l.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:X3.map((i,c)=>l.jsxs(St.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:c*.1},className:`rounded-2xl p-6 shadow-lg border ${i.highlight?"bg-brand-gold/10 border-brand-gold/30":"bg-white/80 backdrop-blur border-white/70"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-base flex items-center justify-center border border-stone-200",children:l.jsx(i.icon,{className:"text-brand-gold",size:24})}),i.highlight&&l.jsx("span",{className:"text-[11px] font-bold text-brand-dark bg-white/80 border border-brand-gold/40 rounded-full px-3 py-1",children:i.highlight})]}),l.jsx("h4",{className:"text-lg font-bold text-brand-dark mb-2",children:i.title}),l.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:i.description})]},i.title))})]}),l.jsxs("div",{className:"mb-16",children:[l.jsx(ka,{subtitle:"4",children:"How it Works"}),l.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:Q3.map((i,c)=>l.jsxs(St.div,{initial:{opacity:0,y:15},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:c*.1},className:"bg-white/80 border border-white/70 rounded-2xl p-6 shadow-md flex items-start gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-dark text-white flex items-center justify-center font-bold",children:i.step}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h5",{className:"text-lg font-bold text-brand-dark",children:i.title}),i.title.includes("Option")&&l.jsx("span",{className:"text-[11px] bg-brand-gold/20 text-brand-dark font-bold px-2 py-1 rounded-full border border-brand-gold/40",children:""})]}),l.jsx("p",{className:"text-stone-600 text-sm leading-relaxed mt-1",children:i.description})]})]},i.title))})]}),l.jsxs("div",{className:"mb-16",children:[l.jsx(ka,{subtitle:"70%",children:"Revenue Share"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-brand-gold/15 border border-brand-gold/30 rounded-2xl p-6 shadow-lg",children:[l.jsx("p",{className:"text-sm text-brand-dark/80 font-bold uppercase tracking-widest mb-2",children:"Up to"}),l.jsx("p",{className:"text-4xl md:text-5xl font-serif font-bold text-brand-dark mb-3",children:"70%"}),l.jsx("p",{className:"text-sm text-brand-dark leading-relaxed",children:"70%"})]}),l.jsxs("div",{className:"bg-white/85 backdrop-blur border border-white/70 rounded-2xl p-6 shadow-lg",children:[l.jsx("h4",{className:"text-lg font-bold text-brand-dark mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed",children:""})]}),l.jsxs("div",{className:"bg-white/85 backdrop-blur border border-white/70 rounded-2xl p-6 shadow-lg",children:[l.jsx("h4",{className:"text-lg font-bold text-brand-dark mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-600 leading-relaxed",children:""})]})]})]}),l.jsxs("div",{className:"bg-brand-dark text-white rounded-3xl p-10 md:p-12 flex flex-col md:flex-row items-center justify-between gap-6 shadow-2xl border border-brand-dark/60",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm uppercase tracking-widest text-white/70 mb-2",children:"Join as Creator"}),l.jsx("h3",{className:"text-2xl md:text-3xl font-serif font-bold mb-2",children:""}),l.jsx("p",{className:"text-white/80 text-sm md:text-base leading-relaxed",children:"70%"})]}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:l.jsx("button",{onClick:n,className:"border border-white/40 text-white px-6 py-3 rounded-full font-bold hover:bg-white/10 transition-colors",children:"LP"})})]})]})]});function dA({onLogoHome:n,onBack:t,onComplete:a,questTitle:i,questDescription:c,questLocation:u,questLatLng:d,routeSpots:p,storySettings:m,questId:g,userId:x,userEmail:y,questCategoryTags:v,setQuestCategoryTags:j,questHashtags:N,setQuestHashtags:S}){const[k,O]=A.useState({core:!1,route:!1,story:!1}),[U,R]=A.useState(""),[Q,F]=A.useState(!1),te=Object.values(k).every(Boolean)&&Q,[H,M]=A.useState("idle"),re=[{value:"",desc:"2"},{value:"",desc:"OK"},{value:"",desc:""},{value:"",desc:""},{value:"",desc:""}],[je,xe]=A.useState(""),[Te,Me]=A.useState("idle"),[Ge,oe]=A.useState(null),P=async()=>{if(!(!U.trim()||H==="sending")){M("sending");try{const{data:I,error:ce}=await Ne.from("profiles").select("id").eq("role","admin");if(ce)throw ce;const ge=(I||[]).map(W=>W.id).filter(Boolean);if(ge.length===0)throw new Error("");const ke=`: ${i||""}`,se=`${U.trim()}

from: ${y||x||""}
quest: ${i||""}${g?` (${g})`:""}`,$=ge.map(W=>({user_id:W,title:ke,message:se,type:"creator_question"}));await Ne.from("notifications").insert($),M("success"),F(!0)}catch{M("error")}}},X=I=>{j(ce=>ce.includes(I)?ce.filter(ge=>ge!==I):[...ce,I])},ie=()=>{const I=je.trim();if(!I)return;const ce=I.startsWith("#")?I:`#${I}`;if(N.includes(ce)){xe("");return}S([...N,ce]),xe("")},ye=I=>{S(N.filter(ce=>ce!==I))},Z=async()=>{if(!g)return oe("IDStep1"),!1;Me("saving"),oe(null);const I=[...v,...N];try{return await Ne.from("quests").update({tags:I,category_tags:v,hashtag_tags:N}).eq("id",g),Me("idle"),!0}catch(ce){return Me("error"),oe((ce==null?void 0:ce.message)||""),!1}},T=async()=>{await Z()&&a()},K=p.map((I,ce)=>{var W,ae,ve,G,le;const ge=(((W=I.details)==null?void 0:W.storyText)||"").trim().length>0,ke=(((ae=I.details)==null?void 0:ae.challengeText)||"").trim().length>0,se=((ve=I.details)==null?void 0:ve.answerType)==="choice"?(((G=I.details)==null?void 0:G.choiceOptions)||[]).length>0:(((le=I.details)==null?void 0:le.answerText)||"").trim().length>0;return{idx:ce,spot:I,isComplete:ge&&ke&&se,missing:[ge?null:"",ke?null:"",se?null:""].filter(Boolean)}}),ne=m.scenario.length;return l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:n,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"container mx-auto px-4 md:px-10 py-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("button",{onClick:t,className:"text-sm text-brand-dark font-bold hover:underline flex items-center gap-2",children:"< Workspace"}),l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step 4 / 5"})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-6 shadow-sm",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Final Review"}),l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark mt-2",children:""}),l.jsx("p",{className:"text-sm text-stone-700 mt-3 leading-relaxed",children:"Step13/"})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-6 shadow-sm space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-brand-dark flex items-center gap-2",children:[l.jsx(Gb,{size:18,className:"text-brand-gold"}),""]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-stone-200 p-4 bg-brand-base/60",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step1"}),l.jsxs("label",{className:"flex items-center gap-2 text-xs text-stone-600",children:[l.jsx("input",{type:"checkbox",checked:k.core,onChange:()=>O(I=>({...I,core:!I.core})),className:"rounded border-stone-300 text-brand-dark"}),""]})]}),l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:i||""}),l.jsx("p",{className:"text-xs text-stone-600 line-clamp-2 mt-1",children:c||""}),l.jsxs("div",{className:"text-xs text-stone-600 mt-2",children:[l.jsxs("div",{children:[": ",u||""]}),d&&l.jsxs("div",{children:[": ",d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]})]}),l.jsxs("div",{className:"rounded-2xl border border-stone-200 p-4 bg-brand-base/60",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step2"}),l.jsxs("label",{className:"flex items-center gap-2 text-xs text-stone-600",children:[l.jsx("input",{type:"checkbox",checked:k.route,onChange:()=>O(I=>({...I,route:!I.route})),className:"rounded border-stone-300 text-brand-dark"}),""]})]}),p.length===0?l.jsx("p",{className:"text-sm text-stone-500",children:"Step2"}):l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1",children:K.map(({spot:I,idx:ce,isComplete:ge,missing:ke})=>l.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-dark text-white flex items-center justify-center text-xs font-bold",children:ce+1}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-bold text-brand-dark",children:I.name||`Spot ${ce+1}`}),l.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full border ${ge?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-amber-50 text-amber-700 border-amber-200"}`,children:ge?"OK":`: ${ke.join("")}`})]}),l.jsx("p",{className:"text-xs text-stone-500",children:I.address||""})]})]},I.id))})]}),l.jsxs("div",{className:"rounded-2xl border border-stone-200 p-4 bg-brand-base/60 md:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-xs text-stone-500 font-bold",children:"Step3"}),l.jsxs("label",{className:"flex items-center gap-2 text-xs text-stone-600",children:[l.jsx("input",{type:"checkbox",checked:k.story,onChange:()=>O(I=>({...I,story:!I.story})),className:"rounded border-stone-300 text-brand-dark"}),""]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm text-stone-700",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsx("p",{className:"font-bold text-brand-dark",children:m.castName||""}),l.jsx("p",{className:"text-xs text-stone-500",children:m.castTone||""})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsxs("p",{className:"font-bold text-brand-dark",children:[m.characters.length," "]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsxs("p",{className:"font-bold text-brand-dark",children:[ne," "]})]})]}),l.jsxs("div",{className:"mt-3 grid md:grid-cols-2 gap-3 text-sm text-stone-700",children:[l.jsxs("div",{className:"rounded-xl border border-stone-200 bg-white p-3",children:[l.jsx("p",{className:"text-xs text-stone-500 mb-1",children:""}),l.jsx("p",{className:"font-bold text-brand-dark",children:m.prologueTitle||""}),l.jsx("p",{className:"text-xs text-stone-600 line-clamp-2",children:(m.prologueBody||"").replace(/\s+/g," ").trim()})]}),l.jsxs("div",{className:"rounded-xl border border-stone-200 bg-white p-3",children:[l.jsx("p",{className:"text-xs text-stone-500 mb-1",children:""}),l.jsx("p",{className:"text-xs text-stone-600 line-clamp-3",children:(m.epilogueBody||"").replace(/\s+/g," ").trim()}),m.socialMessage&&l.jsxs("p",{className:"text-[11px] text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-lg px-2 py-1 mt-2",children:[": ",m.socialMessage]})]})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-6 shadow-sm space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-brand-dark flex items-center gap-2",children:[l.jsx(S_,{size:18,className:"text-brand-gold"})," & "]}),l.jsx("p",{className:"text-sm text-stone-600",children:" # "}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:re.map(I=>{const ce=v.includes(I.value);return l.jsxs("button",{onClick:()=>X(I.value),className:`w-full text-left rounded-2xl border px-4 py-3 transition-all ${ce?"border-brand-dark bg-brand-dark text-white":"border-stone-200 bg-brand-base hover:border-brand-gold"}`,children:[l.jsx("p",{className:"text-sm font-bold",children:I.value}),l.jsx("p",{className:`text-xs ${ce?"text-white/80":"text-stone-500"}`,children:I.desc})]},I.value)})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsx("input",{value:je,onChange:I=>xe(I.target.value),placeholder:"# ",className:"flex-1 rounded-2xl border border-stone-200 bg-white px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-brand-gold/40"}),l.jsx("button",{onClick:ie,className:"px-4 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors shadow",children:"#"}),l.jsx("button",{onClick:Z,disabled:Te==="saving",className:"px-4 py-3 rounded-full border border-stone-300 text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-colors shadow-sm",children:Te==="saving"?"...":""})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[...v,...N].length===0&&l.jsx("span",{className:"text-xs text-stone-500",children:""}),v.map(I=>l.jsxs("span",{className:"text-xs bg-brand-dark text-white px-3 py-1 rounded-full border border-brand-dark",children:["#",I]},I)),N.map(I=>l.jsxs("button",{onClick:()=>ye(I),className:"text-xs bg-amber-50 text-amber-800 px-3 py-1 rounded-full border border-amber-200 hover:border-amber-400 transition-colors",children:[I," "]},I))]}),Ge&&l.jsx("p",{className:"text-xs text-rose-600",children:Ge})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-6 shadow-sm space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-brand-dark flex items-center gap-2",children:[l.jsx(pr,{size:18,className:"text-brand-gold"}),""]}),l.jsxs("ul",{className:"space-y-3 text-sm text-stone-700",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(zl,{size:16,className:"text-emerald-600 mt-0.5"})," "]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(zl,{size:16,className:"text-emerald-600 mt-0.5"})," 500m"]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(zl,{size:16,className:"text-emerald-600 mt-0.5"})," "]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(zl,{size:16,className:"text-emerald-600 mt-0.5"})," "]})]})]}),l.jsxs("div",{className:"bg-brand-base rounded-3xl border border-dashed border-stone-300 p-6 shadow-inner",children:[l.jsx("p",{className:"text-sm text-stone-700 mb-3",children:""}),l.jsx("textarea",{value:U,onChange:I=>R(I.target.value),placeholder:"",className:"w-full h-28 rounded-2xl border border-stone-200 bg-white px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-brand-gold/40"}),l.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 items-center",children:[l.jsxs("button",{onClick:P,disabled:!U.trim()||H==="sending",className:`px-4 py-2 rounded-full text-sm font-bold border shadow-sm flex items-center gap-2 ${U.trim()&&H!=="sending"?"bg-brand-dark text-white border-brand-dark hover:bg-brand-gold":"bg-stone-100 text-stone-400 border-stone-200 cursor-not-allowed"}`,children:[l.jsx(wf,{size:16}),H==="sending"?"...":""]}),H==="success"&&l.jsx("span",{className:"text-xs text-emerald-700",children:""}),H==="error"&&l.jsx("span",{className:"text-xs text-rose-600",children:""})]}),l.jsxs("label",{className:"mt-3 inline-flex items-center gap-2 text-sm text-stone-700",children:[l.jsx("input",{type:"checkbox",checked:Q,onChange:()=>F(I=>!I),className:"rounded border-stone-300 text-brand-dark"}),""]}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{onClick:T,disabled:!te,className:`px-5 py-3 rounded-full text-sm font-bold transition-colors shadow-lg ${te?"bg-brand-dark text-white hover:bg-brand-gold":"bg-stone-200 text-stone-500 cursor-not-allowed"}`,children:""}),l.jsx("button",{onClick:t,className:"px-5 py-3 rounded-full border border-stone-300 text-brand-dark text-sm font-bold hover:border-brand-gold hover:text-brand-gold transition-colors shadow-sm",children:""})]})]})]}),l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 p-6 shadow-sm space-y-4 h-fit",children:[l.jsx("h4",{className:"text-sm font-bold text-brand-dark uppercase tracking-widest",children:"Next"}),l.jsx("p",{className:"text-lg font-serif font-bold text-brand-dark",children:"Publish (Step 5)"}),l.jsx("p",{className:"text-sm text-stone-700",children:"Step 13"})]})]})]})]})}function hA({onLogoHome:n,onBackHome:t}){return l.jsxs("section",{className:"min-h-screen bg-white flex flex-col",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:n,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsx("div",{className:"flex-1 container mx-auto px-4 md:px-10 py-12 max-w-3xl",children:l.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 shadow-sm p-8 space-y-4 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-brand-gold/10 border border-brand-gold/30 flex items-center justify-center",children:l.jsx(wf,{className:"text-brand-gold"})}),l.jsx("h1",{className:"text-2xl font-serif font-bold text-brand-dark",children:""}),l.jsx("p",{className:"text-sm text-stone-700 leading-relaxed",children:""}),l.jsx("div",{className:"flex justify-center gap-3 mt-4",children:l.jsx("button",{onClick:t,className:"px-5 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors shadow-lg",children:""})})]})})]})}function fA({pending:n,onReview:t}){return l.jsx("section",{className:"min-h-screen bg-white pt-28 pb-12",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-10",children:[l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-600 mb-6",children:"pending_review "}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl overflow-hidden shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-4 text-xs font-bold text-stone-500 px-4 py-3 bg-brand-base",children:[l.jsx("div",{children:""}),l.jsx("div",{children:""}),l.jsx("div",{children:""}),l.jsx("div",{className:"text-right",children:""})]}),n.length===0&&l.jsx("div",{className:"px-4 py-6 text-sm text-stone-500",children:""}),n.map(a=>{var i;return l.jsxs("div",{className:"grid grid-cols-4 items-center px-4 py-3 border-t border-stone-100 text-sm",children:[l.jsx("div",{className:"text-stone-600",children:new Date(a.created_at).toLocaleString()}),l.jsx("div",{className:"font-bold text-brand-dark",children:a.title||""}),l.jsx("div",{className:"text-stone-700",children:((i=a.profiles)==null?void 0:i.username)||""}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:()=>t(a.id),className:"px-3 py-2 rounded-full bg-brand-dark text-white text-xs font-bold hover:bg-brand-gold",children:""})})]},a.id)})]})]})})}function mA({questBundle:n,onBack:t,onApprove:a,onReject:i,loading:c}){var x,y;const[u,d]=A.useState("");if(!n)return l.jsx("section",{className:"min-h-screen bg-white flex items-center justify-center text-stone-500",children:"..."});const{quest:p,spots:m,story:g}=n;return l.jsx("section",{className:"min-h-screen bg-white pt-28 pb-12",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-10 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Review"}),l.jsx("h1",{className:"text-3xl font-serif font-bold text-brand-dark",children:p.title||""}),l.jsxs("p",{className:"text-sm text-stone-600",children:[": ",((x=p.profiles)==null?void 0:x.username)||""]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:a,disabled:c,className:"px-4 py-2 rounded-full bg-emerald-600 text-white text-sm font-bold hover:bg-emerald-700 disabled:opacity-60",children:""}),l.jsx("button",{onClick:()=>i(u),disabled:c,className:"px-4 py-2 rounded-full bg-rose-500 text-white text-sm font-bold hover:bg-rose-600 disabled:opacity-60",children:""})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:""}),l.jsxs("p",{className:"text-sm text-stone-700",children:[": ",p.area_name||""]}),l.jsx("p",{className:"text-sm text-stone-700 whitespace-pre-line mt-2",children:p.description||"---"})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:"/"}),l.jsx("div",{className:"space-y-3",children:m&&m.length>0?m.map((v,j)=>l.jsxs("div",{className:"flex items-start gap-3 border border-stone-200 rounded-xl p-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-dark text-white flex items-center justify-center text-sm font-bold",children:j+1}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-brand-dark",children:v.name}),l.jsx("p",{className:"text-xs text-stone-600",children:v.address})]})]},v.id)):l.jsx("p",{className:"text-sm text-stone-600",children:""})})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:""}),l.jsx("p",{className:"text-sm text-stone-700 whitespace-pre-line",children:(g==null?void 0:g.prologue)||""}),l.jsx("div",{className:"mt-3 space-y-2 text-sm text-stone-700",children:((y=g==null?void 0:g.timeline_data)==null?void 0:y.map((v,j)=>l.jsxs("div",{className:"border border-stone-200 rounded-lg px-3 py-2",children:[l.jsx("span",{className:"text-xs text-stone-500",children:v.type}),l.jsx("div",{className:"text-brand-dark",children:v.content||v.text||v.name||""})]},j)))||null}),l.jsx("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-line",children:(g==null?void 0:g.epilogue)||""})]})]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-sm",children:[l.jsx("h4",{className:"text-sm font-bold text-brand-dark mb-2",children:""}),l.jsx("textarea",{value:u,onChange:v=>d(v.target.value),rows:6,className:"w-full rounded-xl border border-stone-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-gold/40",placeholder:""})]})})]})]})})}function pA(){const n=typeof window<"u"?window.location.pathname:"/",t=n==="/play"?"player":n==="/creator"||n==="/creator/workspace"?"creator-workspace":n==="/creator/analytics"||n.startsWith("/creator/analytics/")?"creator-analytics":n==="/creator/route-spots"?"creator-route-spots":n.startsWith("/creator/route-spots/")?"creator-spot-detail":n==="/creator/storytelling"?"creator-storytelling":n==="/creator/test-run"?"creator-test-run":n==="/creator/submitted"?"creator-submitted":n==="/admin"||n==="/admin/dashboard"?"admin-dashboard":n.startsWith("/admin/review/")?"admin-review":"home",[a,i]=A.useState(!1),[c,u]=A.useState(!1),[d,p]=A.useState(null),[m,g]=A.useState(t),[x,y]=A.useState(null),[v,j]=A.useState("all"),[N,S]=A.useState("popular"),[k,O]=A.useState(null),[U,R]=A.useState([]),[Q,F]=A.useState([]),[te,H]=A.useState(!1),[M,re]=A.useState(null),[je,xe]=A.useState(null),[Te,Me]=A.useState(!1),[Ge,oe]=A.useState("login"),[P,X]=A.useState("idle"),[ie,ye]=A.useState(null),{user:Z,profile:T,loading:K,signIn:ne,signUp:I,resetPassword:ce,signOut:ge}=sS(),[ke,se]=A.useState(!1),[$,W]=A.useState(!1),[ae,ve]=A.useState(0),[G,le]=A.useState("mystery"),[ue,de]=A.useState(""),[Ae,ze]=A.useState(""),[Ye,Mt]=A.useState(""),Ma=["","","","",""],[Da,Ua]=A.useState([]),[ts,ki]=A.useState([]),[Ai,qt]=A.useState(1),[vs,gr]=A.useState([]),[xr,br]=A.useState(null),[lo,on]=A.useState(null),[Ke,ss]=A.useState(null),[ns,za]=A.useState([]),[vn,Ci]=A.useState([]),[Ba,cn]=A.useState([]),[Kn,Us]=A.useState([]),[Bt,Yn]=A.useState("all"),[Oi,yr]=A.useState(null),[wn,ws]=A.useState(null),[Ri,Mi]=A.useState(!1),Di=A.useCallback(async _=>{const z=_||(Z==null?void 0:Z.id);if(!z){cn([]);return}try{const{data:he,error:$e}=await Ne.from("quests").select("id,title").eq("creator_id",z);if($e||!(he!=null&&he.length)){cn([]),Us([]);return}const gt=he.map(ft=>ft.id),{data:lt,error:rs}=await Ne.from("play_sessions").select("quest_id,user_id,ended_at,started_at,duration_sec,hints_used,wrong_answers,solved_spots").in("quest_id",gt),{data:zs,error:Ht}=await Ne.from("quest_reviews").select("quest_id,rating,created_at");if(rs){cn([]),Us([]);return}Ht&&console.warn("reviews fetch failed (quest_reviews )",Ht),Us(lt||[]);const rt=ft=>{const fs=Date.now(),Tt=ft*24*60*60*1e3;return(lt||[]).filter(Pe=>{const ls=Pe.ended_at?Date.parse(Pe.ended_at):Pe.started_at?Date.parse(Pe.started_at):null;return ls?fs-ls<=Tt:!0})},Ns=Bt==="all"?lt||[]:rt(Bt==="30d"?30:7),is=(zs||[]).filter(ft=>gt.includes(ft.quest_id)),hs=Bt==="all"?is:is.filter(ft=>{const fs=ft.created_at?Date.parse(ft.created_at):null;if(!fs)return!1;const Tt=Date.now(),Pe=Bt==="30d"?720*60*60*1e3:10080*60*1e3;return Tt-fs<=Pe}),fn=gt.map(ft=>{var It;const fs=((It=he.find(Be=>Be.id===ft))==null?void 0:It.title)||"",Tt=(Ns||[]).filter(Be=>Be.quest_id===ft),Pe=hs.filter(Be=>Be.quest_id===ft&&Be.rating!=null),ls=Tt.length,$t=new Set(Tt.map(Be=>Be.user_id)).size,Oe=Tt.filter(Be=>Be.ended_at!=null).length,xt=Tt.filter(Be=>Be.duration_sec!=null&&Be.ended_at!=null).map(Be=>Be.duration_sec),Vt=Tt.filter(Be=>Be.hints_used!=null).map(Be=>Be.hints_used),wt=Tt.filter(Be=>Be.wrong_answers!=null).map(Be=>Be.wrong_answers),Nn=xt.length>0?Math.round(xt.reduce((Be,Sn)=>Be+Sn,0)/xt.length/60):null,Yi=Vt.length>0?parseFloat((Vt.reduce((Be,Sn)=>Be+Sn,0)/Vt.length).toFixed(1)):null,Xi=wt.length>0?parseFloat((wt.reduce((Be,Sn)=>Be+Sn,0)/wt.length).toFixed(1)):null,Qi=Pe.length>0?parseFloat((Pe.reduce((Be,Sn)=>Be+(Sn.rating||0),0)/Pe.length).toFixed(2)):null;return{questId:ft,title:fs,playCount:ls,uniquePlayers:$t,clearCount:Oe,clearRate:ls>0?Math.round(Oe/ls*100):0,avgDurationMin:Nn,avgHints:Yi,avgWrongs:Xi,avgRating:Qi,reviewCount:Pe.length}});cn(fn)}catch(he){console.warn("creator analytics fetch failed",he),cn([]),Us([])}},[Z==null?void 0:Z.id,Bt]),Xn=A.useCallback(async(_,z)=>{if(!Ri){if(!_){yr(null),ws(null);return}yr(_),Mi(!0),ws(null);try{const{data:he,error:$e}=await Ne.from("spots").select("id,name,order_index").eq("quest_id",_).order("order_index",{ascending:!0});if($e){ws(null);return}const{data:gt,error:lt}=await Ne.from("quest_reviews").select("rating,comment,created_at").eq("quest_id",_).order("created_at",{ascending:!1});lt&&console.warn("detail reviews fetch failed",lt);const rs=Kn.filter(Oe=>Oe.quest_id===_),zs=Oe=>{const xt=Date.now(),Vt=Oe*24*60*60*1e3;return rs.filter(wt=>{const Nn=wt.ended_at?Date.parse(wt.ended_at):wt.started_at?Date.parse(wt.started_at):null;return Nn?xt-Nn<=Vt:!0})},Ht=Bt==="all"?rs:zs(Bt==="30d"?30:7),rt=Ht.length,Ns=Ht.filter(Oe=>Oe.ended_at!=null).length,is=Ht.filter(Oe=>Oe.duration_sec!=null&&Oe.ended_at!=null).map(Oe=>Oe.duration_sec),hs=Ht.filter(Oe=>Oe.hints_used!=null).map(Oe=>Oe.hints_used),fn=Ht.filter(Oe=>Oe.wrong_answers!=null).map(Oe=>Oe.wrong_answers),ft=is.length>0?Math.round(is.reduce((Oe,xt)=>Oe+xt,0)/is.length/60):null,fs=hs.length>0?parseFloat((hs.reduce((Oe,xt)=>Oe+xt,0)/hs.length).toFixed(1)):null,Tt=fn.length>0?parseFloat((fn.reduce((Oe,xt)=>Oe+xt,0)/fn.length).toFixed(1)):null,Pe=(he==null?void 0:he.length)||0,ls=(he||[]).map((Oe,xt)=>{const Vt=xt+1,wt=Ht.filter(It=>(It.solved_spots??0)>=Vt-1).length,Nn=Ht.filter(It=>(It.solved_spots??0)>=Vt).length,Yi=wt>0?Math.max(0,Math.min(1,(wt-Nn)/wt)):0,Xi=wt>0&&Pe>0&&hs.length>0?parseFloat((Ht.filter(It=>(It.solved_spots??0)>=Vt-1).reduce((It,Be)=>It+(Be.hints_used||0)/Pe,0)/wt).toFixed(2)):null,Qi=wt>0&&Pe>0&&fn.length>0?parseFloat((Ht.filter(It=>(It.solved_spots??0)>=Vt-1).reduce((It,Be)=>It+(Be.wrong_answers||0)/Pe,0)/wt).toFixed(2)):null;return{step:Vt,name:Oe.name||` ${Vt}`,reached:wt,completed:Nn,dropRate:Yi,avgHints:Xi,avgWrongs:Qi}}),$t=Bt==="all"?gt||[]:(gt||[]).filter(Oe=>{const xt=Oe.created_at?Date.parse(Oe.created_at):null;if(!xt)return!1;const Vt=Date.now(),wt=Bt==="30d"?720*60*60*1e3:10080*60*1e3;return Vt-xt<=wt});ws({questId:_,title:z||"",summary:{playCount:rt,clearRate:rt>0?Math.round(Ns/rt*100):0,avgDurationMin:ft,avgHints:fs,avgWrongs:Tt},steps:ls,reviews:{avgRating:$t&&$t.length>0?parseFloat(($t.reduce((Oe,xt)=>Oe+(xt.rating||0),0)/$t.length).toFixed(2)):null,count:($t==null?void 0:$t.length)||0,distribution:[1,2,3,4,5].map(Oe=>({score:Oe,count:($t==null?void 0:$t.filter(xt=>xt.rating===Oe).length)||0})),latest:($t==null?void 0:$t.slice(0,10).map(Oe=>({rating:Oe.rating,comment:Oe.comment,created_at:Oe.created_at})))||[]}})}catch(he){console.warn("detail analytics fetch failed",he),ws(null)}finally{Mi(!1)}}},[Bt,Kn]),[Ui,vr]=A.useState(!1),[oo,wr]=A.useState(!1),[Qs,Dt]=A.useState(!1),Zt=async()=>{if(!(Z!=null&&Z.id))return;const{data:_,error:z}=await Ne.from("quests").select("*").eq("creator_id",Z.id).order("created_at",{ascending:!1});!z&&_&&za(_)},un=A.useCallback(async()=>{if(!(Z!=null&&Z.id)){Ci([]);return}const{data:_,error:z}=await Ne.from("purchases").select("quest_id").eq("user_id",Z.id);if(!z&&_){const he=Array.from(new Set((_||[]).map($e=>$e.quest_id).filter(Boolean)));Ci(he)}else Ci([])},[Z==null?void 0:Z.id]),[jr,co]=A.useState({castName:"",castTone:"",castIcon:"",prologueTitle:"",prologueBody:"",prologueImage:"",epilogueBody:"",socialMessage:"",epilogueImage:"",characters:[],scenario:[]}),Qn=(Z==null?void 0:Z.email)||null,[zi,Fn]=A.useState(""),[Zn,jn]=A.useState("idle"),Jn=(_,z,he)=>{switch(_){case"home":return"/";case"player":return"/play";case"quests":return"/quests";case"quest-detail":return z?`/quest/${z}`:"/quests";case"creators":return"/creators";case"auth":return he==="signup"?"/auth/signup":he==="forgot"?"/auth/forgot":"/auth/login";case"profile":return"/profile";case"creator-start":return"/creator/start";case"creator-mystery-setup":return"/creator/mystery-setup";case"creator-route-spots":return"/creator/route-spots";case"creator-workspace":return z?`/creator/workspace/${z}`:"/creator/workspace";case"creator-storytelling":return"/creator/storytelling";case"creator-test-run":return"/creator/test-run";case"creator-submitted":return"/creator/submitted";case"creator-analytics":return z?`/creator/analytics/${z}`:"/creator/analytics";case"admin-dashboard":return"/admin/dashboard";case"admin-review":return z?`/admin/review/${z}`:"/admin/dashboard";case"creator-spot-detail":return xr?`/creator/route-spots/${xr}`:"/creator/route-spots";default:return"/"}},Ze=(_,z)=>{const he=(z==null?void 0:z.quest)??null,$e=(z==null?void 0:z.authModeOverride)??Ge;z!=null&&z.questId&&(ss(z.questId),localStorage.setItem("quest-id",z.questId),Js(z.questId)),_==="quest-detail"?(y(he),O((z==null?void 0:z.questId)||(he==null?void 0:he.id)||null)):_!=="quest-detail"&&(y(null),O(null)),_==="admin-review"?xe((z==null?void 0:z.questId)||null):_!=="admin-review"&&(xe(null),re(null)),_==="auth"&&(z!=null&&z.authModeOverride)&&oe(z.authModeOverride),_==="creator-spot-detail"?br((z==null?void 0:z.spotId)??null):_!=="creator-spot-detail"&&br(null),_!=="creator-analytics"&&(yr(null),ws(null)),g(_);const gt=_==="creator-spot-detail"&&(z!=null&&z.spotId)?`/creator/route-spots/${z.spotId}`:Jn(_,(z==null?void 0:z.questId)||(he==null?void 0:he.id),_==="auth"?$e:void 0);if(typeof window<"u"){const lt=z!=null&&z.replace?"replaceState":"pushState";window.history[lt]({},"",gt)}},_n=_=>_==="/quests"?{page:"quests"}:_.startsWith("/quest/")?{page:"quest-detail",questId:_.split("/")[2]}:_==="/creators"?{page:"creators"}:_==="/auth/login"?{page:"auth",authMode:"login"}:_==="/auth/signup"?{page:"auth",authMode:"signup"}:_==="/auth/forgot"?{page:"auth",authMode:"forgot"}:_==="/profile"?{page:"profile"}:_==="/creator/start"?{page:"creator-start"}:_==="/creator/mystery-setup"?{page:"creator-mystery-setup"}:_==="/creator/route-spots"?{page:"creator-route-spots"}:_.startsWith("/creator/route-spots/")?{page:"creator-spot-detail",spotId:_.split("/")[3]}:_==="/creator/storytelling"?{page:"creator-storytelling"}:_==="/creator/test-run"?{page:"creator-test-run"}:_==="/creator/submitted"?{page:"creator-submitted"}:_==="/creator/analytics"?{page:"creator-analytics"}:_.startsWith("/creator/analytics/")?{page:"creator-analytics",questId:_.split("/")[3]}:_==="/admin"||_==="/admin/dashboard"?{page:"admin-dashboard"}:_.startsWith("/admin/review/")?{page:"admin-review",questId:_.split("/")[3]}:_==="/play"?{page:"player"}:_==="/creator"?{page:"creator-workspace"}:_.startsWith("/creator/workspace/")?{page:"creator-workspace",questId:_.split("/")[3]}:_==="/creator/workspace"||_==="/workspace"?{page:"creator-workspace"}:_.startsWith("/creator/analytics/")?{page:"creator-analytics",questId:_.split("/")[3]}:_==="/creator/analytics"?{page:"creator-analytics"}:{page:"home"};A.useEffect(()=>{const _=()=>{i(window.scrollY>50)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]),A.useEffect(()=>{if(typeof window>"u")return;const _=_n(window.location.pathname);Ze(_.page,{quest:_.quest||null,questId:_.questId||null,authModeOverride:_.authMode,replace:!0,spotId:_.spotId})},[]),A.useEffect(()=>{if(typeof window>"u")return;const _=()=>{const z=_n(window.location.pathname);Ze(z.page,{quest:z.quest||null,questId:z.questId||null,authModeOverride:z.authMode,replace:!0,spotId:z.spotId})};return window.addEventListener("popstate",_),()=>window.removeEventListener("popstate",_)},[]),A.useEffect(()=>{const _=localStorage.getItem("quest-id");_&&ss(_)},[]),A.useEffect(()=>{if(!(Z!=null&&Z.id)){F([]);return}Ne.from("notifications").select("*").eq("user_id",Z.id).order("created_at",{ascending:!1}).then(({data:_})=>{_&&F(_)}).catch(()=>{})},[Z==null?void 0:Z.id]),A.useEffect(()=>{un()},[un]),A.useEffect(()=>{m.startsWith("creator")&&Di()},[m,Di]),A.useEffect(()=>{Oi&&Xn(Oi,wn==null?void 0:wn.title)},[Bt,Kn,Oi,Xn]),A.useEffect(()=>{if(!x)return;const _=vn.includes(x.id);x.owned!==_&&y({...x,owned:_})},[vn,x]),A.useEffect(()=>{(async()=>{var zs;if(m!=="quest-detail"||!k||(x==null?void 0:x.id)===k)return;const[{data:z,error:he},{data:$e},{data:gt},{data:lt},{data:rs}]=await Promise.all([Ne.from("quests").select("*, profiles!quests_creator_id_fkey(username)").eq("id",k).limit(1).single(),Ne.from("spots").select("*").eq("quest_id",k).order("order_index",{ascending:!0}),Ne.from("story_timelines").select("*").eq("quest_id",k).single(),Ne.from("quest_reviews").select("rating").eq("quest_id",k),Ne.from("play_sessions").select("ended_at,duration_sec").eq("quest_id",k)]);if(!he&&z){const Ht=($e==null?void 0:$e.map(Pe=>({name:Pe.name,clue:Pe.address||"",action:""})))||[],rt=(lt||[]).filter(Pe=>Pe.rating!=null),Ns=rt.length>0?parseFloat((rt.reduce((Pe,ls)=>Pe+(ls.rating||0),0)/rt.length).toFixed(1)):0,is=(rs==null?void 0:rs.length)||0,hs=(rs||[]).filter(Pe=>Pe.ended_at!=null).length,fn=is>0?Math.round(hs/is*100):null,ft=(rs||[]).filter(Pe=>Pe.duration_sec!=null).map(Pe=>Pe.duration_sec),fs=ft.length>0?Math.round(ft.reduce((Pe,ls)=>Pe+ls,0)/ft.length/60):null,Tt={id:z.id,title:z.title||"",area:z.area_name||"",distanceKm:z.distance_km||2,durationMin:z.duration_min||60,difficulty:"",tags:z.tags||[""],rating:Ns,reviews:rt.length,cover:z.cover_image_url||"https://images.unsplash.com/photo-1505761671935-60b3a7427bad?auto=format&fit=crop&w=1200&q=80",description:z.description||"",teaser:z.area_name||"",startingPoint:"",reward:"",timeWindow:"",mood:"",stops:Ht,creatorName:((zs=z.profiles)==null?void 0:zs.username)||"TOMOSHIBI Creator",creatorId:z.creator_id,storyPrologue:(gt==null?void 0:gt.prologue)||"",storyEpilogue:(gt==null?void 0:gt.epilogue)||"",owned:vn.includes(z.id),playCount:is,clearRate:fn,avgDurationMin:fs};y(Tt)}})()},[m,k,x,vn]),A.useEffect(()=>{(async()=>{if(m!=="admin-review"||!je)return;const{data:z}=await Ne.from("quests").select("*, profiles!quests_creator_id_fkey(username)").eq("id",je).single(),{data:he}=await Ne.from("spots").select("*").eq("quest_id",je).order("order_index",{ascending:!0}),{data:$e}=await Ne.from("story_timelines").select("*").eq("quest_id",je).single();z&&re({quest:z,spots:he||[],story:$e||null})})()},[m,je]),A.useEffect(()=>{m==="profile"&&(Z!=null&&Z.id)&&Zt()},[m,Z==null?void 0:Z.id]),A.useEffect(()=>{m==="admin-dashboard"&&ht()},[m]),A.useEffect(()=>{m==="creator-test-run"&&qt(4)},[m]);const ht=async()=>{const{data:_,error:z}=await Ne.from("quests").select("id, title, area_name, created_at, creator_id, profiles!quests_creator_id_fkey(username)").eq("status","pending_review").order("created_at",{ascending:!1});!z&&_&&R(_)};A.useEffect(()=>{m==="admin-dashboard"&&ht()},[m]),A.useEffect(()=>{Ke&&(Js(Ke),Ne.from("quests").select("*").eq("id",Ke).single().then(({data:_})=>{_&&(ze(_.title||""),Mt(_.description||""),de(_.area_name||""),_.location_lat&&_.location_lng&&on({lat:_.location_lat,lng:_.location_lng}))}).catch(()=>{}))},[Ke]),A.useEffect(()=>{(async()=>{if(!(Z!=null&&Z.id)||m!=="profile"){za([]);return}const{data:z,error:he}=await Ne.from("quests").select("id, title, description, area_name, location_lat, location_lng, created_at").eq("creator_id",Z.id).order("created_at",{ascending:!1});za(!he&&z?z:[])})()},[Z==null?void 0:Z.id,m]);const _r=()=>{X("idle"),ye(null)},Bi=_=>{oe(_),X("idle"),ye(null)},dn=_=>{const z=document.querySelector(_);z&&z.scrollIntoView({behavior:"smooth",block:"start"})},at=_=>{Ze("home"),u(!1),_r(),W(!1),_?requestAnimationFrame(()=>dn(_)):window.scrollTo({top:0,behavior:"smooth"})},Wn=()=>{Ze("quests"),u(!1),_r(),W(!1),window.scrollTo({top:0,behavior:"smooth"})},ea=()=>{Ze("creators"),u(!1),_r(),W(!1),window.scrollTo({top:0,behavior:"smooth"})},Nr=()=>{ge().catch(()=>{}).finally(()=>{se(!1),W(!1),at()})},Li=()=>{W(!0),ve(0),se(!1)},La=()=>{W(!1),ve(0)},Sr=()=>{if(ae>=Dh.length-1){La(),Tr();return}ve(_=>Math.min(_+1,Dh.length-1))},Fs=()=>{Ze("quests"),window.scrollTo({top:0,behavior:"smooth"})},us=_=>{y(_),O(_.id),Ze("quest-detail",{quest:_}),window.scrollTo({top:0,behavior:"smooth"})},uo=async _=>{if(!(Z!=null&&Z.id)){Va("login");return}if(vn.includes(_)){alert("/mobile ");return}vr(!0);try{const{data:z}=await Ne.from("events").select("id").eq("quest_id",_).maybeSingle(),he={user_id:Z.id,quest_id:_,status:"test",price:0,currency:"JPY"};z!=null&&z.id&&(he.event_id=z.id),await Ne.from("purchases").insert(he),await un(),y($e=>$e&&$e.id===_?{...$e,owned:!0}:$e),alert(" /mobile ")}catch(z){console.error(z),alert("")}finally{vr(!1)}},Va=(_="login")=>{Bi(_),Ze("auth",{authModeOverride:_}),u(!1),y(null),W(!1),window.scrollTo({top:0,behavior:"smooth"})},Zs=()=>{Ze("profile"),u(!1),se(!1),W(!1),window.scrollTo({top:0,behavior:"smooth"}),Z!=null&&Z.id&&Ne.from("quests").select("*").eq("creator_id",Z.id).order("created_at",{ascending:!1}).then(({data:_})=>{_&&za(_)})},Tr=()=>{Ze("creator-start"),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},Er=async()=>{if(!(Z!=null&&Z.id))return Ze("auth",{authModeOverride:"login"}),null;try{const{data:_,error:z}=await Ne.from("quests").insert({creator_id:Z.id,title:"",area_name:"",description:"",tags:[],category_tags:[],hashtag_tags:[],status:"draft"}).select("id, title, area_name, description").maybeSingle();if(z)throw z;if(_!=null&&_.id)return ss(_.id),localStorage.setItem("quest-id",_.id),ze(_.title||""),Mt(_.description||""),de(_.area_name||""),_.id}catch(_){console.warn("draft quest create failed",_),alert("")}return null},ru=()=>{Ze("creator-mystery-setup"),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},Lt=()=>{qt(2),Ze("creator-route-spots",{questId:Ke}),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},Vi=(_,z)=>{Ze("creator-analytics",{questId:_}),W(!1),u(!1),se(!1),_?Xn(_,z):ws(null),window.scrollTo({top:0,behavior:"smooth"})},ho=()=>{qt(3),Ze("creator-storytelling",{questId:Ke}),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},Pi=()=>{qt(4),Ze("creator-test-run",{questId:Ke}),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},ta=()=>{Ze("creator-submitted"),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},fo=_=>{qt(2),Ze("creator-spot-detail",{spotId:_}),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},ds=()=>{Ke&&Js(Ke),Ze("creator-workspace",{questId:Ke}),W(!1),u(!1),se(!1),window.scrollTo({top:0,behavior:"smooth"})},Js=_=>{if(!_){qt(1);return}const z=localStorage.getItem(`workspace-step:${_}`),he=z?parseInt(z,10):1;qt(Number.isFinite(he)&&he>0?he:1)},qi=async _=>{if(!Ke)return;const z=Math.max(_,Ai||1);qt(z),localStorage.setItem(`workspace-step:${Ke}`,String(z)),await Ne.from("quests").update({updated_at:new Date().toISOString(),status:"draft"}).eq("id",Ke)},mo=async()=>{if(!Ke){alert("Step1");return}if(!(Z!=null&&Z.id)){alert(""),Va("login");return}const{data:_}=await Ne.from("profiles").select("role").eq("id",Z.id).single(),he=((_==null?void 0:_.role)||(T==null?void 0:T.role)||"player")==="admin"?"published":"pending_review",{error:$e}=await Ne.from("quests").update({status:he}).eq("id",Ke);if($e){alert("");return}qt(5),he==="published"?(alert(""),Wn()):(alert(""),ta())},Hi=async({userId:_,title:z,message:he})=>{_&&await Ne.from("notifications").insert({user_id:_,title:z,message:he,type:"review_result"})},$i=async()=>{if(!je)return;Me(!0);const{data:_,error:z}=await Ne.from("quests").update({status:"published"}).eq("id",je).select("creator_id, title").single();if(z){alert("/RLS"),Me(!1);return}_&&(await Hi({userId:_.creator_id,title:"",message:`${_.title}`}),alert(""),ht(),_s()),Me(!1)},iu=async _=>{if(!je||!(M!=null&&M.quest))return;Me(!0);const{error:z}=await Ne.from("quests").update({status:"draft"}).eq("id",je);if(z){alert("/RLS"),Me(!1);return}await Hi({userId:M.quest.creator_id,title:"",message:`
: ${_||""}`}),alert(""),ht(),_s(),Me(!1)},po=_=>{gr(z=>z.map(he=>he.id===_.id?_:he))},kr=async({email:_,password:z,confirmPassword:he})=>{ye(null),X("submitting");try{if(Ge==="signup"&&z!==he)throw new Error("");if(Ge!=="forgot"&&(!z||z.length<6))throw new Error("6");if(Ge==="forgot"){await ce(_),X("success");return}if(Ge==="login")await ne(_,z||""),X("success"),setTimeout(()=>Zs(),200);else{const $e=await I(_,z||"");if(!($e!=null&&$e.session)){X("idle"),ye(""),oe("login");return}X("success"),setTimeout(()=>Zs(),200)}}catch($e){X("idle"),ye(($e==null?void 0:$e.message)||""),console.error($e)}},js=_=>{if(_==="#creators"){ea();return}m!=="home"?at(_):(dn(_),u(!1))},Ii=_=>{p(d===_?null:_)},Gi=_=>{_.preventDefault(),zi&&(jn("submitting"),setTimeout(()=>{jn("success"),Fn("")},1200))},sa=m==="home",as=!!Bb,Pa=()=>{typeof window>"u"||window.location.assign(V3)},Ki=Qs&&oo&&["home","quests","quest-detail","creators","auth","profile"].includes(m);A.useEffect(()=>{if(typeof window>"u")return;const _=()=>{const z=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent||"")||window.matchMedia("(max-width: 640px)").matches;Dt(z);const he=sessionStorage.getItem("tmoshibi_install_bar_dismissed")==="1";z&&!he&&wr(!0),z||wr(!1)};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const go=()=>{wr(!1),typeof window<"u"&&sessionStorage.setItem("tmoshibi_install_bar_dismissed","1")},hn=()=>{if(typeof window<"u"){window.location.href="/mobile";return}as&&Qs||Ze("player")},_s=()=>{(T==null?void 0:T.role)==="admin"?(Ze("admin-dashboard"),u(!1),se(!1)):(alert(""),at())};return l.jsxs("div",{className:"min-h-screen bg-brand-base font-sans text-brand-dark selection:bg-brand-gold/30 selection:text-brand-dark",children:[m!=="creator-mystery-setup"&&m!=="creator-workspace"&&m!=="creator-route-spots"&&m!=="creator-spot-detail"&&m!=="creator-storytelling"&&m!=="creator-test-run"&&m!=="creator-submitted"&&m!=="creator-analytics"&&m!=="player"&&l.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${a?"bg-white/80 backdrop-blur-md py-4 shadow-lg border-b border-stone-200/50":"bg-transparent py-6"}`,children:[l.jsxs("div",{className:"container mx-auto px-4 md:px-8 flex items-center justify-between",children:[l.jsx("button",{onClick:()=>at(),className:"flex items-center gap-2 group hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 md:h-10 w-auto"})}),l.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[Lb.map(_=>l.jsxs("button",{onClick:()=>js(_.href),className:"text-sm font-medium text-stone-600 hover:text-brand-gold transition-colors relative group",children:[_.label,l.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-brand-gold transition-all group-hover:w-full"})]},_.label)),l.jsx("button",{onClick:Wn,className:"bg-brand-dark text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-brand-gold hover:text-white transition-all shadow-md hover:shadow-lg",children:""}),!K&&Qn?l.jsxs("div",{className:"relative flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>{H(_=>!_),Q.some(_=>!_.is_read)&&(Ne.from("notifications").update({is_read:!0}).eq("user_id",(Z==null?void 0:Z.id)||""),F(_=>_.map(z=>({...z,is_read:!0}))))},className:"relative p-2 rounded-full border border-stone-200 bg-white/90 hover:border-brand-gold",children:[l.jsx(Lj,{size:18,className:"text-brand-dark"}),Q.some(_=>!_.is_read)&&l.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-rose-500"})]}),te&&l.jsxs("div",{className:"absolute right-14 top-12 w-72 bg-white border border-stone-200 rounded-xl shadow-lg z-50",children:[l.jsx("div",{className:"p-3 border-b border-stone-100 text-sm font-bold text-brand-dark",children:""}),l.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[Q.length===0&&l.jsx("div",{className:"px-4 py-3 text-xs text-stone-500",children:""}),Q.map(_=>l.jsxs("div",{className:`px-4 py-3 border-b border-stone-100 ${_.is_read?"bg-white":"bg-brand-base"}`,children:[l.jsx("p",{className:"text-xs text-stone-500",children:new Date(_.created_at).toLocaleString()}),l.jsx("p",{className:"text-sm font-bold text-brand-dark",children:_.title}),l.jsx("p",{className:"text-xs text-stone-600 whitespace-pre-line",children:_.message})]},_.id))]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>se(!ke),className:"flex items-center gap-3 pl-3 pr-4 py-2 rounded-full border border-stone-300 bg-white/90 backdrop-blur text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm",children:l.jsx("span",{className:"w-8 h-8 rounded-full bg-brand-dark text-white flex items-center justify-center font-bold",children:Qn.charAt(0).toUpperCase()})}),ke&&l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-stone-200 rounded-xl shadow-lg overflow-hidden",children:[l.jsx("button",{onClick:Zs,className:"w-full text-left px-4 py-3 text-sm text-brand-dark hover:bg-brand-base",children:""}),(T==null?void 0:T.role)==="admin"&&l.jsx("button",{onClick:_s,className:"w-full text-left px-4 py-3 text-sm text-brand-dark hover:bg-brand-base",children:""}),l.jsx("button",{onClick:Nr,className:"w-full text-left px-4 py-3 text-sm text-brand-dark hover:bg-brand-base",children:""})]})]})]}):K?l.jsx("div",{className:"w-10 h-10 rounded-full bg-stone-200 animate-pulse"}):l.jsx("button",{onClick:()=>Va("login"),className:"ml-2 px-4 py-2 rounded-full border border-stone-300 bg-white/80 backdrop-blur text-sm font-bold text-brand-dark hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm",children:""})]}),l.jsx("button",{className:"md:hidden text-brand-dark",onClick:()=>u(!c),children:c?l.jsx(Lc,{}):l.jsx(Yb,{})})]}),l.jsx(Nh,{children:c&&l.jsx(St.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t border-stone-200 overflow-hidden shadow-xl",children:l.jsxs("div",{className:"flex flex-col p-6 gap-6",children:[Lb.map(_=>l.jsx("button",{onClick:()=>js(_.href),className:"text-lg text-brand-dark font-serif text-left",children:_.label},_.label)),l.jsx("button",{onClick:Wn,className:"w-full bg-brand-gold text-white py-3 rounded-lg font-bold",children:""}),!K&&Qn?l.jsxs("div",{className:"flex flex-col gap-2 border border-stone-200 rounded-lg p-3 bg-white",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"w-9 h-9 rounded-full bg-brand-dark text-white flex items-center justify-center font-bold",children:Qn.charAt(0).toUpperCase()})}),l.jsx("button",{onClick:Zs,className:"w-full bg-brand-dark text-white py-2 rounded-lg font-bold text-sm hover:bg-brand-gold transition-colors",children:""}),l.jsx("button",{onClick:Nr,className:"w-full border border-stone-300 text-brand-dark py-2 rounded-lg font-bold text-sm hover:border-brand-gold hover:text-brand-gold transition-colors",children:""})]}):K?l.jsx("div",{className:"flex items-center justify-center py-4 text-stone-400 text-sm",children:"..."}):l.jsx("button",{onClick:()=>Va("login"),className:"w-full border border-stone-300 text-brand-dark py-3 rounded-lg font-bold hover:border-brand-gold hover:text-brand-gold transition-colors",children:""})]})})})]}),m==="quests"&&l.jsx(lA,{onSelectQuest:us,onBackHome:()=>at(),activeFilter:v,setActiveFilter:j,sortKey:N,setSortKey:S,onOpenApp:hn,comingSoon:!as,onScrollNotify:Pa,ownedQuestIds:vn}),m==="quest-detail"&&x&&l.jsx(oA,{quest:x,onBackToList:Fs,onBackHome:()=>at(),onOpenApp:hn,comingSoon:!as,onScrollNotify:Pa,purchased:x.owned||vn.includes(x.id),onPurchase:uo,purchasing:Ui}),m==="quest-detail"&&!x&&l.jsx("div",{className:"py-32 text-center text-stone-500",children:"..."}),m==="creators"&&l.jsx(uA,{onBackHome:()=>at(),onGoAuth:Va,onOpenOnboarding:Li}),m==="auth"&&l.jsx(cA,{mode:Ge,setMode:Bi,status:P,onSubmit:kr,error:ie,onBackHome:()=>at()}),m==="profile"&&Qn&&l.jsx(tA,{email:Qn,onLogout:Nr,onBackHome:()=>at(),onGoCreators:ea,onGoQuests:Wn,onOpenOnboarding:Li,onGoCreatorStart:Tr,quests:ns,onOpenWorkspace:_=>{ss(_.id),localStorage.setItem("quest-id",_.id),ze(_.title||""),Mt(_.description||""),de(_.area_name||"");const z=Array.isArray(_.tags)?_.tags:[];Ua(z.filter(he=>Ma.includes(he))),ki(z.filter(he=>!Ma.includes(he))),_.location_lat&&_.location_lng&&on({lat:_.location_lat,lng:_.location_lng}),Js(_.id),ds()},onOpenAnalytics:_=>{Vi(_.id,_.title)}}),m==="creator-start"&&l.jsx(gA,{selectedType:G,setSelectedType:le,onBack:()=>Zs(),onStart:async()=>{if(G==="mystery"){const _=await Er();ze(""),Mt(""),de(""),on(null),gr([]),qt(1),_&&localStorage.setItem(`workspace-step:${_}`,"1"),br(null),Ua([]),ki([]),co({castName:"",castTone:"",castIcon:"",prologueTitle:"",prologueBody:"",prologueImage:"",epilogueBody:"",socialMessage:"",epilogueImage:"",characters:[],scenario:[]}),_&&(ss(_),localStorage.setItem("quest-id",_)),ds()}else ea()},onOpenOnboarding:Li}),m==="creator-mystery-setup"&&l.jsx(xA,{location:ue,setLocation:de,title:Ae,setTitle:ze,description:Ye,setDescription:Mt,onSaveNext:()=>ds(),onBack:()=>Tr(),onLogoHome:()=>at(),onGoWorkspace:ds,userId:(Z==null?void 0:Z.id)||null,questId:Ke,setQuestId:_=>{ss(_),localStorage.setItem("quest-id",_)},setQuestLatLng:on,questLatLng:lo}),m==="player"&&l.jsx(PlayerAppPage,{onBackHome:()=>at(),onGoCreators:()=>ea()}),m==="creator-route-spots"&&l.jsx(rA,{onBack:()=>ds(),onComplete:()=>{qt(3),qi(2),ds()},onLogoHome:()=>at(),routeSpots:vs,setRouteSpots:gr,onOpenSpotDetail:_=>fo(_),questId:Ke}),m==="creator-storytelling"&&l.jsx(aA,{onLogoHome:()=>at(),onBack:()=>ds(),onSaveComplete:_=>{co(_),qt(4),qi(3),ds()},storySettings:jr,spots:vs,isSocialQuest:G==="social",questId:Ke}),m==="creator-test-run"&&l.jsx(dA,{onLogoHome:()=>at(),onBack:()=>ds(),onComplete:()=>{qt(5),qi(4),ds()},questTitle:Ae,questDescription:Ye,questLocation:ue,questLatLng:lo,routeSpots:vs,storySettings:jr,questId:Ke,userId:(Z==null?void 0:Z.id)||null,userEmail:(Z==null?void 0:Z.email)||null,questCategoryTags:Da,setQuestCategoryTags:Ua,questHashtags:ts,setQuestHashtags:ki}),m==="creator-submitted"&&l.jsx(hA,{onLogoHome:()=>at(),onBackHome:()=>ds()}),m==="admin-dashboard"&&((T==null?void 0:T.role)==="admin"?l.jsx(fA,{pending:U,onReview:_=>Ze("admin-review",{questId:_}),onBackHome:()=>at()}):l.jsx("div",{className:"py-32 text-center text-stone-500",children:""})),m==="admin-review"&&((T==null?void 0:T.role)==="admin"?l.jsx(mA,{questBundle:M,onBack:()=>Ze("admin-dashboard"),onApprove:$i,onReject:iu,loading:Te}):l.jsx("div",{className:"py-32 text-center text-stone-500",children:""})),m==="creator-spot-detail"&&(()=>{const _=vs.find(lt=>lt.id===xr)||vs[0]||null,z=_?vs.findIndex(lt=>lt.id===_.id):-1,he=z>=0&&z<vs.length-1?vs[z+1]:null;if(!_)return Lt(),null;const $e=lt=>{po(lt),Lt()},gt=lt=>{po(lt),he?(br(he.id),Ze("creator-spot-detail",{spotId:he.id}),window.scrollTo({top:0,behavior:"smooth"})):Lt()};return l.jsx(nA,{spot:_,onLogoHome:()=>at(),onBackList:()=>Lt(),onSaveBack:lt=>$e(lt),onSaveNext:lt=>gt(lt),nextSpot:he,questId:Ke,setRouteSpots:gr})})(),m==="creator-workspace"&&l.jsx(sA,{onBack:()=>Zs(),onPreview:()=>{},activeStep:Ai,setActiveStep:qt,onGoStep2:Lt,onGoStep3:ho,onGoStep4:Pi,onPublish:mo,onLogoHome:()=>at(),onGoStep1:()=>ru(),showAnalytics:!1,analytics:Ba,analyticsFilter:Bt,onChangeAnalyticsFilter:_=>Yn(_),onOpenDetail:(_,z)=>Xn(_,z),detailQuestAnalytics:wn,detailLoading:Ri}),m==="creator-analytics"&&l.jsx(B3,{onBack:()=>Zs(),onLogoHome:()=>at(),analytics:Ba,analyticsFilter:Bt,onChangeAnalyticsFilter:_=>Yn(_),onOpenDetail:(_,z)=>Xn(_,z),detailQuestAnalytics:wn,detailLoading:Ri}),sa&&l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:"relative min-h-screen pt-32 pb-20 flex items-center overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-hero-glow opacity-80 pointer-events-none"}),l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-white/30 via-transparent to-transparent pointer-events-none"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 grid md:grid-cols-2 gap-12 items-center relative z-10",children:[l.jsxs(St.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},className:"text-center md:text-left",children:[l.jsx("div",{className:"inline-block px-3 py-1 bg-brand-gold/10 border border-brand-gold/30 rounded-full text-brand-gold text-xs font-bold tracking-wider mb-6",children:"NEW WAY TO EXPLORE"}),l.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-serif font-bold leading-tight mb-6 text-brand-dark",children:["",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-gold to-orange-400 filter drop-shadow-sm",children:""}),l.jsx("br",{}),""]}),l.jsxs("p",{className:"text-stone-600 text-base md:text-lg leading-relaxed mb-8 max-w-lg mx-auto md:mx-0",children:["TOMOSHIBI",l.jsx("br",{}),"",l.jsx("br",{}),""]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(F3,{onPrimary:hn,onSecondary:Wn,onScrollNotify:Pa,hasStoreLink:as,comingSoon:!as}),l.jsx("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:l.jsx("button",{onClick:()=>js("#how-it-works"),className:"border border-stone-400 text-stone-600 px-6 py-3 rounded-full font-bold text-sm md:text-base hover:bg-white hover:border-transparent hover:shadow-lg transition-all flex items-center justify-center gap-2",children:""})}),l.jsx(Z3,{})]})]}),l.jsxs(St.div,{initial:{opacity:0,y:50,rotate:5},animate:{opacity:1,y:0,rotate:-6},transition:{duration:1,delay:.2},className:"relative hidden md:flex justify-center",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-brand-gold/10 rounded-full blur-[80px] pointer-events-none"}),l.jsx(W3,{}),l.jsxs(St.div,{animate:{y:[0,-15,0]},transition:{repeat:1/0,duration:4,ease:"easeInOut"},className:"absolute -right-8 top-20 bg-white/90 backdrop-blur border border-white p-4 rounded-2xl shadow-xl max-w-[180px]",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"p-1.5 bg-green-100 rounded-full text-green-600",children:l.jsx(ln,{size:16})}),l.jsx("span",{className:"text-xs font-bold text-brand-dark",children:""})]}),l.jsx("p",{className:"text-[10px] text-stone-500",children:""})]}),l.jsxs(St.div,{animate:{y:[0,15,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut",delay:1},className:"absolute -left-12 bottom-40 bg-white/90 backdrop-blur border border-white p-4 rounded-2xl shadow-xl max-w-[200px]",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"p-1.5 bg-amber-100 rounded-full text-amber-600",children:l.jsx(yf,{size:16})}),l.jsx("span",{className:"text-xs font-bold text-brand-dark",children:""})]}),l.jsx("p",{className:"text-[10px] text-stone-500",children:"1923"})]})]})]}),l.jsxs(St.div,{animate:{y:[0,10,0]},transition:{repeat:1/0,duration:2},className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-stone-400 flex flex-col items-center gap-2",children:[l.jsx("span",{className:"text-xs tracking-widest uppercase",children:"Scroll"}),l.jsx(Xx,{size:20})]})]}),l.jsx("section",{className:"py-10 border-y border-stone-200/50 bg-white/40 backdrop-blur-sm",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center divide-y md:divide-y-0 md:divide-x divide-stone-200",children:P3.map((_,z)=>l.jsxs(St.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:z*.1},className:"py-4 md:py-0",children:[l.jsx("div",{className:"text-sm text-stone-500 mb-2 font-medium",children:_.label}),l.jsx("div",{className:"text-3xl md:text-4xl font-serif font-bold text-brand-dark",children:_.value})]},z))}),l.jsx("p",{className:"text-center text-stone-500 mt-10 text-sm md:text-base font-light italic",children:""})]})}),l.jsx("section",{id:"features",className:"py-24 relative",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[l.jsx(ka,{subtitle:"TOMOSHIBI",children:"TOMOSHIBI"}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:H3.map((_,z)=>l.jsxs(St.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:z*.1},className:"bg-white border border-white/50 p-6 rounded-2xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group",children:[l.jsx("div",{className:"w-12 h-12 bg-brand-base rounded-xl flex items-center justify-center text-brand-gold mb-6 group-hover:scale-110 transition-transform duration-300",children:l.jsx(_.icon,{size:24})}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-brand-dark",children:_.title}),l.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:_.description})]},z))})]})}),l.jsxs("section",{id:"how-it-works",className:"py-24 relative overflow-hidden bg-white/50",children:[l.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e7e5e4_1px,transparent_1px),linear-gradient(to_bottom,#e7e5e4_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,#000_70%,transparent_100%)] opacity-30 pointer-events-none"}),l.jsxs("div",{className:"container mx-auto px-4 md:px-8 relative z-10",children:[l.jsx(ka,{subtitle:"",children:""}),l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"space-y-12 relative",children:[l.jsx("div",{className:"absolute left-6 md:left-1/2 top-4 bottom-4 w-0.5 bg-gradient-to-b from-stone-200 via-brand-gold/50 to-stone-200 md:-translate-x-1/2"}),$3.map((_,z)=>l.jsxs(St.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:z*.2},className:`flex flex-col md:flex-row gap-8 items-start md:items-center ${z%2===0?"":"md:flex-row-reverse"}`,children:[l.jsx("div",{className:"md:w-1/2 flex justify-start md:justify-end md:px-8",children:l.jsx("div",{className:`
                       w-12 h-12 rounded-full border-4 border-brand-base bg-brand-dark text-brand-gold font-bold flex items-center justify-center text-xl z-10 shadow-lg
                       ${z%2!==0?"md:order-last":""}
                     `,children:_.step})}),l.jsx("div",{className:"md:w-1/2 pl-14 md:pl-0 md:px-8 -mt-16 md:mt-0",children:l.jsxs("div",{className:"bg-white border border-stone-200 p-6 rounded-2xl relative shadow-md",children:[l.jsx("div",{className:`absolute top-6 w-3 h-3 bg-white border-l border-t border-stone-200 rotate-45 ${z%2===0?"left-[-7px] md:right-auto md:left-[-7px]":"left-[-7px] md:left-auto md:right-[-7px]"}`}),l.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-2",children:_.title}),l.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:_.description})]})})]},z))]})})]})]}),l.jsx("section",{id:"scenes",className:"py-24",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[l.jsx(ka,{subtitle:"TOMOSHIBI",children:""}),l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:I3.map((_,z)=>l.jsxs(St.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},whileHover:{y:-10},transition:{duration:.3},className:"group relative h-[400px] rounded-3xl overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("img",{src:_.image,alt:_.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-dark via-brand-dark/40 to-transparent opacity-80"})]}),l.jsxs("div",{className:"absolute inset-0 p-8 flex flex-col justify-end",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-white mb-4 border border-white/30",children:l.jsx(_.icon,{size:24})}),l.jsx("div",{className:"text-brand-gold text-xs font-bold tracking-widest uppercase mb-2",children:_.target}),l.jsx("h3",{className:"text-2xl font-serif font-bold mb-3 text-white",children:_.title}),l.jsx("p",{className:"text-stone-200 text-sm leading-relaxed opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:_.description})]})]},z))})]})}),l.jsx("section",{id:"creators",className:"py-20 my-10",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8",children:l.jsxs("div",{className:"bg-brand-dark rounded-[3rem] p-8 md:p-16 relative overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-gold/20 rounded-full blur-[80px] pointer-events-none"}),l.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-10 items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-6 text-white",children:["",l.jsx("br",{}),""]}),l.jsxs("p",{className:"text-stone-300 mb-8 leading-relaxed",children:["TOMOSHIBI",l.jsx("br",{}),""]}),l.jsxs("button",{onClick:ea,className:"bg-white text-brand-dark px-8 py-3 rounded-full hover:bg-brand-gold hover:text-white transition-all flex items-center gap-2 font-bold shadow-lg",children:[l.jsx(Hn,{size:18}),""]})]}),l.jsx("div",{className:"flex justify-center md:justify-end",children:l.jsxs("div",{className:"relative w-64 h-64",children:[l.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-stone-600 rounded-full animate-[spin_10s_linear_infinite]"}),l.jsx("div",{className:"absolute inset-4 border border-stone-700 rounded-full flex items-center justify-center bg-stone-700/50",children:l.jsxs("div",{className:"text-center p-4",children:[l.jsx(ln,{className:"mx-auto text-brand-gold mb-2",size:32}),l.jsxs("span",{className:"text-xs text-stone-400 block",children:["Create Your",l.jsx("br",{}),"Local Story"]})]})})]})})]})]})})}),l.jsx("section",{id:"faq",className:"py-24 bg-white/50",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-3xl",children:[l.jsx(ka,{subtitle:"TOMOSHIBI",children:"FAQ"}),l.jsx("div",{className:"space-y-4",children:G3.map((_,z)=>l.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-stone-200 shadow-sm",children:[l.jsxs("button",{onClick:()=>Ii(z),className:"w-full px-6 py-5 text-left flex justify-between items-center hover:bg-stone-50 transition-colors",children:[l.jsx("span",{className:"font-bold text-brand-dark",children:_.question}),l.jsx(Xx,{size:20,className:`text-stone-400 transition-transform duration-300 ${d===z?"rotate-180":""}`})]}),l.jsx("div",{className:`px-6 text-stone-600 text-sm leading-relaxed bg-brand-base/30 transition-all duration-300 overflow-hidden ${d===z?"max-h-40 py-5 opacity-100":"max-h-0 py-0 opacity-0"}`,children:_.answer})]},z))})]})}),l.jsx("section",{className:"py-20 relative overflow-hidden",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 max-w-4xl",children:l.jsxs(St.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-white border border-stone-200 rounded-3xl p-8 md:p-12 shadow-xl text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-brand-dark via-brand-gold to-brand-dark"}),l.jsx("div",{className:"absolute -left-10 -bottom-10 w-40 h-40 bg-brand-gold/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-brand-dark/5 rounded-full blur-3xl"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-brand-base rounded-full text-brand-gold mb-6",children:l.jsx(Uh,{size:24})}),l.jsx("h3",{className:"text-2xl md:text-3xl font-serif font-bold text-brand-dark mb-4",children:""}),l.jsxs("p",{className:"text-stone-600 mb-8 max-w-xl mx-auto",children:["",l.jsx("br",{className:"hidden md:block"}),""]}),Zn==="success"?l.jsxs(St.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-green-50 border border-green-200 text-green-700 px-6 py-4 rounded-xl inline-flex items-center gap-2",children:[l.jsx(gi,{size:20}),l.jsx("span",{children:""})]}):l.jsxs("form",{onSubmit:Gi,className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[l.jsx("input",{type:"email",placeholder:"",value:zi,onChange:_=>Fn(_.target.value),required:!0,disabled:Zn==="submitting",className:"flex-1 px-5 py-3 rounded-full border border-stone-300 bg-stone-50 focus:outline-none focus:ring-2 focus:ring-brand-gold/50 focus:border-brand-gold transition-all disabled:opacity-50"}),l.jsx("button",{type:"submit",disabled:Zn==="submitting",className:"bg-brand-dark text-white px-8 py-3 rounded-full font-bold hover:bg-brand-gold transition-colors shadow-md flex items-center justify-center gap-2 disabled:opacity-70",children:Zn==="submitting"?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[" ",l.jsx(wf,{size:16})]})})]}),l.jsx("p",{className:"text-xs text-stone-400 mt-6",children:""})]})]})})})]}),l.jsx(Nh,{children:$&&l.jsx(eA,{steps:Dh,activeIndex:ae,onClose:La,onNext:Sr})}),l.jsx(Nh,{children:l.jsx(J3,{visible:Ki,onPrimary:hn,onDismiss:go,comingSoon:!as,onScrollNotify:Pa})}),m!=="creator-mystery-setup"&&m!=="creator-workspace"&&m!=="creator-route-spots"&&m!=="creator-spot-detail"&&m!=="creator-storytelling"&&l.jsx("footer",{id:"contact",className:"bg-brand-dark pt-20 pb-10 border-t border-brand-dark/50 mt-10",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("h2",{className:"text-3xl md:text-5xl font-serif font-bold text-white mb-6",children:["TOMOSHIBI",l.jsx("br",{}),""]}),l.jsx("button",{onClick:Wn,className:"bg-brand-gold text-white px-10 py-4 rounded-full font-bold text-xl hover:bg-white hover:text-brand-dark transition-colors shadow-lg shadow-brand-gold/20",children:""}),l.jsx("div",{className:"mt-8 flex justify-center gap-4 opacity-90 hover:opacity-100 transition-all duration-500 flex-wrap",children:as?l.jsxs(l.Fragment,{children:[L3,Bb]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-12 w-36 bg-stone-800/50 rounded-lg flex items-center justify-center border border-stone-600/50 cursor-not-allowed",children:l.jsx("span",{className:"text-xs text-stone-400",children:"App Store"})}),l.jsx("div",{className:"h-12 w-36 bg-stone-800/50 rounded-lg flex items-center justify-center border border-stone-600/50 cursor-not-allowed",children:l.jsx("span",{className:"text-xs text-stone-400",children:"Google Play"})})]})}),l.jsx("p",{className:"text-xs text-stone-500 mt-2",children:as?"App Store / Google Play ":""})]}),l.jsxs("div",{className:"border-t border-stone-700/50 pt-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(Gn,{className:"h-8 w-auto",color:"#78716c"})}),l.jsxs("div",{className:"flex gap-6 text-sm text-stone-500",children:[l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:""}),l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:""}),l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:""}),l.jsxs("a",{href:"mailto:info@tomoshibi.app",className:"hover:text-white transition-colors flex items-center gap-1",children:[l.jsx(Uh,{size:14})," "]})]}),l.jsxs("div",{className:"text-xs text-stone-600",children:[" ",new Date().getFullYear()," TOMOSHIBI. All rights reserved."]})]})]})})]})}const gA=({selectedType:n,setSelectedType:t,onBack:a,onStart:i,onOpenOnboarding:c})=>l.jsx("section",{className:"pt-24 pb-14 bg-brand-base min-h-screen",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-stone-600",children:[l.jsx("button",{onClick:a,className:"underline hover:text-brand-dark",children:""}),l.jsx("span",{className:"text-stone-400",children:"/"}),l.jsx("span",{className:"font-bold text-brand-dark",children:""})]}),l.jsx("div",{className:"flex items-center gap-3 text-sm",children:l.jsx("button",{onClick:c,className:"text-brand-gold font-bold hover:underline",children:""})})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white/90 backdrop-blur border border-white/70 rounded-3xl p-6 md:p-8 shadow-xl",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Hn,{size:18,className:"text-brand-gold"}),l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Before You Start"})]}),l.jsx("h2",{className:"text-2xl font-serif font-bold text-brand-dark mb-6",children:""}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:" (Mindset)"}),l.jsxs("ul",{className:"space-y-2 text-sm text-stone-700 list-disc list-inside",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-stone-200 to-transparent"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-brand-dark mb-2",children:" (Preparation)"}),l.jsxs("ul",{className:"space-y-2 text-sm text-stone-700 list-disc list-inside",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]})]})]}),l.jsxs("div",{className:"bg-white/95 backdrop-blur border border-white/70 rounded-3xl p-6 md:p-8 shadow-2xl flex flex-col gap-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-brand-gold font-bold",children:"Quest Type"}),l.jsx("div",{className:"text-xs text-stone-500",children:""})]}),l.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl p-5 shadow-inner space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fc,{className:"text-brand-dark",size:18}),l.jsx("h3",{className:"text-lg font-bold text-brand-dark",children:"Mystery Quest"})]}),l.jsx("p",{className:"text-sm text-stone-700 leading-relaxed",children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:i,className:"px-6 py-3 rounded-full bg-brand-dark text-white font-bold text-sm hover:bg-brand-gold transition-colors shadow-lg",children:""})})]})]})]})}),xA=({location:n,setLocation:t,title:a,setTitle:i,description:c,setDescription:u,onSaveNext:d,onBack:p,onLogoHome:m,onGoWorkspace:g,userId:x,questId:y,setQuestId:v,setQuestLatLng:j,questLatLng:N})=>{const S=A.useRef(null),k=A.useRef(null),O=A.useRef(null),U=A.useRef(null),[R,Q]=A.useState({lat:35.6804,lng:139.769}),[F,te]=A.useState([]),[H,M]=A.useState(!1),[re,je]=A.useState(!1),[xe,Te]=A.useState(null),Me=oe=>{const P=(oe==null?void 0:oe.place_type)||[];return oe!=null&&oe.bbox?null:P.includes("country")?6:P.includes("region")?9:P.includes("place")?12:P.includes("locality")?13:P.includes("neighborhood")?14:15};A.useEffect(()=>{jw().then(oe=>{k.current&&(O.current=new oe.Map({container:k.current,style:ww,center:[R.lng,R.lat],zoom:11}),U.current=new oe.Marker({color:"#d97706"}).setLngLat([R.lng,R.lat]).addTo(O.current))}).catch(()=>{})},[]),A.useEffect(()=>{!O.current||!U.current||(O.current.setCenter([R.lng,R.lat]),U.current.setLngLat([R.lng,R.lat]))},[R]),A.useEffect(()=>{const oe=new AbortController,P=n.trim();if(P.length<2){te([]);return}return M(!0),fetch(`https://api.maptiler.com/geocoding/${encodeURIComponent(P)}.json?key=${yi}&language=ja&limit=5`,{signal:oe.signal}).then(X=>X.json()).then(X=>te((X==null?void 0:X.features)||[])).catch(()=>te([])).finally(()=>M(!1)),()=>oe.abort()},[n]),A.useEffect(()=>{N&&Q(N)},[N]);const Ge=async()=>{if(!x){Te("");return}Te(null),je(!0);try{const{data:oe,error:P}=await Ne.from("quests").upsert({id:y||void 0,creator_id:x,title:a,description:c,area_name:n,location_lat:R.lat,location_lng:R.lng,cover_image_url:""}).select().single();if(P)throw P;oe!=null&&oe.id&&(v(oe.id),j({lat:R.lat,lng:R.lng}),d())}catch(oe){Te((oe==null?void 0:oe.message)||"")}finally{je(!1)}};return l.jsxs("section",{className:"min-h-screen bg-white",children:[l.jsx("div",{className:"border-b border-stone-200 bg-white",children:l.jsx("div",{className:"container mx-auto px-4 md:px-8 py-4 flex items-center justify-between gap-6",children:l.jsx("button",{onClick:m,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:l.jsx(Gn,{className:"h-8 w-auto"})})})}),l.jsxs("div",{className:"grid lg:grid-cols-2 min-h-[calc(100vh-64px)]",children:[l.jsxs("div",{className:"px-4 md:px-12 py-12 space-y-8 overflow-y-auto h-[calc(100vh-96px)]",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("h1",{className:"text-4xl font-serif font-bold text-brand-dark mb-1",children:""}),l.jsx("p",{className:"text-base font-bold text-stone-700",children:" "}),l.jsx("p",{className:"text-sm text-stone-600 max-w-2xl leading-relaxed",children:""})]}),l.jsxs("div",{className:"space-y-6 max-w-2xl",children:[l.jsxs("div",{className:"space-y-2 relative",children:[l.jsxs("label",{className:"text-sm font-extrabold text-brand-dark flex items-center gap-2",children:[" (Location) ",l.jsx("span",{children:""})]}),l.jsx("p",{className:"text-xs text-stone-500 mb-1",children:""}),l.jsx("input",{type:"text",value:n,onChange:oe=>t(oe.target.value),placeholder:"",ref:S,className:"w-full px-4 py-3 rounded-xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"}),F.length>0&&l.jsxs("div",{className:"mt-2 rounded-2xl border border-stone-200 bg-white shadow-lg max-h-56 overflow-auto z-10",children:[F.map(oe=>l.jsx("button",{onMouseDown:P=>{var Z;P.preventDefault();const[X,ie]=(oe==null?void 0:oe.center)||[],ye=(oe==null?void 0:oe.place_name)||"";if(ye&&t(ye),O.current&&(oe!=null&&oe.bbox)){const[T,K,ne,I]=oe.bbox;O.current.fitBounds([[T,K],[ne,I]],{padding:80}),Q({lat:(K+I)/2,lng:(T+ne)/2})}else if(ie&&X){const T=Me(oe);(Z=O.current)==null||Z.jumpTo({center:[X,ie],zoom:T??O.current.getZoom()}),Q({lat:ie,lng:X})}te([])},className:"w-full text-left px-4 py-2 text-sm text-brand-dark hover:bg-brand-base",children:oe==null?void 0:oe.place_name},oe.id)),H&&l.jsx("div",{className:"px-4 py-2 text-xs text-stone-500",children:"..."})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-extrabold text-brand-dark flex items-center gap-2",children:[" (Quest Title) ",l.jsx("span",{children:""})]}),l.jsx("p",{className:"text-xs text-stone-500 mb-1",children:""}),l.jsx("input",{type:"text",value:a,onChange:oe=>i(oe.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-stone-300 bg-white focus:outline-none focus:ring-2 focus:ring-brand-gold/50"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-extrabold text-brand-dark flex items-center gap-2",children:[" (Description) ",l.jsx("span",{children:""})]}),l.jsx("p",{className:"text-xs text-stone-500",children:""}),l.jsxs("div",{className:"rounded-2xl border border-stone-300 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-stone-200 text-xs text-stone-500",children:[l.jsx("button",{className:"px-2.5 py-1.5 rounded-lg border border-stone-200 hover:border-brand-gold hover:text-brand-dark flex items-center gap-1",children:l.jsx(Pj,{size:14})}),l.jsx("button",{className:"px-2.5 py-1.5 rounded-lg border border-stone-200 hover:border-brand-gold hover:text-brand-dark flex items-center gap-1",children:l.jsx(r_,{size:14})}),l.jsx("button",{className:"px-2.5 py-1.5 rounded-lg border border-stone-200 hover:border-brand-gold hover:text-brand-dark flex items-center gap-1",children:l.jsx(f_,{size:14})})]}),l.jsx("textarea",{value:c,onChange:oe=>u(oe.target.value),rows:8,placeholder:"100",className:"w-full px-4 py-3 rounded-b-2xl bg-white focus:outline-none text-sm text-brand-dark"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between max-w-2xl pt-2",children:[l.jsx("div",{className:"text-xs text-stone-500",children:"Step 1 of 4"}),l.jsx("button",{onClick:Ge,disabled:re,className:"px-5 py-3 rounded-full bg-brand-dark text-white text-sm font-bold hover:bg-brand-gold transition-colors shadow-lg disabled:opacity-60",children:re?"...":""})]}),xe&&l.jsx("div",{className:"text-sm text-red-600",children:xe})]}),l.jsxs("div",{className:"relative bg-white border-l border-stone-200 h-[calc(100vh-64px)]",children:[l.jsx("div",{ref:k,className:"absolute inset-0 w-full h-full"}),!yi]})]})]})},Sw=document.getElementById("root");if(!Sw)throw new Error("Could not find root element to mount to");const bA=Cj.createRoot(Sw);bA.render(l.jsx(jj.StrictMode,{children:l.jsx(tS,{children:l.jsx(pA,{})})}));
